{"version":3,"sources":["actions/userActions.js","actions/actionTypes.js","constants.js","components/login.jsx","constraints/signupConstraints.js","utils/cnp.js","utils/password.js","components/registration.jsx","actions/staffActions.js","utils/communication.js","components/staff/staff_list.jsx","components/staff/staff.jsx","actions/teamsActions.js","components/error_page.jsx","components/loading_page.jsx","components/teams/teams.jsx","components/players/player_list.jsx","components/teams/team.jsx","components/players/player.jsx","components/players/players.jsx","components/games/game_card.jsx","actions/eventActions.js","utils/scroll.js","components/games/game_list.jsx","components/games/games.jsx","utils/mysql_date.js","components/games/game.jsx","constraints/gameConstraints.js","components/games/game_form.jsx","components/games/scores.jsx","components/ScoreTable.jsx","components/main.jsx","App.js","reducers/userReducer.js","reducers/staffRedurer.js","reducers/teamsReducer.js","reducers/eventReducer.js","reducers/index.js","index.js"],"names":["logIn","payload","type","APP_URL_PATH","Login","useState","username","setUsername","password","setPassword","btnDisabled","setBtnDisabled","errorMessage","setErrorMessage","useCookies","cookies","setCookie","dispatch","useDispatch","history","useHistory","useEffect","fetch","method","credentials","then","result","json","succeed","console","log","catch","error","message","className","onSubmit","event","preventDefault","body","JSON","stringify","path","userData","htmlFor","onChange","target","value","id","placeholder","disabled","role","aria-hidden","onClick","push","Constants","required","allowEmpty","nameConstraint","presence","length","minimum","maximum","tooShort","tooLong","format","pattern","flags","signupConstraints","regCode","is","wrongLength","firstName","lastName","email","phone","cnp","shirtType","selector","shirtSize","confirmPassword","control","getInformation","input","i","parseInt","sex","year","month","day","bornDate","moment","now","duration","diff","age","Math","floor","asYears","calculatePasswordStrength","strength","match","classNames","require","validate","trimDecorator","trim","lowerCaseDecorator","toLowerCase","upperCaseDecorator","toUpperCase","capitalizeDecorator","slice","trimAllDecorator","replace","Card","prop","title","children","FormRow","FormGroup","mdSize","na","classes","ref","Input","label","state","setState","decorators","constraint","Fragment","rest","onBlur","validation","fullMessages","SelectInput","selectedIndex","selectedId","options","map","item","key","name","Registration","React","createRef","setRegCode","setFirstName","setLastName","setEmail","setPhone","setCnp","setShirtType","setShirtSize","setConfirmPassword","fields","order","validators","hashResult","Number","isNaN","isValid","isValidCNP","rules","minOrder","minKey","Object","entries","forEach","current","scrollIntoView","behavior","block","inputErrors","loadPersons","persons","restFetch","url","onSucces","errorSetter","removeCookie","Promise","resolve","status","authenticated","restFetch2","reject","StaffList","users","activePostId","searchValue","userId","useSelector","user","filter","postId","text","searched","normalize","search","data-toggle","aria-haspopup","aria-expanded","href","Staff","posts","staff","setActivePostId","selectedPerson","setSearchValue","removeModal","window","$","modal","removeClass","remove","onpopstate","loadPosts","style","width","post","btn","active","tabIndex","aria-labelledby","data-dismiss","aria-label","loadTeams","teams","ErrorPage","LoadingPage","Teams","contacts","pageError","setPageError","isLoading","setLoading","useRouteMatch","loadContacts","join","team","PlayerList","players","withBadge","withAge","player","rankId","Team","useParams","teamsData","teamData","color","city","renderTeamPage","DetailItem","Player","setPlayer","teamExtension","Players","loadPlayers","GameCard","game","reference","clickHandler","time","setTime","startTime","start","split","end","endTime","description","owner","loadAllGames","games","loadMyGames","setCurrentTab","currentTab","loadGame","loadScores","gameId","scores","getScrollPosition","element","useWindow","x","y","position","document","getBoundingClientRect","scrollX","scrollY","left","top","useScrollPosition","effect","deps","wait","useRef","throttleTimeout","callBack","currPos","prevPos","useLayoutEffect","handleScroll","setTimeout","addEventListener","removeEventListener","GameList","days","allGames","myGames","buttons","setButtons","uiGames","setUiGames","refs","setRefs","selectedDay","setSelectedDay","navRef","gameUrl","loadFunc","resultDays","loadDays","Date","resultGames","tmp","daySet","Set","getDate","selected","dayNum","num","toLocaleDateString","weekday","has","nana","tmpRefs","lastDay","currentDay","k","bottom","values","button","navParams","offset","scrollBy","handleDayClicked","TabHeader","click","e","data-target","Games","userPermissions","permissions","permAllGames","setPermAllGames","includes","tabClicked","tab","splitInput","date","convertToDateTime","t","UTC","balanceTimeZone","getTime","getTimezoneOffset","getTimeByDate","getLongByDate","ConfirmationDialog","confirmBtnText","btnHandler","btnType","data-backdrop","data-keyboard","Game","gameData","gamesData","contributors","setContributors","assignmentsModal","setAssignmentsModal","newOwner","setNewOwner","dialogLoading","setDialogLoading","dialogError","setDialogError","toggleCheckbox","delete","add","renderUserList","withCheckbox","ownerId","checked","renderModal","Array","from","res","messageg","notes","location","playerCount","assignments","contributor","background","fontSize","renderGamePage","area","gameConstraints","numericality","onlyInteger","strict","greaterThanOrEqualTo","lessThanOrEqualTo","rows","handleInputChange","handleBlur","setSelected","findValue","RangeInput","min","max","GameForm","edit","setTitle","setPlayerCount","setDescription","setNotes","setDay","selectedDayId","setSelectedDayId","setStartTime","setEndTime","setLocation","timeDisabled","setTimeDisabled","newDate","simplifyNonRequiredField","dateToSqlFormat","toISOString","validationObj","currentRules","data","t1","t2","ss","ee","saveGameClicked","Scores","uiScores","setUiScores","scoreCounter","setScoreCounter","currentTeamId","setCurrentTeamId","currentScore","setCurrentScore","currentFairplay","setCurrentFairplay","editing","setEditing","scoreSorter","a","b","x1","score","x2","mScores","scoreList","output","obj","teamId","fairplay","scoreData","sort","updateScore","scoreItem","autoComplete","ScoreTable","allScores","loadAllScores","scope","NavbarItem","to","Main","src","height","alt","aria-controls","exact","App","loggedIn","PublicRoute","PrivateRoute","render","loggedin","pathname","defaultState","userReducer","action","produce","draft","staffReducer","teamsReducer","eventReducer","rootReducer","combineReducers","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","StrictMode","CookiesProvider","getElementById"],"mappings":"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","file":"static/js/main.392df869.chunk.js","sourcesContent":["import {\n  actionLogIn, actionLogOut, actionLoadUserData, actionLoadPermissions,\n} from './actionTypes';\n\nexport const logIn = (payload) => ({ type: actionLogIn, payload });\nexport const logOut = () => ({ type: actionLogOut });\nexport const loadUserData = (payload) => ({ type: actionLoadUserData, payload });\nexport const loadPermissions = (payload) => ({ type: actionLoadPermissions, payload });\n","export const actionLogIn = 'LOG_IN';\r\nexport const actionLogOut = 'LOG_OUT';\r\nexport const actionLoadUserData = 'LOAD_USER_DATA';\r\nexport const actionLoadPermissions = 'LOAD_PERMISSIONS';\r\n\r\nexport const actionLoadPosts = 'LOAD_POSTS';\r\nexport const actionLoadPersons = 'LOAD_PERSONS';\r\n\r\nexport const actionLoadTeams = 'LOAD_TEAMS';\r\nexport const actionLoadContacts = 'LOAD_CONTACTS';\r\nexport const actionLoadTeam = 'LOAD_TEAM';\r\nexport const actionLoadPlayers = 'LOAD_PLAYERS';\r\n\r\nexport const actionLoadDays = 'LOAD_DAYS';\r\nexport const actionLoadAllGames = 'LOAD_ALL_GAMES';\r\nexport const actionLoadMyGames = 'LOAD_MY_GAMES';\r\nexport const actionSetCurrentGameTab = 'SET_CURRENT_GAME_TAB';\r\nexport const actionLoadGame = 'LOAD_GAME';\r\nexport const actionLoadScores = 'LOAD_SCORES';\r\nexport const actionLoadAllScores = 'LOAD_ALL_SCORES';\r\n","// export const APP_URL_PATH = '/';\r\n// export const SERVER_PATH = 'http://localhost/';\r\n\r\nexport const APP_URL_PATH = '/organizer/';\r\nexport const SERVER_PATH = '../';\r\n\r\nexport const PERM_TEAMS_DATA_ACCESS = 1;\r\nexport const PERM_ADD_GAME = 2;\r\nexport const PERM_ALL_GAME_ACCESS = 3;\r\nexport const PERM_SCORE_TABLE_ACCESS = 6;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { logIn } from '../actions/userActions';\r\nimport * as Constants from '../constants';\r\n\r\nconst Login = () => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [btnDisabled, setBtnDisabled] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  const [cookies, setCookie] = useCookies();\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    fetch(`${Constants.SERVER_PATH}api/userData`, {\r\n      method: 'GET',\r\n      credentials: 'include',\r\n    }).then((result) => result.json()).then((result) => {\r\n      if (result.succeed) {\r\n        console.log('Login succeed.');\r\n        dispatch(logIn(result.payload));\r\n      }\r\n    }).catch((error) => {\r\n      console.log(`Error: ${error.message}`);\r\n    });\r\n  }, [dispatch]);\r\n\r\n  const handleUsernameChange = (event) => {\r\n    setUsername(event.target.value);\r\n  };\r\n\r\n  const handlePasswordChange = (event) => {\r\n    setPassword(event.target.value);\r\n  };\r\n\r\n  const loginClicked = (event) => {\r\n    event.preventDefault();\r\n    console.log(`Username: ${username}\\nPassword: ${password}`);\r\n    console.log('Login clicked.');\r\n\r\n    setBtnDisabled(true);\r\n\r\n    fetch(`${Constants.SERVER_PATH}api/login`, {\r\n      method: 'POST',\r\n      credentials: 'include',\r\n      body: JSON.stringify({ username, password }),\r\n    }).then((result) => result.json()).then((result) => {\r\n      if (result.succeed) {\r\n        setCookie('loggedin', '1', { path: '/' });\r\n        console.log(cookies);\r\n        dispatch(logIn(result.userData));\r\n      } else {\r\n        console.log('Login failed.');\r\n        setErrorMessage(result.message);\r\n        setBtnDisabled(false);\r\n      }\r\n    }).catch((error) => {\r\n      console.log(`Error: ${error.message}`);\r\n      setBtnDisabled(false);\r\n      setErrorMessage('Network error.');\r\n    });\r\n  };\r\n\r\n  const registerClicked = () => {\r\n    history.push(`${Constants.APP_URL_PATH}registration`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container col-sm-4\">\r\n      <form onSubmit={loginClicked}>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"exampleInputEmail1\">Username</label>\r\n          <input onChange={handleUsernameChange} value={username} type=\"text\" className=\"form-control\" id=\"exampleInputEmail1\" placeholder=\"Username\" />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"exampleInputPassword1\">Password</label>\r\n          <input onChange={handlePasswordChange} value={password} type=\"password\" className=\"form-control\" id=\"exampleInputPassword1\" placeholder=\"Password\" />\r\n        </div>\r\n        <button type=\"submit\" className=\"btn btn-primary\" disabled={btnDisabled}>\r\n          {btnDisabled && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\" />}\r\n          Log In\r\n        </button>\r\n        <button onClick={registerClicked} type=\"button\" className=\"btn btn-link\">Sign Up</button>\r\n      </form>\r\n      {errorMessage && <div className=\"alert alert-danger mt-5\" role=\"alert\">{errorMessage}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","const required = { allowEmpty: false, message: 'This field is required.' };\r\nconst nameConstraint = {\r\n  presence: required,\r\n  length: {\r\n    minimum: 3,\r\n    maximum: 32,\r\n    tooShort: 'The name must be between 3 and 32 characters.',\r\n    tooLong: 'The name must be between 3 and 32 characters.',\r\n  },\r\n  format: {\r\n    pattern: '\\\\p{L}+',\r\n    flags: 'u',\r\n    message: 'The name must only contain alphabetical characters.',\r\n  },\r\n};\r\n\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const signupConstraints = {\r\n  regCode: {\r\n    presence: required,\r\n    length: {\r\n      is: 10,\r\n      wrongLength: 'Enter a valid registration code.',\r\n    },\r\n    format: {\r\n      pattern: '[A-Z|0-9]+',\r\n      message: 'Enter a valid registration code.',\r\n    },\r\n  },\r\n  firstName: nameConstraint,\r\n  lastName: nameConstraint,\r\n  email: {\r\n    presence: required,\r\n    email: {\r\n      message: 'Enter a valid email address.',\r\n    },\r\n  },\r\n  phone: {\r\n    presence: required,\r\n    length: {\r\n      is: 10,\r\n      wrongLength: 'Enter a valid phone number.',\r\n    },\r\n    format: {\r\n      pattern: '[0-9]+',\r\n      message: 'Enter a valid phone number.',\r\n    },\r\n  },\r\n  cnp: {\r\n    presence: required,\r\n    length: {\r\n      is: 13,\r\n      wrongLength: 'Enter a valid CNP.',\r\n    },\r\n    cnp: true,\r\n  },\r\n  shirtType: {\r\n    presence: required,\r\n    selector: true,\r\n  },\r\n  shirtSize: {\r\n    presence: required,\r\n    selector: true,\r\n  },\r\n  username: {\r\n    presence: required,\r\n    length: {\r\n      minimum: 3,\r\n      maximum: 25,\r\n      tooShort: 'The username must be between 4 and 32 characters.',\r\n      tooLong: 'The username must be between 4 and 32 characters.',\r\n    },\r\n    format: {\r\n      pattern: '[a-z|0-9|\\\\.|_]+',\r\n      message: 'The usernames must only contain lowercase alphanumeric characters.',\r\n    },\r\n  },\r\n  password: {\r\n    presence: required,\r\n    length: {\r\n      minimum: 8,\r\n      maximum: 128,\r\n      tooShort: 'The password must be between 8 and 128 characters.',\r\n      tooLong: 'The password must be between 8 and 128 characters.',\r\n    },\r\n    password: true,\r\n  },\r\n  confirmPassword: {\r\n    presence: required,\r\n    confirmPassword: true,\r\n  },\r\n};\r\n","import moment from 'moment';\r\n\r\nconst isNumber = (value) => !Number.isNaN(Number(value));\r\nconst control = [2, 7, 9, 1, 4, 6, 3, 5, 8, 2, 7, 9];\r\n\r\nexport const isValidCNP = (input) => {\r\n  let hashResult = 0;\r\n  const cnp = [];\r\n\r\n  if (input.length !== 13) {\r\n    return false;\r\n  }\r\n  for (let i = 0; i < 13; i += 1) {\r\n    cnp[i] = parseInt(input[i], 10);\r\n    if (!isNumber(cnp[i])) {\r\n      return false;\r\n    }\r\n    if (i < 12) {\r\n      hashResult += cnp[i] * control[i];\r\n    }\r\n  }\r\n  hashResult %= 11;\r\n  if (hashResult === 10) {\r\n    hashResult = 1;\r\n  }\r\n\r\n  let year = cnp[1] * 10 + cnp[2];\r\n  switch (cnp[0]) {\r\n    case 1: case 2:\r\n      year += 1900;\r\n      break;\r\n    case 3: case 4:\r\n      year += 1800;\r\n      break;\r\n    case 5: case 6:\r\n      year += 2000;\r\n      break;\r\n    default:\r\n      return false;\r\n  }\r\n\r\n  const month = cnp[3] * 10 + cnp[4];\r\n  const day = cnp[5] * 10 + cnp[6];\r\n  return cnp[12] === hashResult && moment(`${year}/${month}/${day}`, 'YYYY/M/D', true).isValid();\r\n};\r\n\r\nexport const getInformation = (input) => {\r\n  const cnp = [];\r\n  for (let i = 0; i < 13; i += 1) {\r\n    cnp[i] = parseInt(input[i], 10);\r\n  }\r\n\r\n  let year = cnp[1] * 10 + cnp[2];\r\n  switch (cnp[0]) {\r\n    case 1: case 2:\r\n      year += 1900;\r\n      break;\r\n    case 3: case 4:\r\n      year += 1800;\r\n      break;\r\n    case 5: case 6:\r\n      year += 2000;\r\n      break;\r\n    default:\r\n      return false;\r\n  }\r\n  let sex;\r\n  switch (cnp[0]) {\r\n    case 1: case 3: case 5:\r\n      sex = 'Male';\r\n      break;\r\n    default:\r\n      sex = 'Female';\r\n  }\r\n\r\n  const month = cnp[3] * 10 + cnp[4];\r\n  const day = cnp[5] * 10 + cnp[6];\r\n\r\n  const bornDate = moment(`${year}/${month}/${day}`, 'YYYY/M/D', true);\r\n  const now = moment();\r\n\r\n  const duration = moment.duration(now.diff(bornDate));\r\n  const age = Math.floor(duration.asYears());\r\n\r\n  return ({ bornDate: bornDate.format('YYYY-MMM-DD'), age, sex });\r\n};\r\n","const calculatePasswordStrength = (value) => {\r\n  console.log(`Pwd check with value: ${value}`);\r\n  console.log(value);\r\n  let strength = 0;\r\n  if (value.match(/[\\p{Ll}]+/u)) {\r\n    strength += 1;\r\n  }\r\n  if (value.match(/\\p{Lu}/u)) {\r\n    strength += 1;\r\n  }\r\n  if (value.match(/[0-9]/)) {\r\n    strength += 1;\r\n  }\r\n  if (value.match(/[`~!@#$%^&*()\\-_=+{}[\\]\\\\|;:'\",<.>/?]+/)) {\r\n    strength += 1;\r\n  }\r\n  return strength;\r\n};\r\n\r\nexport default calculatePasswordStrength;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { signupConstraints as rules } from '../constraints/signupConstraints';\r\nimport { isValidCNP } from '../utils/cnp';\r\nimport calculatePasswordStrength from '../utils/password';\r\nimport * as Constants from '../constants';\r\n\r\nconst  classNames = require('classnames');\r\nconst validate = require('validate.js');\r\n\r\nconst trimDecorator = (value) => value.trim();\r\nconst lowerCaseDecorator = (value) => value.toLowerCase();\r\nconst upperCaseDecorator = (value) => value.toUpperCase();\r\nconst capitalizeDecorator = (value) => (\r\n  value ? value[0].toUpperCase() + value.slice(1).toLowerCase() : value\r\n);\r\nconst trimAllDecorator = (value) => value.replace(/\\s/g, '');\r\n\r\n// eslint-disable-next-line max-lines-per-function\r\nconst Registration = () => {\r\n  const [regCode, setRegCode] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [firstName, setFirstName] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [lastName, setLastName] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [email, setEmail] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [phone, setPhone] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [cnp, setCnp] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [shirtType, setShirtType] = useState({\r\n    selectedId: 0, error: '', options: [], ref: React.createRef(),\r\n  });\r\n  const [shirtSize, setShirtSize] = useState({\r\n    selectedId: 0, error: '', options: [], ref: React.createRef(),\r\n  });\r\n  const [username, setUsername] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [password, setPassword] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [confirmPassword, setConfirmPassword] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [btnDisabled, setBtnDisabled] = useState(false);\r\n  const history = useHistory();\r\n\r\n  const fields = {\r\n    regCode: { state: regCode, setState: setRegCode, order: 1 },\r\n    firstName: { state: firstName, setState: setFirstName, order: 2 },\r\n    lastName: { state: lastName, setState: setLastName, order: 3 },\r\n    email: { state: email, setState: setEmail, order: 4 },\r\n    phone: { state: phone, setState: setPhone, order: 5 },\r\n    cnp: { state: cnp, setState: setCnp, order: 6 },\r\n    shirtType: { state: shirtType, setState: setShirtType, order: 7 },\r\n    shirtSize: { state: shirtSize, setState: setShirtSize, order: 8 },\r\n    username: { state: username, setState: setUsername, order: 9 },\r\n    password: { state: password, setState: setPassword, order: 10 },\r\n    confirmPassword: { state: confirmPassword, setState: setConfirmPassword, order: 11 },\r\n  };\r\n\r\n  validate.validators.cnp = (value) => {\r\n    if (!isValidCNP(value)) {\r\n      return 'Enter a valid CNP.';\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  validate.validators.password = (value) => {\r\n    if (calculatePasswordStrength(value) < 2) {\r\n      return 'The password must contain at least two character categories among the following: uppercase characters, lowercase characters, digits, special characters.';\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  validate.validators.confirmPassword = (value) => {\r\n    if (value !== password.value) {\r\n      return 'Password doesn\\'t match.';\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  validate.validators.selector = (value) => {\r\n    if (!value) {\r\n      return 'This field is required.';\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  const signUpClicked = (event) => {\r\n    event.preventDefault();\r\n    const validation = validate({\r\n      regCode: regCode.value,\r\n      firstName: firstName.value,\r\n      lastName: lastName.value,\r\n      email: email.value,\r\n      phone: phone.value,\r\n      cnp: cnp.value,\r\n      shirtType: shirtType.selectedId,\r\n      shirtSize: shirtSize.selectedId,\r\n      username: username.value,\r\n      password: password.value,\r\n      confirmPassword: confirmPassword.value,\r\n    }, rules, { fullMessages: false });\r\n\r\n    if (validation) {\r\n      let minOrder = 999,\r\n        minKey = '';\r\n      Object.entries(validation)\r\n        .forEach(([key, value]) => {\r\n          if (fields[key].order < minOrder) {\r\n            minOrder = fields[key].order;\r\n            minKey = key;\r\n          }\r\n          fields[key].setState((rest) => ({ ...rest, error: value[0] }));\r\n        });\r\n      fields[minKey].state.ref.current.scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: 'start',\r\n      });\r\n    } else {\r\n      setBtnDisabled(true);\r\n      fetch(`${Constants.SERVER_PATH}api/signup`, {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        body: JSON.stringify({\r\n          regCode: regCode.value,\r\n          firstName: firstName.value,\r\n          lastName: lastName.value,\r\n          email: email.value,\r\n          phone: phone.value,\r\n          cnp: cnp.value,\r\n          shirtType: shirtType.selectedId,\r\n          shirtSize: shirtSize.selectedId,\r\n          username: username.value,\r\n          password: password.value,\r\n        }),\r\n      }).then((result) => result.json()).then((result) => {\r\n        if (result.succeed) {\r\n          console.log('WIN');\r\n          // TODO valami zoldet a loginra\r\n          history.push(`${Constants.APP_URL_PATH}login`);\r\n        } else {\r\n          setBtnDisabled(false);\r\n          if (result.message) {\r\n            console.log(result.message);\r\n            // TODO hibauzenet\r\n          } else {\r\n            let minOrder = 999,\r\n              minKey = '';\r\n            Object.entries(result.inputErrors)\r\n              .forEach(([key, value]) => {\r\n                if (fields[key].order < minOrder) {\r\n                  minOrder = fields[key].order;\r\n                  minKey = key;\r\n                }\r\n                fields[key].setState((rest) => ({ ...rest, error: value }));\r\n              });\r\n            fields[minKey].state.ref.current.scrollIntoView({\r\n              behavior: 'smooth',\r\n              block: 'start',\r\n            });\r\n          }\r\n        }\r\n      }).catch((error) => {\r\n        setBtnDisabled(false);\r\n        console.log(`Error: ${error.message}`);\r\n        // TODO netw error\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetch(`${Constants.SERVER_PATH}api/shirtTypes`, {\r\n      method: 'GET',\r\n      credentials: 'include',\r\n    }).then((result) => result.json()).then((result) => {\r\n      if (result.succeed) {\r\n        setShirtType((state) => ({ ...state, options: result.payload }));\r\n      } else {\r\n        // TODO ha nem tudjuk betolteni\r\n      }\r\n    });\r\n    fetch(`${Constants.SERVER_PATH}api/shirtSizes`, {\r\n      method: 'GET',\r\n      credentials: 'include',\r\n    }).then((result) => result.json()).then((result) => {\r\n      if (result.succeed) {\r\n        setShirtSize((state) => ({ ...state, options: result.payload }));\r\n      } else {\r\n        // TODO ha nem tudjuk betolteni\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const loginClicked = () => {\r\n    history.push(`${Constants.APP_URL_PATH}login`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center\">\r\n      <form onSubmit={signUpClicked}>\r\n        <Card title=\"Validation\">\r\n          <FormGroup na={regCode.ref}>\r\n            <Input type=\"text\" id=\"inputRegistrationCode\" label=\"Registration code\" state={regCode} setState={setRegCode} constraint={{ value: rules.regCode }} decorators={\r\n              [trimDecorator, upperCaseDecorator]} />\r\n          </FormGroup>\r\n        </Card>\r\n        <Card title=\"Personal data\">\r\n          <FormRow>\r\n            <FormGroup mdSize=\"6\" na={firstName.ref}>\r\n              <Input type=\"text\" id=\"inputFirstName\" label=\"First name\" state={firstName} setState={setFirstName} constraint={{ value: rules.firstName }} decorators={\r\n                [trimDecorator, capitalizeDecorator]} />\r\n            </FormGroup>\r\n            <FormGroup mdSize=\"6\" na={lastName.ref}>\r\n              <Input type=\"text\" id=\"inputLastName\" label=\"Last name\" state={lastName} setState={setLastName} constraint={{ value: rules.lastName }} decorators={\r\n                [trimDecorator, capitalizeDecorator]} />\r\n            </FormGroup>\r\n          </FormRow>\r\n          <FormRow>\r\n            <FormGroup mdSize=\"6\" na={email.ref}>\r\n              <Input type=\"text\" id=\"inputEmail\" label=\"Email\" state={email} setState={setEmail} constraint={{ value: rules.email }} decorators={\r\n                [trimDecorator, lowerCaseDecorator]} />\r\n            </FormGroup>\r\n            <FormGroup mdSize=\"6\" na={phone.ref}>\r\n              <Input type=\"text\" id=\"inputPhone\" label=\"Phone\" state={phone} setState={setPhone} constraint={{ value: rules.phone }} decorators={[trimAllDecorator]} />\r\n            </FormGroup>\r\n          </FormRow>\r\n          <FormGroup na={cnp.ref}>\r\n            <Input type=\"text\" id=\"inputCNP\" label=\"CNP\" state={cnp} setState={setCnp} constraint={{ value: rules.cnp }} decorators={[trimDecorator]} />\r\n          </FormGroup>\r\n          <FormRow>\r\n            <FormGroup mdSize=\"6\">\r\n              <SelectInput id=\"inputShirtType\" label=\"Shirt type\" state={shirtType} setState={setShirtType} constraint={{ value: rules.shirtType }} />\r\n            </FormGroup>\r\n            <FormGroup mdSize=\"6\">\r\n              <SelectInput id=\"inputShirtSize\" label=\"Shirt size\" state={shirtSize} setState={setShirtSize} constraint={{ value: rules.shirtSize }} />\r\n            </FormGroup>\r\n          </FormRow>\r\n        </Card>\r\n        <Card title=\"User data\">\r\n          <FormGroup na={username.ref}>\r\n            <Input type=\"text\" id=\"inputUsername\" label=\"Username\" state={username} setState={setUsername} constraint={{ value: rules.username }} decorators={[trimDecorator, lowerCaseDecorator]} />\r\n          </FormGroup>\r\n          <FormRow>\r\n            <FormGroup mdSize=\"6\" na={password.ref}>\r\n              <Input type=\"password\" id=\"inputPassword\" label=\"Password\" state={password} setState={setPassword} constraint={{ value: rules.password }} />\r\n            </FormGroup>\r\n            <FormGroup mdSize=\"6\" na={confirmPassword.ref}>\r\n              <Input type=\"password\" id=\"inputConfirmPassword\" label=\"Confirm password\" state={confirmPassword} setState={setConfirmPassword} constraint={{ value: rules.confirmPassword }} />\r\n            </FormGroup>\r\n          </FormRow>\r\n        </Card>\r\n        <Card title=\"Submit\">\r\n          <button type=\"submit\" className=\"btn btn-primary\" disabled={btnDisabled}>\r\n            {btnDisabled && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\" />}\r\n            Sign Up\r\n          </button>\r\n          <button onClick={loginClicked} type=\"button\" className=\"btn btn-outline-secondary ml-2\">Back to log in</button>\r\n        </Card>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Card = (prop) => (\r\n    <div className=\"card border-dark my-2 mx-3\">\r\n      <div className=\"card-body\">\r\n        <h4>{prop.title}</h4>\r\n        {prop.children}\r\n      </div>\r\n    </div>\r\n);\r\n\r\nconst FormRow = (prop) => (\r\n    <div className=\"form-row\">\r\n      {prop.children}\r\n    </div>\r\n);\r\n\r\nconst FormGroup = (prop) => {\r\n  const { children, mdSize, na } = prop;\r\n  const classes = classNames({\r\n    'form-group': true,\r\n    [`col-md-${mdSize}`]: mdSize,\r\n  });\r\n  return (\r\n    <div ref={na} className={classes}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Input = (prop) => {\r\n  const {\r\n    type, id, label, state, setState, decorators, constraint,\r\n  } = prop;\r\n\r\n  const handleInputChange = (event) => {\r\n    const { value } = event.target;\r\n    setState((rest) => ({ ...rest, value, error: '' }));\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    let { value } = state;\r\n    if (decorators) {\r\n      for (let i = 0; i < decorators.length; i += 1) {\r\n        value = decorators[i](value);\r\n      }\r\n      setState((rest) => ({ ...rest, value }));\r\n    }\r\n    const validation = validate({ value }, constraint, { fullMessages: false });\r\n    if (validation) {\r\n      setState((rest) => ({ ...rest, error: validation.value[0] }));\r\n    }\r\n  };\r\n\r\n  const classes = classNames({\r\n    'form-control': true,\r\n    'is-invalid': state.error,\r\n  });\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <label htmlFor={id}>{label}</label>\r\n      <input onChange={handleInputChange} onBlur={handleBlur} type={type}\r\n             className={classes} id={id} placeholder={label} value={state.value} />\r\n      {state.error && <div className=\"invalid-feedback\">{state.error}</div>}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nconst SelectInput = (prop) => {\r\n  const {\r\n    id, label, state, setState, constraint,\r\n  } = prop;\r\n\r\n  const handleInputChange = (event) => {\r\n    const { selectedIndex } = event.target;\r\n    const selectedId = event.target[selectedIndex].id;\r\n    setState((rest) => ({ ...rest, selectedId, error: '' }));\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    const { selectedId } = state;\r\n    const validation = validate({ value: selectedId }, constraint, { fullMessages: false });\r\n    if (validation) {\r\n      setState((rest) => ({ ...rest, error: validation.value[0] }));\r\n    }\r\n  };\r\n\r\n  const classes = classNames({\r\n    'custom-select': true,\r\n    'is-invalid': state.error,\r\n  });\r\n\r\n  return (\r\n    <React.Fragment>\r\n    <label htmlFor={id}>{label}</label>\r\n    <select onChange={handleInputChange} onBlur={handleBlur}\r\n            id={id} className={classes} >\r\n      <option />\r\n      {state.options.map((item) => <option key={item.id} id={item.id}>{item.name}</option>)}\r\n    </select>\r\n      {state.error && <div className=\"invalid-feedback\">{state.error}</div>}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Registration;\r\n","import { actionLoadPosts, actionLoadPersons } from './actionTypes';\r\n\r\nexport const loadPosts = (posts) => ({ type: actionLoadPosts, payload: posts });\r\nexport const loadPersons = (persons) => ({ type: actionLoadPersons, payload: persons });\r\n","import { logOut } from '../actions/userActions';\r\n\r\nexport const restFetch = (url, onSucces, errorSetter, dispatch, removeCookie) => new Promise((resolve) => {\r\n  const payload = {};\r\n  fetch(url, {\r\n    method: 'GET',\r\n    credentials: 'include',\r\n  }).then((result) => {\r\n    payload.status = result.status;\r\n    return result.json();\r\n  }).then((result) => {\r\n    if (result.succeed) {\r\n      errorSetter({});\r\n      onSucces(result.payload);\r\n      resolve();\r\n    } else if (!result.authenticated) {\r\n      removeCookie('loggedin', { path: '/' });\r\n      dispatch(logOut());\r\n      resolve();\r\n    } else {\r\n      payload.message = result.message;\r\n      console.log(payload);\r\n      errorSetter(payload);\r\n      resolve();\r\n    }\r\n  }).catch((error) => {\r\n    errorSetter({ message: 'Failed to connect to the server.' });\r\n    console.log(`Error: ${error.message}`);\r\n    resolve();\r\n  });\r\n});\r\n\r\nexport const restFetch2 = (url, dispatch, removeCookie) => new Promise(\r\n  (resolve, reject) => {\r\n    const payload = {};\r\n    fetch(url, {\r\n      method: 'GET',\r\n      credentials: 'include',\r\n    }).then((result) => {\r\n      payload.status = result.status;\r\n      return result.json();\r\n    }).then((result) => {\r\n      if (result.succeed) {\r\n      // errorSetter({});\r\n        // onSucces(result.payload);\r\n        resolve(result.payload);\r\n      } else if (!result.authenticated) {\r\n        removeCookie('loggedin', { path: '/' });\r\n        dispatch(logOut());\r\n        payload.message = 'Unauthenticated.';\r\n        reject(payload);\r\n      } else {\r\n        payload.message = result.message;\r\n        console.log(payload);\r\n        // errorSetter(payload);\r\n        // onError(payload);\r\n        reject(payload);\r\n      }\r\n    }).catch((error) => {\r\n    // errorSetter({ message: 'Failed to connect to the server.' });\r\n      console.log(`Error: ${error.message}`);\r\n      payload.message = 'Failed to connect to the server.';\r\n      reject(payload);\r\n    });\r\n  },\r\n);\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport * as Constants from '../../constants';\r\nimport {useSelector} from 'react-redux';\r\n\r\nconst searchInString = (text, searched) => text.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase().search(searched.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase()) >= 0;\r\n\r\nconst StaffList = (input) => {\r\n  const { users, activePostId, searchValue } = input;\r\n  const userId = useSelector((state) => state.user.userData.id);\r\n  const history = useHistory();\r\n  if (users.length > 0) {\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"list-group mt-4 mx-2\">\r\n          {users\r\n            .filter((user) => user.postId === activePostId)\r\n            .filter((user) => !searchValue || searchInString(`${user.lastName} ${user.firstName}`, searchValue))\r\n            .filter((user) => user.id !== userId)\r\n            .map(\r\n              (user) => (\r\n                <div key={user.id} className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center\" >\r\n                  <span>\r\n                    <button onClick={() => history.push(`${Constants.APP_URL_PATH}players/${user.id}`)} className=\"btn btn-link m-0 p-0\">\r\n                      {user.lastName} {user.firstName}\r\n                    </button>\r\n                  </span>\r\n                  <span>\r\n                    <button type=\"button\" className=\"btn btn-sm btn-outline-success dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                        Contact\r\n                      </button>\r\n                      <div className=\"dropdown-menu\">\r\n                        <a className=\"dropdown-item\" href={`tel:${user.phone}`}>Call</a>\r\n                        <a className=\"dropdown-item\" href={`sms:${user.phone}`}>SMS</a>\r\n                        <div className=\"dropdown-divider\" />\r\n                        <a className=\"dropdown-item\" href={`mailto:${user.email}`}>Email</a>\r\n                      </div>\r\n                    </span>\r\n                </div>\r\n              ),\r\n            )}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n  return <p>Nothing to show.</p>;\r\n};\r\n\r\nexport default StaffList;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport * as Constants from '../../constants';\r\nimport { loadPosts, loadPersons } from '../../actions/staffActions';\r\nimport { restFetch2 } from '../../utils/communication';\r\nimport StaffList from './staff_list.jsx';\r\n\r\nconst classNames = require('classnames');\r\n\r\nconst Staff = () => {\r\n  const posts = useSelector((state) => state.staff.posts);\r\n  const persons = useSelector((state) => state.staff.persons);\r\n  const [activePostId, setActivePostId] = useState(0);\r\n  const [selectedPerson, setSelectedPerson] = useState({});\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const dispatch = useDispatch();\r\n\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  useEffect(() => {\r\n    const removeModal = () => {\r\n      window.$('#exampleModal').modal('hide');\r\n      window.$('body').removeClass('modal-open');\r\n      window.$('.modal-backdrop').remove();\r\n    };\r\n    window.onpopstate = removeModal;\r\n    return () => {\r\n      removeModal();\r\n      window.onpopstate = () => {};\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    restFetch2(`${Constants.SERVER_PATH}api/posts`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadPosts(result));\r\n      if (result.length > 0) {\r\n        setActivePostId(result[0].id);\r\n      }\r\n    }).then(() => restFetch2(`${Constants.SERVER_PATH}api/users`, dispatch, removeCookie)).then((result) => {\r\n      dispatch(loadPersons(result));\r\n    })\r\n      .catch((error) => {\r\n        // TODO ide is majd valamilyen pageError kell\r\n        console.log(`Error: ${error.message}`);\r\n      });\r\n  }, [dispatch, removeCookie]);\r\n\r\n  const postClicked = (postId) => {\r\n    setActivePostId(postId);\r\n  };\r\n\r\n  const personClicked = (person) => {\r\n    setSelectedPerson(person);\r\n  };\r\n\r\n  const handleSearchValueChanged = (event) => {\r\n    setSearchValue(event.target.value);\r\n  };\r\n\r\n  const searchInString = (text, searched) => text.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase().search(searched.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase()) >= 0;\r\n\r\n  return (\r\n      <div className=\"d-flex justify-content-center mt-4\">\r\n        <div style={{ width: 500 }}>\r\n          <h1 className=\"text-center display-4\">Staff</h1>\r\n          <div className=\"form-group mx-2 mt-4\">\r\n            <input onChange={handleSearchValueChanged} className=\"form-control\" type=\"text\" placeholder=\"Search\" value={searchValue}/>\r\n          </div>\r\n          <div className=\"list-group list-group-horizontal mx-2 mt-2\" id=\"list-tab\" role=\"tablist\">\r\n            {posts.map((post) => {\r\n              const classes = classNames({\r\n                btn: true,\r\n                'shadow-none': true,\r\n                'rounded-0': true,\r\n                'list-group-item': true,\r\n                active: activePostId === post.id,\r\n                'flex-fill': true,\r\n              });\r\n              return (\r\n                <button key={post.id} onClick={() => postClicked(post.id)} className={classes}>\r\n                  {post.name}\r\n                </button>\r\n              );\r\n            })}\r\n            </div>\r\n            <StaffList users={persons} activePostId={activePostId} searchValue={searchValue} />\r\n        </div>\r\n        <div className=\"modal fade\" id=\"exampleModal\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h4>{selectedPerson.lastName} {selectedPerson.firstName}</h4>\r\n                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n              <div className=\"modal-body\">\r\n                <a href={`tel:${selectedPerson.phone}`} className=\"btn btn-lg btn-outline-primary\">Call</a>\r\n                <a href={`sms:${selectedPerson.phone}`} className=\"btn btn-lg btn-outline-primary ml-2\">SMS</a>\r\n                <a href={`mailto:${selectedPerson.email}`} className=\"btn btn-lg btn-outline-primary ml-2\">E-mail</a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default Staff;\r\n","import {\n  actionLoadTeams, actionLoadContacts, actionLoadTeam, actionLoadPlayers,\n} from './actionTypes';\n\nexport const loadTeams = (teams) => ({ type: actionLoadTeams, payload: teams });\nexport const loadContacts = (contacts) => ({ type: actionLoadContacts, payload: contacts });\nexport const loadTeam = (team) => ({ type: actionLoadTeam, payload: team });\nexport const loadPlayers = (players) => ({ type: actionLoadPlayers, payload: players });\n","import React from 'react';\r\n\r\nconst ErrorPage = (input) => {\r\n  const { status, message } = input;\r\n  return (\r\n    <div className=\"d-flex justify-content-center mt-4\">\r\n      <div>\r\n      <h1 className=\"text-center text-danger display-4\">ERROR{status && ` ${status}`}</h1>\r\n      <h4 className=\"text-center text-danger\">{message}</h4>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorPage;\r\n","import React from 'react';\r\n\r\nconst LoadingPage = () => (\r\n    <div className=\"d-flex justify-content-center mt-4\">\r\n      <div className=\"spinner-border text-primary\" role=\"status\">\r\n        <span className=\"sr-only\">Loading...</span>\r\n      </div>\r\n    </div>\r\n);\r\n\r\nexport default LoadingPage;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { useHistory, useRouteMatch } from 'react-router-dom';\r\nimport * as Constants from '../../constants';\r\nimport { loadContacts, loadTeams } from '../../actions/teamsActions';\r\nimport { restFetch } from '../../utils/communication';\r\nimport ErrorPage from '../error_page.jsx';\r\nimport LoadingPage from '../loading_page.jsx';\r\n\r\nconst Teams = () => {\r\n  const teams = useSelector((state) => state.teams.teams);\r\n  const contacts = useSelector((state) => state.teams.contacts);\r\n  const dispatch = useDispatch();\r\n\r\n  const [pageError, setPageError] = useState({});\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  const history = useHistory();\r\n  const { path } = useRouteMatch();\r\n\r\n  useEffect(() => {\r\n    if (teams.length === 0) {\r\n      console.log('Loading on');\r\n      setLoading(true);\r\n    }\r\n    restFetch(`${Constants.SERVER_PATH}api/teams`, (payload) => {\r\n      dispatch(loadTeams(payload));\r\n    }, setPageError, dispatch, removeCookie).then(() => restFetch(`${Constants.SERVER_PATH}api/leaderContacts`, (payload) => {\r\n      dispatch(loadContacts(payload));\r\n    }, setPageError, dispatch, removeCookie).then(() => {\r\n      setLoading(false);\r\n    }));\r\n  }, [dispatch, removeCookie, teams.length]);\r\n\r\n  if (pageError.message) {\r\n    return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n  }\r\n\r\n  if (isLoading) {\r\n    return <LoadingPage />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center mt-4\">\r\n      <div style={{ width: 500 }}>\r\n        <h1 className=\"text-center display-4 \">Teams</h1>\r\n        <div className=\"d-flex justify-content-center mt-4\">\r\n          <a className=\"btn btn-outline-primary ml-2\"\r\n             href={`mailto:${contacts.email ? contacts.email.join(',') : ''}`}>Email to all leaders</a>\r\n          <a className=\"btn btn-outline-primary ml-2\"\r\n             href={`sms:${contacts.email ? contacts.phone.join(',') : ''}`}>SMS\r\n            to all leaders</a>\r\n        </div>\r\n        <div className=\"list-group mt-4 mx-2\">\r\n          {teams.map((team) => (\r\n            <div key={team.id} className=\"list-group-item list-group-item-action\">\r\n              <button onClick={() => history.push(`${path}/${team.id}`)} type=\"button\"\r\n                      className=\"btn btn-link m-0 p-0 stretched-link\">\r\n                {team.name}\r\n              </button>\r\n            </div>))\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Teams;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { getInformation } from '../../utils/cnp';\r\nimport * as Constants from '../../constants';\r\n\r\nconst searchInString = (text, searched) => text.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase().search(searched.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase()) >= 0;\r\n\r\nconst PlayerList = (input) => {\r\n  const {\r\n    players, searchValue, withBadge, withAge,\r\n  } = input;\r\n  const history = useHistory();\r\n  if (players.length > 0) {\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"list-group mt-4 mx-2\">\r\n          {players\r\n            .filter((player) => !searchValue || searchInString(`${player.lastName} ${player.firstName}`, searchValue))\r\n            .map(\r\n              (player) => {\r\n                const cnp = getInformation(player.cnp);\r\n                return (\r\n                  <div key={player.id} className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center\" >\r\n                    <span>\r\n                      <button onClick={() => history.push(`${Constants.APP_URL_PATH}players/${player.id}`)} className=\"btn btn-link m-0 p-0\">\r\n                        {player.lastName} {player.firstName}\r\n                      </button>\r\n                      {(withBadge && player.rankId > 0) && <span className=\"badge badge-info ml-2\">{player.rankId === 2 ? 'Leader' : 'Vice leader' }</span>}\r\n                    </span>\r\n                    <span>\r\n                        {withAge && <span className={`badge badge-pill badge-${cnp.age >= 18 ? 'success' : 'warning'} mr-2`}>{cnp.age}</span>}\r\n                        <button type=\"button\" className=\"btn btn-sm btn-outline-success dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                          Contact\r\n                        </button>\r\n                        <div className=\"dropdown-menu\">\r\n                          <a className=\"dropdown-item\" href={`tel:${player.phone}`}>Call</a>\r\n                          <a className=\"dropdown-item\" href={`sms:${player.phone}`}>SMS</a>\r\n                          {player.email && (\r\n                            <React.Fragment>\r\n                              <div className=\"dropdown-divider\" />\r\n                              <a className=\"dropdown-item\" href={`mailto:${player.email}`}>Email</a>\r\n                            </React.Fragment>\r\n                          )}\r\n                        </div>\r\n                      </span>\r\n                  </div>\r\n                );\r\n              },\r\n            )}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n  return <p>Nothing to show.</p>;\r\n};\r\n\r\nexport default PlayerList;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport * as Constants from '../../constants';\r\nimport { loadTeam } from '../../actions/teamsActions';\r\nimport PlayerList from '../players/player_list.jsx';\r\nimport { restFetch } from '../../utils/communication';\r\nimport ErrorPage from '../error_page.jsx';\r\nimport LoadingPage from '../loading_page.jsx';\r\n\r\nconst Team = () => {\r\n  const { id } = useParams();\r\n  const teamsData = useSelector((state) => state.teams.teamsData);\r\n  const dispatch = useDispatch();\r\n  const [pageError, setPageError] = useState({});\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  useEffect(() => {\r\n    if (!teamsData[id]) {\r\n      setLoading(true);\r\n    }\r\n    restFetch(`${Constants.SERVER_PATH}api/teams/${id}`, (payload) => {\r\n      dispatch(loadTeam(payload));\r\n    }, setPageError, dispatch, removeCookie).then(() => {\r\n      setLoading(false);\r\n    });\r\n  }, [dispatch, id, removeCookie]);\r\n\r\n  const renderTeamPage = () => {\r\n    const teamData = teamsData[id];\r\n    const { players } = teamData;\r\n    return (\r\n      <div className=\"d-flex justify-content-center mt-4\">\r\n        <div style={{ width: 500 }}>\r\n          <h2 className=\"text-center\" style={{ color: '#ffbc01' }}>{teamData.team.name}</h2>\r\n          <h6 className=\"text-center text-secondary\">{teamData.team.city}</h6>\r\n          <div className=\"d-flex justify-content-center mt-4\">\r\n            <a className=\"btn btn-outline-primary ml-2\" href={`mailto:${players ? players\r\n              .filter((player) => player.rankId > 0)\r\n              .map((player) => player.email).join(',') : ''}`}>Email to leaders</a>\r\n            <a className=\"btn btn-outline-primary ml-2\" href={`sms:${players ? players\r\n              .filter((player) => player.rankId > 0)\r\n              .map((player) => player.phone).join(',') : ''}`}>SMS to leaders</a>\r\n          </div>\r\n          <PlayerList players={players} withBadge={true} withAge={true}/>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n  if (pageError.message) {\r\n    return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n  }\r\n  if (isLoading || !teamsData[id]) {\r\n    return <LoadingPage />;\r\n  }\r\n  return renderTeamPage();\r\n};\r\n\r\nexport default Team;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { getInformation } from '../../utils/cnp';\r\nimport * as Constants from '../../constants';\r\nimport { restFetch } from '../../utils/communication';\r\nimport ErrorPage from '../error_page.jsx';\r\n\r\nconst Player = () => {\r\n  const { id } = useParams();\r\n  const [player, setPlayer] = useState({});\r\n  const [pageError, setPageError] = useState({});\r\n\r\n  const dispatch = useDispatch();\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  useEffect(() => {\r\n    restFetch(`${Constants.SERVER_PATH}api/players/${id}`, (payload) => {\r\n      setPlayer(payload);\r\n    }, setPageError, dispatch, removeCookie);\r\n  }, [dispatch, id, removeCookie]);\r\n\r\n  if (!pageError.message) {\r\n    if (player.id) {\r\n      const cnp = getInformation(player.cnp);\r\n      let teamExtension = '';\r\n      if (player.rankId === 1) {\r\n        teamExtension = ' (Vice leader)';\r\n      }\r\n      if (player.rankId === 2) {\r\n        teamExtension = ' (Leader)';\r\n      }\r\n      return (\r\n        <React.Fragment>\r\n          <div className=\"d-flex justify-content-center mt-4\">\r\n            <div style={{ width: 500 }}>\r\n              <h2 className=\"text-center\" style={{ color: '#ffbc01' }}>{player.lastName} {player.firstName}</h2>\r\n              <h5 className=\"text-center text-secondary\">{player.team}{teamExtension}</h5>\r\n              <div className=\"list-group mt-4 mx-2\">\r\n                <DetailItem label=\"Born date:\" value={cnp.bornDate}/>\r\n                <DetailItem label=\"Age:\" value={cnp.age}/>\r\n                <DetailItem label=\"Sex:\" value={cnp.sex}/>\r\n                <DetailItem label=\"Phone:\" value={player.phone}/>\r\n                {player.email && <DetailItem label=\"Email:\" value={player.email}/>}\r\n                <DetailItem label=\"CNP:\" value={player.cnp}/>\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n        </React.Fragment>\r\n      );\r\n    }\r\n    return <h1>Loading</h1>;\r\n  }\r\n  return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n};\r\n\r\nconst DetailItem = (input) => (\r\n    <div className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center\">\r\n      <p className=\"p-0 m-0\">{input.label}</p>\r\n      <p className=\"p-0 m-0\">{input.value}</p>\r\n    </div>\r\n);\r\n\r\nexport default Player;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport * as Constants from '../../constants';\r\nimport { loadPlayers } from '../../actions/teamsActions';\r\nimport PlayerList from './player_list.jsx';\r\nimport { restFetch2 } from '../../utils/communication';\r\nimport ErrorPage from '../error_page.jsx';\r\n\r\nconst Players = () => {\r\n  const players = useSelector((state) => state.teams.players);\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const [pageError, setPageError] = useState({});\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  useEffect(() => {\r\n    restFetch2(`${Constants.SERVER_PATH}api/players`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadPlayers(result));\r\n    }).catch((error) => {\r\n      setPageError(error);\r\n    });\r\n  }, [dispatch, removeCookie]);\r\n\r\n  const handleSearchValueChanged = (event) => {\r\n    setSearchValue(event.target.value);\r\n  };\r\n\r\n  if (!pageError.message) {\r\n    return (\r\n      <div className=\"d-flex justify-content-center mt-4\">\r\n        <div style={{ width: 500 }}>\r\n          <h1 className=\"text-center display-4\">Players</h1>\r\n          <div className=\"form-group mx-2 mt-4\">\r\n            <input onChange={handleSearchValueChanged} className=\"form-control\" type=\"text\" placeholder=\"Search\"\r\n                   value={searchValue}/>\r\n          </div>\r\n          <PlayerList\r\n            players={players} withBadge={false} searchValue={searchValue} withAge={true} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n};\r\n\r\nexport default Players;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nconst GameCard = (input) => {\r\n  const { game, reference, clickHandler } = input;\r\n  const [time, setTime] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (game.startTime) {\r\n      const start = game.startTime.split(/[- :]/);\r\n      const end = game.endTime.split(/[- :]/);\r\n      setTime(`${start[3]}:${start[4]} - ${end[3]}:${end[4]}`);\r\n    } else {\r\n      setTime('No time set.');\r\n    }\r\n  }, [game.startTime, game.endTime]);\r\n\r\n  return (\r\n    <div onClick={clickHandler} ref={reference} className=\"card shadow-sm mt-2 clickable\">\r\n      <div className=\"card-header bg-transparent py-1\">{time}</div>\r\n        <div className=\"card-body pb-0\">\r\n          <h5 className=\"card-title\">{game.name}</h5>\r\n          <p className=\"card-text\">{game.description}</p>\r\n          <p className=\"card-text mb-2\">\r\n            <small className=\"text-muted\">\r\n              {game.owner.lastName} {game.owner.firstName}\r\n            </small>\r\n          </p>\r\n\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// TODO az a nem ugy mukodik mint a link/history FONTOSSS\r\n\r\nexport default GameCard;\r\n","import {\n  actionLoadDays, actionLoadAllGames, actionLoadMyGames,\n  actionSetCurrentGameTab, actionLoadGame, actionLoadScores,\n  actionLoadAllScores,\n} from './actionTypes';\n\nexport const loadDays = (days) => ({ type: actionLoadDays, payload: days });\nexport const loadAllGames = (games) => ({ type: actionLoadAllGames, payload: games });\nexport const loadMyGames = (games) => ({ type: actionLoadMyGames, payload: games });\nexport const setCurrentTab = (currentTab) => (\n  { type: actionSetCurrentGameTab, payload: currentTab });\nexport const loadGame = (game) => ({ type: actionLoadGame, payload: game });\nexport const loadScores = (gameId, scores) => (\n  { type: actionLoadScores, payload: { gameId, scores } });\nexport const loadAllScores = (scores) => ({ type: actionLoadAllScores, payload: scores });\n","import { useRef, useLayoutEffect } from 'react';\r\n\r\nfunction getScrollPosition({ element, useWindow }) {\r\n  if (typeof window === 'undefined') return { x: 0, y: 0 };\r\n\r\n  const target = element ? element.current : document.body;\r\n  const position = target.getBoundingClientRect();\r\n\r\n  return useWindow\r\n    ? { x: window.scrollX, y: window.scrollY }\r\n    : { x: position.left, y: position.top };\r\n}\r\n\r\nconst useScrollPosition = (effect, deps, element, useWindow, wait) => {\r\n  const position = useRef(getScrollPosition({ useWindow }));\r\n\r\n  let throttleTimeout = null;\r\n\r\n  const callBack = () => {\r\n    const currPos = getScrollPosition({ element, useWindow });\r\n    effect({ prevPos: position.current, currPos });\r\n    position.current = currPos;\r\n    throttleTimeout = null;\r\n  };\r\n\r\n  useLayoutEffect(() => {\r\n    const handleScroll = () => {\r\n      if (wait) {\r\n        if (throttleTimeout === null) {\r\n          // eslint-disable-next-line react-hooks/exhaustive-deps\r\n          throttleTimeout = setTimeout(callBack, wait);\r\n        }\r\n      } else {\r\n        callBack();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('scroll', handleScroll);\r\n\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, deps);\r\n};\r\n\r\nexport default useScrollPosition;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useCookies } from 'react-cookie';\r\nimport GameCard from './game_card.jsx';\r\nimport { loadDays, loadAllGames, loadMyGames } from '../../actions/eventActions';\r\nimport { restFetch2 } from '../../utils/communication';\r\nimport * as Constants from '../../constants';\r\nimport ErrorPage from '../error_page.jsx';\r\nimport useScrollPosition from '../../utils/scroll';\r\n\r\nconst classNames = require('classnames');\r\n\r\n// eslint-disable-next-line max-lines-per-function\r\nconst GameList = () => {\r\n  const currentTab = useSelector((state) => state.event.currentTab);\r\n  const days = useSelector((state) => state.event.days);\r\n  const games = useSelector((state) => {\r\n    if (currentTab === 'all') {\r\n      return state.event.allGames;\r\n    }\r\n    return state.event.myGames;\r\n  });\r\n  const [buttons, setButtons] = useState({});\r\n  const [uiGames, setUiGames] = useState([]);\r\n\r\n  const dispatch = useDispatch();\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n  const [pageError, setPageError] = useState({});\r\n  const [refs, setRefs] = useState([]);\r\n  const [selectedDay, setSelectedDay] = useState(0);\r\n  const history = useHistory();\r\n\r\n  const navRef = React.createRef();\r\n\r\n  useEffect(() => {\r\n    let gameUrl;\r\n    let loadFunc;\r\n    if (currentTab === 'all') {\r\n      gameUrl = `${Constants.SERVER_PATH}api/games`;\r\n      loadFunc = loadAllGames;\r\n    } else {\r\n      gameUrl = `${Constants.SERVER_PATH}api/games?own=true`;\r\n      loadFunc = loadMyGames;\r\n    }\r\n\r\n    restFetch2(`${Constants.SERVER_PATH}api/days`, dispatch, removeCookie).then((resultDays) => {\r\n      dispatch(loadDays(resultDays.map((day) => new Date(day))));\r\n    }).then(() => restFetch2(gameUrl, dispatch, removeCookie))\r\n      .then((resultGames) => {\r\n        dispatch(loadFunc(resultGames));\r\n      })\r\n      .catch((error) => {\r\n        setPageError(error);\r\n      });\r\n  }, [dispatch, currentTab, removeCookie]);\r\n\r\n  const handleScroll = () => {\r\n    if (refs.length > 0) {\r\n      let k = 0;\r\n      refs.forEach((ref, i) => {\r\n        if (i === 0 || ref.ref.current.getBoundingClientRect().bottom\r\n          - navRef.current.getBoundingClientRect().bottom <= 0) {\r\n          k = ref.num;\r\n        }\r\n      });\r\n      setSelectedDay(k);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const tmp = {};\r\n    const daySet = new Set(games.map((game) => (new Date(game.startTime)).getDate()));\r\n    let selected = false;\r\n    days.forEach((day) => {\r\n      const dayNum = day.getDate();\r\n      tmp[dayNum] = { num: dayNum, name: day.toLocaleDateString('en-US', { weekday: 'long' }), active: false };\r\n      tmp[dayNum].disabled = !daySet.has(dayNum);\r\n      if (!tmp[dayNum].disabled) {\r\n        tmp[dayNum].ref = React.createRef();\r\n        if (!selected) {\r\n          setSelectedDay(dayNum);\r\n          selected = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    const nana = [];\r\n    const tmpRefs = [];\r\n    let lastDay = -1;\r\n    games.forEach((game, i) => {\r\n      const currentDay = (new Date(game.startTime)).getDate();\r\n      if (game.startTime && (i === 0 || currentDay !== lastDay)) {\r\n        nana.push({ ...game, ref: tmp[currentDay].ref });\r\n        if (i === 0) {\r\n          tmpRefs.push({ num: currentDay });\r\n        } else {\r\n          const ref = React.createRef();\r\n          nana[i - 1] = { ...nana[i - 1], ref };\r\n          tmpRefs.push({ num: currentDay, ref });\r\n        }\r\n      } else {\r\n        nana.push({ ...game });\r\n      }\r\n      lastDay = currentDay;\r\n    });\r\n\r\n    setButtons(tmp);\r\n    setRefs(tmpRefs);\r\n    setUiGames(nana);\r\n  }, [currentTab, days, games]);\r\n\r\n  useScrollPosition(handleScroll);\r\n\r\n  const handleDayClicked = (button) => {\r\n    const navParams = navRef.current.getBoundingClientRect();\r\n    const offset = button.ref.current.getBoundingClientRect().top\r\n      - navParams.bottom + navParams.top;\r\n    window.scrollBy({ top: offset, behavior: 'smooth' });\r\n  };\r\n\r\n  if (!pageError.message) {\r\n    return (\r\n      <React.Fragment>\r\n        <nav ref={navRef} className=\"navbar navbar-light bg-white sticky-top mt-2 border shadow-sm\">\r\n          <p className=\"navbar-brand my-0\">{currentTab === 'all' ? 'All games' : 'My games'}</p>\r\n          <ul className=\"nav nav-pills\">\r\n            {Object.values(buttons).map((button) => {\r\n              const classes = classNames({\r\n                btn: true,\r\n                'btn-link': true,\r\n                'nav-link': true,\r\n                active: button.num === selectedDay,\r\n              });\r\n              return (\r\n                <li key={button.num} className=\"nav-item\">\r\n                  <button onClick={() => handleDayClicked(button)}\r\n                          className={classes} disabled={button.disabled}>\r\n                    {button.name}\r\n                  </button>\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        </nav>\r\n        <div>\r\n          {uiGames.map((game) => <GameCard reference={game.ref} clickHandler={() => history.push(`${Constants.APP_URL_PATH}games/${game.id}`)} key={game.id} game={game}/>)}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n  return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n};\r\n\r\nexport default GameList;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport GameList from './game_list.jsx';\r\nimport * as Constants from '../../constants';\r\nimport { setCurrentTab } from '../../actions/eventActions';\r\n\r\nconst classNames = require('classnames');\r\n\r\nconst Games = () => {\r\n  const userPermissions = useSelector((state) => state.user.permissions);\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const [permAllGames, setPermAllGames] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (userPermissions.includes(Constants.PERM_ALL_GAME_ACCESS)) {\r\n      setPermAllGames(true);\r\n      dispatch(setCurrentTab('all'));\r\n    } else {\r\n      dispatch(setCurrentTab('own'));\r\n    }\r\n  }, [dispatch, userPermissions]);\r\n\r\n  const addGameClicked = () => {\r\n    history.push(`${Constants.APP_URL_PATH}addgame`);\r\n  };\r\n\r\n  const tabClicked = (e, type) => {\r\n    window.$(`#${e.target.id}`).tab('show');\r\n    dispatch(setCurrentTab(type));\r\n  };\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center mt-4\">\r\n      <div style={{ width: 500 }}>\r\n        <h1 className=\"text-center display-4\">Games</h1>\r\n        {userPermissions.includes(Constants.PERM_ADD_GAME) && (\r\n          <div className=\"d-flex justify-content-center mt-4\">\r\n            <button onClick={addGameClicked} type=\"button\" className=\"btn btn-outline-primary\">Add game</button>\r\n          </div>\r\n        )}\r\n        <ul className=\"nav nav-tabs mt-4\" id=\"myTab\" role=\"tablist\">\r\n          {permAllGames && <TabHeader type=\"all\" label=\"All games\" active={true} click={tabClicked} /> }\r\n          <TabHeader type=\"own\" label=\"My games\" active={!permAllGames} click={tabClicked} />\r\n        </ul>\r\n        <div className=\"tab-content\" id=\"myTabContent\">\r\n          <div className=\"tab-pane fade show active\" id=\"tab-content\">\r\n            <GameList />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst TabHeader = (input) => {\r\n  const {\r\n    type, label, active, click,\r\n  } = input;\r\n\r\n  const classes = classNames({\r\n    'nav-link': true,\r\n    btn: true,\r\n    'btn-link': true,\r\n    'shadow-none': true,\r\n    active,\r\n  });\r\n  return (\r\n    <li className=\"nav-item\">\r\n      <button onClick={(e) => click(e, type)} className={classes} id={`${type}-tab`} data-target=\"#tab-content\">\r\n        {label}\r\n      </button>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Games;\r\n","const moment = require('moment');\r\n\r\nconst splitInput = (date) => date.split(/[- :]/);\r\nconst convertToDateTime = (t) => new Date(Date.UTC(t[0], t[1] - 1, t[2], t[3], t[4], t[5]));\r\nconst convertToDate = (t) => new Date(Date.UTC(t[0], t[1] - 1, t[2], 0, 0, 0));\r\nconst balanceTimeZone = (date) => new Date(date.getTime() + date.getTimezoneOffset() * 60000);\r\n\r\nexport const getTimeByDate = (date) => moment(balanceTimeZone(convertToDateTime(splitInput(date)))).format('HH:mm');\r\nexport const getLongByDate = (date) => (convertToDate(splitInput(date))).getTime();\r\nexport const getWeekdayByDate = (date) => balanceTimeZone(convertToDateTime(splitInput(date))).toLocaleDateString('en-US', { weekday: 'long' });\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { restFetch2 } from '../../utils/communication';\r\nimport * as Constants from '../../constants';\r\nimport { loadGame } from '../../actions/eventActions';\r\nimport { loadPersons } from '../../actions/staffActions';\r\nimport { getTimeByDate, getWeekdayByDate } from '../../utils/mysql_date';\r\n\r\nconst classNames = require('classnames');\r\n\r\nconst Game = () => {\r\n  const { id } = useParams();\r\n  const gameData = useSelector((state) => state.event.gamesData);\r\n  const users = useSelector((state) => state.staff.persons);\r\n  const dispatch = useDispatch();\r\n  const cookies = useCookies();\r\n  const history = useHistory();\r\n  const removeCookie = cookies[2];\r\n  const [contributors, setContributors] = useState(new Set());\r\n  const [assignmentsModal, setAssignmentsModal] = useState(true);\r\n  const [newOwner, setNewOwner] = useState({ id: 0, firstName: '', lastName: '' });\r\n  const [dialogLoading, setDialogLoading] = useState(false);\r\n  const [dialogError, setDialogError] = useState('');\r\n\r\n  useEffect(() => {\r\n    restFetch2(`${Constants.SERVER_PATH}api/games/${id}`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadGame(result));\r\n    }).then(() => restFetch2(`${Constants.SERVER_PATH}api/users`, dispatch, removeCookie)).then((persons) => {\r\n      dispatch(loadPersons(persons));\r\n    })\r\n      .catch((error) => {\r\n        console.log(error.message);\r\n      });\r\n  }, [dispatch, id, removeCookie]);\r\n\r\n  useEffect(() => {\r\n    const removeModal = () => {\r\n      window.$('#listModal').modal('hide');\r\n      window.$('#moveOwnerDialog').modal('hide');\r\n      window.$('#deleteGameDialog').modal('hide');\r\n      window.$('body').removeClass('modal-open');\r\n      window.$('.modal-backdrop').remove();\r\n    };\r\n    window.onpopstate = removeModal;\r\n    return () => {\r\n      removeModal();\r\n      window.onpopstate = () => {};\r\n    };\r\n  }, []);\r\n\r\n  const updateContributors = () => {\r\n    setDialogLoading(true);\r\n    fetch(`${Constants.SERVER_PATH}api/games/${id}/assignments`, {\r\n      method: 'POST',\r\n      credentials: 'include',\r\n      body: JSON.stringify(Array.from(contributors)),\r\n    }).then((result) => result.json()).then((result) => {\r\n      setDialogLoading(false);\r\n      if (result.succeed) {\r\n        window.$('#listModal').modal('hide');\r\n        restFetch2(`${Constants.SERVER_PATH}api/games/${id}`, dispatch, removeCookie).then((res) => {\r\n          dispatch(loadGame(res));\r\n        }).catch((error) => {\r\n          console.log(error.message);\r\n        });\r\n      } else {\r\n        setDialogError(result.message);\r\n      }\r\n    }).catch((error) => {\r\n      setDialogLoading(false);\r\n      setDialogError('Network error.');\r\n      console.log(`Network error: ${error.messageg}`);\r\n    });\r\n  };\r\n\r\n  const moveOwner = (userId) => {\r\n    setDialogLoading(true);\r\n    fetch(`${Constants.SERVER_PATH}api/games/${id}/moveOwner`, {\r\n      method: 'POST',\r\n      credentials: 'include',\r\n      body: JSON.stringify(userId),\r\n    }).then((result) => result.json()).then((result) => {\r\n      setDialogLoading(false);\r\n      if (result.succeed) {\r\n        history.push(`${Constants.APP_URL_PATH}games`);\r\n      } else {\r\n        setDialogError(result.message);\r\n      }\r\n    }).catch((error) => {\r\n      setDialogLoading(false);\r\n      setDialogError('Network error.');\r\n      console.log(error.message);\r\n    });\r\n  };\r\n\r\n  const deleteGame = () => {\r\n    setDialogLoading(true);\r\n    fetch(`${Constants.SERVER_PATH}api/games/${id}`, {\r\n      method: 'DELETE',\r\n      credentials: 'include',\r\n    }).then((result) => result.json()).then((result) => {\r\n      setDialogLoading(false);\r\n      if (result.succeed) {\r\n        history.push(`${Constants.APP_URL_PATH}games`);\r\n      } else {\r\n        setDialogError(result.message);\r\n      }\r\n    }).catch((error) => {\r\n      setDialogLoading(false);\r\n      setDialogError('Network error.');\r\n      console.log(error.message);\r\n    });\r\n  };\r\n\r\n  const toggleCheckbox = (user) => {\r\n    const tmp = new Set(contributors);\r\n    if (tmp.has(user.id)) {\r\n      tmp.delete(user.id);\r\n    } else {\r\n      tmp.add(user.id);\r\n    }\r\n    setContributors(tmp);\r\n  };\r\n\r\n  const renderUserList = (withCheckbox, click = toggleCheckbox) => (\r\n      <div className=\"list-group\">\r\n        {users\r\n          .filter((user) => user.id !== gameData[id].ownerId)\r\n          .map(\r\n            (user) => (\r\n              <div onClick={() => click(user)} key={user.id} className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center clickable\" >\r\n                <p className=\"m-0 p-0\">{user.lastName} {user.firstName}</p>\r\n                {withCheckbox && (\r\n                  <input onChange={() => toggleCheckbox(user)} className=\"form-check-input-lg\" type=\"checkbox\" id={`ch-${user.id}`} checked={contributors.has(user.id)}/>\r\n                )}\r\n              </div>\r\n            ),\r\n          )}\r\n      </div>\r\n  );\r\n\r\n  const renderModal = (input) => {\r\n    const { errorMessage, isLoading } = input;\r\n    return (\r\n      <div className=\"modal fade\" id=\"listModal\" data-backdrop=\"static\" data-keyboard=\"false\" tabIndex=\"-1\">\r\n        <div className=\"modal-dialog modal-dialog-scrollable\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h5 className=\"modal-title\">{assignmentsModal ? 'Select contributors' : 'Move ownership to:'}</h5>\r\n              <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              {assignmentsModal ? renderUserList(true) : renderUserList(false, (user) => {\r\n                setDialogError('');\r\n                setNewOwner(user);\r\n                window.$('#listModal').modal('hide');\r\n                window.$('#moveOwnerDialog').modal('show');\r\n              })}\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n              {assignmentsModal && (\r\n                <button onClick={() => {\r\n                  updateContributors();\r\n                }} type=\"button\" className=\"btn btn-primary\" disabled={isLoading}>\r\n                  {isLoading && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\" />}\r\n                  Save changes\r\n                </button>\r\n              )};\r\n            </div>\r\n            {errorMessage && <div className=\"alert alert-danger mx-2\" role=\"alert\">{errorMessage}</div>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderGamePage = () => {\r\n    const game = gameData[id];\r\n    return (\r\n      <div className=\"d-flex justify-content-center mt-2\">\r\n        <div style={{ width: 500 }}>\r\n          <div className=\"card text-center border-dark my-2 mx-2  px-2 sticky-top\">\r\n            <div className=\"card-body\">\r\n              <h2 className=\"card-title\">{game.name}</h2>\r\n              <div className=\"d-flex justify-content-center mt-2\">\r\n                <button onClick={() => {\r\n                  history.push(`${Constants.APP_URL_PATH}games/${id}/scores`);\r\n                }} className=\"btn btn-primary\">Add score</button>\r\n                {game.permissions.includes('edit') && (\r\n                  <button onClick={() => {\r\n                    history.push(`${Constants.APP_URL_PATH}games/${id}/edit`);\r\n                  }} className=\"btn btn-outline-secondary ml-2\">Edit game</button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {game.description && (\r\n            <Card title=\"Description\">\r\n              <p>{game.description}</p>\r\n            </Card>\r\n          )}\r\n          {game.notes && (\r\n            <Card title=\"Notes\">\r\n              <p>{game.notes}</p>\r\n            </Card>\r\n          )}\r\n          <Card title=\"Details\">\r\n            <div className=\"list-group mt-4 mx-2\">\r\n              <DetailItem label=\"Owner:\" value={`${game.lastName} ${game.firstName}`}/>\r\n              {game.location && (\r\n                <DetailItem label=\"Location:\" value={game.location}/>\r\n              )}\r\n              <DetailItem label=\"Player count:\" value={game.playerCount}/>\r\n              {game.startTime && (\r\n                <React.Fragment>\r\n                  <DetailItem label=\"Day:\" value={getWeekdayByDate(game.startTime)} />\r\n                  <DetailItem label=\"Time:\" value={`${getTimeByDate(game.startTime)} - ${getTimeByDate(game.endTime)}`} />\r\n                </React.Fragment>\r\n              )}\r\n            </div>\r\n          </Card>\r\n          {(game.assignments.length > 0 || game.permissions.includes('admin')) && (\r\n            <Card title=\"Contributors\">\r\n              <div className=\"d-flex flex-wrap\">\r\n                {game.assignments.map((contributor) => (\r\n                  <div key={contributor.id} style={{ background: '#17a2b8', color: 'white', fontSize: 'small' }}\r\n                       className=\"rounded px-2 py-1 mt-1 ml-1\">\r\n                    <b>{contributor.lastName} {contributor.firstName}</b>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              {game.permissions.includes('admin') && (\r\n                <button onClick={() => {\r\n                  setDialogError('');\r\n                  setAssignmentsModal(true);\r\n                  const tmp = new Set();\r\n                  game.assignments.forEach((user) => tmp.add(user.id));\r\n                  setContributors(tmp);\r\n                }} className=\"btn btn-link mt-2\" data-toggle=\"modal\" data-target=\"#listModal\" >Edit contributors</button>\r\n              )}\r\n            </Card>\r\n          )}\r\n          {game.permissions.includes('admin') && (\r\n            <Card title=\"Administration\">\r\n              <button onClick={() => setAssignmentsModal(false)} className=\"btn btn-outline-danger\" data-toggle=\"modal\" data-target=\"#listModal\">Move ownership</button>\r\n              <button onClick={() => {\r\n                setDialogError('');\r\n                window.$('#deleteGameDialog').modal('show');\r\n              }} className=\"btn btn-outline-danger ml-2\">Delete game</button>\r\n            </Card>\r\n          )}\r\n        </div>\r\n        {renderModal({ errorMessage: dialogError, isLoading: dialogLoading })}\r\n\r\n        <ConfirmationDialog errorMessage={dialogError} isLoading={dialogLoading} id=\"moveOwnerDialog\" title=\"Move ownership\" text={\r\n          (\r\n            <React.Fragment>\r\n              {'Do you want to move '}<b>{game.name}</b>{'\\'s ownership to '}<b>{newOwner.lastName} {newOwner.firstName}?</b>\r\n            </React.Fragment>\r\n          )\r\n        } confirmBtnText=\"Move\" btnHandler={() => {\r\n          moveOwner(newOwner.id);\r\n        }} />\r\n\r\n        <ConfirmationDialog errorMessage={dialogError} isLoading={dialogLoading} id=\"deleteGameDialog\" title=\"Delete game\" text={\r\n          (\r\n            <React.Fragment>\r\n              {'Do you want to delete '}<b>{game.name}</b>?\r\n            </React.Fragment>\r\n          )\r\n        } confirmBtnText=\"Delete\" btnType=\"danger\" btnHandler={() => {\r\n          console.log(`Delete game ${game.name}`);\r\n          deleteGame();\r\n        }} />\r\n\r\n      </div>\r\n    );\r\n  };\r\n  if (gameData[id]) {\r\n    return renderGamePage();\r\n  }\r\n  return <h4>Loading</h4>;\r\n};\r\n\r\nconst Card = (prop) => (\r\n  <div className=\"card border-gray my-2 mx-2\">\r\n    <div className=\"card-body\">\r\n      <h4>{prop.title}</h4>\r\n      {prop.children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst DetailItem = (input) => (\r\n  <div className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center\">\r\n    <p className=\"p-0 m-0\">{input.label}</p>\r\n    <p className=\"p-0 m-0\">{input.value}</p>\r\n  </div>\r\n);\r\n\r\nconst ConfirmationDialog = (input) => {\r\n  const {\r\n    id, title, text, confirmBtnText, btnHandler, errorMessage, isLoading,\r\n  } = input;\r\n  let { btnType } = input;\r\n  if (!btnType) {\r\n    btnType = 'primary';\r\n  }\r\n  const classes = classNames({\r\n    btn: true,\r\n    [`btn-${btnType}`]: true,\r\n  });\r\n\r\n  return (\r\n    <div className=\"modal fade\" id={id} data-backdrop=\"static\" data-keyboard=\"false\" tabIndex=\"-1\">\r\n      <div className=\"modal-dialog modal-dialog-scrollable\">\r\n        <div className=\"modal-content\">\r\n          <div className=\"modal-header\">\r\n            <h5 className=\"modal-title\">{title}</h5>\r\n            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div className=\"modal-body\">{text}</div>\r\n          <div className=\"modal-footer\">\r\n            <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Cancel</button>\r\n            <button onClick={() => btnHandler()} type=\"button\" className={classes} disabled={isLoading}>\r\n              {isLoading && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\" />}\r\n              {confirmBtnText}\r\n            </button>\r\n          </div>\r\n          {errorMessage && <div className=\"alert alert-danger mx-2\" role=\"alert\">{errorMessage}</div>}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Game;\r\n","const required = { allowEmpty: false, message: 'This field is required.' };\r\nconst area = { length: { maximum: 1024, tooLong: 'Max length of this field is 1024 characters.' } };\r\n\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const gameConstraints = {\r\n  title: {\r\n    presence: required,\r\n    length: {\r\n      minimum: 3,\r\n      maximum: 32,\r\n      tooShort: 'The title must be between 3 and 32 characters.',\r\n      tooLong: 'The title must be between 3 and 32 characters.',\r\n    },\r\n  },\r\n  playerCount: {\r\n    numericality: {\r\n      onlyInteger: true,\r\n      strict: true,\r\n      greaterThanOrEqualTo: 0,\r\n      lessThanOrEqualTo: 16,\r\n      message: 'Player count must be between 0 and 16.',\r\n    },\r\n  },\r\n  description: area,\r\n  notes: area,\r\n  location: {\r\n    length: {\r\n      maximum: 32,\r\n      tooLong: 'The location must be between 3 and 32 characters.',\r\n    },\r\n  },\r\n  day: {\r\n    presence: required,\r\n    selector: true,\r\n  },\r\n  startTime: {\r\n    presence: required,\r\n    format: {\r\n      pattern: '[0-9]{2}:[0-9]{2}',\r\n      message: 'Enter a valid time',\r\n    },\r\n  },\r\n  endTime: {\r\n    presence: required,\r\n    format: {\r\n      pattern: '([0-1]?[0-9]|2[0-3]):[0-5][0-9]',\r\n      message: 'Enter a valid time',\r\n    },\r\n  },\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport { gameConstraints as rules } from '../../constraints/gameConstraints';\r\nimport { restFetch2 } from '../../utils/communication';\r\nimport * as Constants from '../../constants';\r\nimport { loadGame } from '../../actions/eventActions';\r\nimport { getTimeByDate, getLongByDate } from '../../utils/mysql_date';\r\n\r\nconst validate = require('validate.js');\r\nconst  classNames = require('classnames');\r\n\r\nconst GameForm = (input) => {\r\n  const { edit } = input;\r\n  const { id } = useParams();\r\n  const gamesData = useSelector((state) => state.event.gamesData);\r\n  const [title, setTitle] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [playerCount, setPlayerCount] = useState({ value: 0, error: '', ref: React.createRef() });\r\n  const [description, setDescription] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [notes, setNotes] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [day, setDay] = useState({ options: [], error: '', ref: React.createRef() });\r\n  const [selectedDayId, setSelectedDayId] = useState(0);\r\n  const [startTime, setStartTime] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [endTime, setEndTime] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [location, setLocation] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [timeDisabled, setTimeDisabled] = useState(false);\r\n  const [btnDisabled, setBtnDisabled] = useState(false);\r\n\r\n  const fields = {\r\n    title: { state: title, setState: setTitle, order: 1 },\r\n    playerCount: { state: playerCount, setState: setPlayerCount, order: 2 },\r\n    description: { state: description, setState: setDescription, order: 3 },\r\n    notes: { state: notes, setState: setNotes, order: 4 },\r\n    location: { state: location, setState: setLocation, order: 5 },\r\n    day: { state: day, setState: setDay, order: 6 },\r\n    startTime: { state: startTime, setState: setStartTime, order: 7 },\r\n    endTime: { state: endTime, setState: setEndTime, order: 8 },\r\n  };\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  validate.validators.selector = (value) => {\r\n    console.log('Day:');\r\n    console.log(value);\r\n    if (!value) {\r\n      return 'This field is required.';\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (edit) {\r\n      restFetch2(`${Constants.SERVER_PATH}api/games/${id}`, dispatch, removeCookie).then((result) => {\r\n        dispatch(loadGame(result));\r\n      })\r\n        .catch((error) => {\r\n          console.log(error.message);\r\n        });\r\n    }\r\n  }, [edit, dispatch, id, removeCookie]);\r\n\r\n  useEffect(() => {\r\n    if (edit) {\r\n      if (gamesData[id]) {\r\n        setTitle({ ...title, value: gamesData[id].name });\r\n        setPlayerCount({ ...playerCount, value: gamesData[id].playerCount });\r\n\r\n        if (gamesData[id].description) {\r\n          setDescription({ ...title, value: gamesData[id].description });\r\n        }\r\n\r\n        if (gamesData[id].notes) {\r\n          setNotes({ ...notes, value: gamesData[id].notes });\r\n        }\r\n\r\n        if (gamesData[id].location) {\r\n          setLocation({ ...location, value: gamesData[id].location });\r\n        }\r\n\r\n        if (gamesData[id].startTime) {\r\n          setTimeDisabled(false);\r\n          setSelectedDayId(getLongByDate(gamesData[id].startTime));\r\n          setStartTime({ ...startTime, value: getTimeByDate(gamesData[id].startTime) });\r\n          setEndTime({ ...endTime, value: getTimeByDate(gamesData[id].endTime) });\r\n        } else {\r\n          setTimeDisabled(true);\r\n        }\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [edit, gamesData, id]);\r\n\r\n  useEffect(() => {\r\n    restFetch2(`${Constants.SERVER_PATH}api/days`, dispatch, removeCookie).then((resultDays) => {\r\n      setDay({\r\n        ...day,\r\n        options: resultDays.map((item) => {\r\n          const date = new Date(item);\r\n          const newDate = new Date(date.getTime() + (date.getTimezoneOffset() * 60000));\r\n          return ({ id: date.getTime(), name: newDate.toLocaleDateString('en-US', { weekday: 'long' }) });\r\n        }),\r\n      });\r\n    }).catch((error) => {\r\n      console.log(`Error: ${error.message}`);\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [dispatch, removeCookie]);\r\n\r\n  const simplifyNonRequiredField = (value) => (value.trim().length === 0 ? null : value);\r\n  const dateToSqlFormat = (value) => value.toISOString().slice(0, 16).replace('T', ' ');\r\n\r\n  const saveGameClicked = () => {\r\n    let validationObj = {\r\n      title: title.value,\r\n      playerCount: playerCount.value,\r\n      description: description.value,\r\n      notes: notes.value,\r\n      location: location.value,\r\n    };\r\n\r\n    const currentRules = { ...rules };\r\n    if (!timeDisabled) {\r\n      validationObj = {\r\n        ...validationObj,\r\n        day: selectedDayId,\r\n        startTime: startTime.value,\r\n        endTime: endTime.value,\r\n      };\r\n    } else {\r\n      delete currentRules.day;\r\n      delete currentRules.startTime;\r\n      delete currentRules.endTime;\r\n    }\r\n\r\n    console.log(validationObj);\r\n\r\n    const validation = validate(validationObj, currentRules, { fullMessages: false });\r\n    if (validation) {\r\n      console.log(validation);\r\n      let minOrder = 999,\r\n        minKey = '';\r\n      Object.entries(validation)\r\n        .forEach(([key, value]) => {\r\n          if (fields[key].order < minOrder) {\r\n            minOrder = fields[key].order;\r\n            minKey = key;\r\n          }\r\n          fields[key].setState((rest) => ({ ...rest, error: value[0] }));\r\n        });\r\n      fields[minKey].state.ref.current.scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: 'start',\r\n      });\r\n    } else {\r\n      console.log('Adding game');\r\n      const data = {\r\n        title: title.value,\r\n        playerCount: playerCount.value,\r\n        description: simplifyNonRequiredField(description.value),\r\n        notes: simplifyNonRequiredField(notes.value),\r\n        location: simplifyNonRequiredField(location.value),\r\n      };\r\n\r\n      if (!timeDisabled) {\r\n        const selectedDay = selectedDayId;\r\n        const t1 = startTime.value.split(':');\r\n        const t2 = endTime.value.split(':');\r\n        const start = (Number.parseInt(t1[0], 10) * 3600000) + (Number.parseInt(t1[1], 10) * 60000);\r\n        const end = (Number.parseInt(t2[0], 10) * 3600000) + (Number.parseInt(t2[1], 10) * 60000);\r\n\r\n        const ss = new Date(selectedDay + start);\r\n        const ee = new Date(end > start ? selectedDay + end : selectedDay + 86400000 + end);\r\n\r\n        data.startTime = dateToSqlFormat(ss);\r\n        data.endTime = dateToSqlFormat(ee);\r\n      } else {\r\n        data.startTime = null;\r\n        data.endTime = null;\r\n      }\r\n\r\n      const url = edit ? `${Constants.SERVER_PATH}api/games/${id}` : `${Constants.SERVER_PATH}api/games`;\r\n\r\n      setBtnDisabled(true);\r\n      fetch(url, {\r\n        method: edit ? 'POST' : 'PUT',\r\n        credentials: 'include',\r\n        body: JSON.stringify(data),\r\n      }).then((result) => result.json()).then((result) => {\r\n        setBtnDisabled(false);\r\n        if (result.succeed) {\r\n          history.replace(edit ? `${Constants.APP_URL_PATH}games/${id}` : `${Constants.APP_URL_PATH}games`);\r\n        } else {\r\n          let minOrder = 999,\r\n            minKey = '';\r\n          Object.entries(result.inputErrors)\r\n            .forEach(([key, value]) => {\r\n              if (fields[key].order < minOrder) {\r\n                minOrder = fields[key].order;\r\n                minKey = key;\r\n              }\r\n              fields[key].setState((rest) => ({ ...rest, error: value }));\r\n            });\r\n          fields[minKey].state.ref.current.scrollIntoView({\r\n            behavior: 'smooth',\r\n            block: 'start',\r\n          });\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center\">\r\n      <div style={{ width: 500 }}>\r\n        <form>\r\n          <Card title=\"Game data\">\r\n            <FormGroup na={title.ref}>\r\n              <Input type=\"text\" id=\"inputTitle\" label=\"Title\" state={title} setState={setTitle} constraint={{ value: rules.title }} />\r\n            </FormGroup>\r\n            <FormGroup na={playerCount.ref}>\r\n              <RangeInput id=\"inputPlayerCount\" label=\"Player count\" state={playerCount} setState={setPlayerCount} constraint={{ value: rules.playerCount }} min={0} max={16}/>\r\n            </FormGroup>\r\n            <FormGroup na={description.ref}>\r\n              <Input rows=\"4\" id=\"inputDescription\" label=\"Description\" state={description} setState={setDescription} constraint={{ value: rules.description }} />\r\n            </FormGroup>\r\n            <FormGroup na={notes.ref}>\r\n              <Input rows=\"4\" id=\"inputNotes\" label=\"Notes\" state={notes} setState={setNotes} constraint={{ value: rules.notes }} />\r\n            </FormGroup>\r\n            <FormGroup na={location.ref}>\r\n              <Input type=\"text\" id=\"inputLocation\" label=\"Location\" state={location} setState={setLocation} constraint={{ value: rules.location }} />\r\n            </FormGroup>\r\n          </Card>\r\n          <Card title=\"Game time\">\r\n            <FormRow>\r\n              <FormGroup mdSize=\"4\" na={day.ref}>\r\n                <SelectInput id=\"inputDay\" label=\"Day\" state={day} setState={setDay} selected={selectedDayId} setSelected={setSelectedDayId} constraint={{ value: rules.day }} disabled={timeDisabled}/>\r\n              </FormGroup>\r\n              <FormGroup mdSize=\"4\" na={startTime.ref}>\r\n                <Input type=\"time\" id=\"inputStartTime\" label=\"Start time\" state={startTime} setState={setStartTime} constraint={{ value: rules.time }} disabled={timeDisabled} />\r\n              </FormGroup>\r\n              <FormGroup mdSize=\"4\" na={endTime.ref}>\r\n                <Input type=\"time\" id=\"inputEndTime\" label=\"End time\" state={endTime} setState={setEndTime} constraint={{ value: rules.time }} disabled={timeDisabled} />\r\n              </FormGroup>\r\n            </FormRow>\r\n            <div className=\"form-check\">\r\n              <input onChange={(e) => {\r\n                setTimeDisabled(e.target.checked);\r\n              }} className=\"form-check-input\" type=\"checkbox\" id=\"inputTimeLater\" checked={timeDisabled}/>\r\n              <label className=\"form-check-label\" htmlFor=\"inputTimeLater\">Add later</label>\r\n            </div>\r\n          </Card>\r\n          <Card title=\"Submit\">\r\n            <button onClick={() => saveGameClicked()} type=\"button\" className=\"btn btn-primary\" disabled={btnDisabled}>\r\n              {btnDisabled && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\" />}\r\n              {edit ? 'Edit game' : 'Save game'}\r\n            </button>\r\n          </Card>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Card = (prop) => (\r\n  <div className=\"card border-dark my-2 mx-3\">\r\n    <div className=\"card-body\">\r\n      <h4>{prop.title}</h4>\r\n      {prop.children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst FormRow = (prop) => (\r\n  <div className=\"form-row\">\r\n    {prop.children}\r\n  </div>\r\n);\r\n\r\nconst FormGroup = (prop) => {\r\n  const { children, mdSize, na } = prop;\r\n  const classes = classNames({\r\n    'form-group': true,\r\n    [`col-md-${mdSize}`]: mdSize,\r\n  });\r\n  return (\r\n    <div ref={na} className={classes}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Input = (prop) => {\r\n  const {\r\n    type, id, label, state, setState, decorators, rows, constraint, disabled,\r\n  } = prop;\r\n\r\n  const handleInputChange = (event) => {\r\n    const { value } = event.target;\r\n    setState((rest) => ({ ...rest, value, error: '' }));\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    let { value } = state;\r\n    if (decorators) {\r\n      for (let i = 0; i < decorators.length; i += 1) {\r\n        value = decorators[i](value);\r\n      }\r\n      setState((rest) => ({ ...rest, value }));\r\n    }\r\n    const validation = validate({ value }, constraint, { fullMessages: false });\r\n    if (validation) {\r\n      setState((rest) => ({ ...rest, error: validation.value[0] }));\r\n    }\r\n  };\r\n\r\n  const classes = classNames({\r\n    'form-control': true,\r\n    'is-invalid': !disabled && state.error,\r\n  });\r\n\r\n  const getInput = () => (rows ? (\r\n      <textarea\r\n        onChange={handleInputChange}\r\n        onBlur={handleBlur} rows={rows}\r\n        className={classes}\r\n        id={id}\r\n        placeholder={label}\r\n        value={state.value}\r\n        disabled={disabled}/>\r\n  ) : (\r\n      <input\r\n        onChange={handleInputChange}\r\n        onBlur={handleBlur} type={type}\r\n        className={classes}\r\n        id={id}\r\n        placeholder={label}\r\n        value={state.value}\r\n        disabled={disabled}/>\r\n  ));\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <label htmlFor={id}>{label}</label>\r\n      {getInput()}\r\n      { !disabled && state.error && <div className=\"invalid-feedback\">{state.error}</div>}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nconst SelectInput = (prop) => {\r\n  const {\r\n    id, label, state, setState, selected, setSelected, constraint, disabled,\r\n  } = prop;\r\n\r\n  const handleInputChange = (event) => {\r\n    const { selectedIndex } = event.target;\r\n    const selectedId = event.target[selectedIndex].id;\r\n    setSelected(Number.parseInt(selectedId, 10));\r\n    setState((rest) => ({ ...rest, error: '' }));\r\n    // setState((rest) => ({ ...rest, selectedId, error: '' }));\r\n    // console.log(new Date(Number.parseInt(selectedId, 10)));\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    // const { selectedId } = state;\r\n    const validation = validate({ value: selected }, constraint, { fullMessages: false });\r\n    if (validation) {\r\n      setState((rest) => ({ ...rest, error: validation.value[0] }));\r\n    }\r\n  };\r\n\r\n  const classes = classNames({\r\n    'custom-select': true,\r\n    'is-invalid': !disabled && state.error,\r\n  });\r\n\r\n  const findValue = () => {\r\n    if (selected === 0) {\r\n      return '';\r\n    }\r\n    for (let i = 0; i < state.options.length; i += 1) {\r\n      if (state.options[i].id === selected) {\r\n        console.log(state.options[i].name);\r\n        return state.options[i].name;\r\n      }\r\n    }\r\n    return '';\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <label htmlFor={id}>{label}</label>\r\n      <select\r\n        onChange={handleInputChange}\r\n        onBlur={handleBlur}\r\n        id={id}\r\n        className={classes}\r\n        disabled={disabled}\r\n        value={findValue()}>\r\n        <option value=\"\"/>\r\n        {state.options.map((item) => <option key={item.id} id={item.id}>{item.name}</option>)}\r\n      </select>\r\n      { !disabled && state.error && <div className=\"invalid-feedback\">{state.error}</div>}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nconst RangeInput = (input) => {\r\n  const {\r\n    id, label, state, setState, constraint, min, max,\r\n  } = input;\r\n\r\n  const handleInputChange = (event) => {\r\n    const { value } = event.target;\r\n    setState((rest) => ({ ...rest, value, error: '' }));\r\n\r\n    const validation = validate({ value }, constraint, { fullMessages: false });\r\n    if (validation) {\r\n      setState((rest) => ({ ...rest, error: validation.value[0] }));\r\n    }\r\n  };\r\n\r\n  const classes = classNames({\r\n    'form-control-range': true,\r\n    'is-invalid': state.error,\r\n  });\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <label htmlFor={id}>{label}: <b>{state.value}</b></label>\r\n      <input onChange={handleInputChange} min={min} max={max} type=\"range\" className={classes} id={id} value={state.value} />\r\n      {state.error && <div className=\"invalid-feedback\">{state.error}</div>}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default GameForm;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { restFetch2 } from '../../utils/communication';\r\nimport * as Constants from '../../constants';\r\nimport { loadTeams } from '../../actions/teamsActions';\r\nimport { loadGame, loadScores } from '../../actions/eventActions';\r\n\r\nconst Scores = () => {\r\n  const { id } = useParams();\r\n  const game = useSelector((state) => state.event.gamesData[id]);\r\n  const teams = useSelector((state) => state.teams.teams);\r\n  const scores = useSelector((state) => state.event.scores);\r\n  const [uiScores, setUiScores] = useState([]);\r\n  const [scoreCounter, setScoreCounter] = useState('');\r\n  const dispatch = useDispatch();\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  const [currentTeamId, setCurrentTeamId] = useState(null);\r\n  const [currentScore, setCurrentScore] = useState('');\r\n  const [currentFairplay, setCurrentFairplay] = useState(false);\r\n  const [editing, setEditing] = useState(false);\r\n\r\n  const scoreSorter = (a, b) => {\r\n    const x1 = a.score || a.score === 0,\r\n      x2 = b.score || b.score === 0;\r\n    if (x1) {\r\n      if (x2) {\r\n        if (a.score > b.score) {\r\n          return -1;\r\n        }\r\n        if (a.score < b.score) {\r\n          return 1;\r\n        }\r\n        return 0;\r\n      }\r\n      return 1;\r\n    }\r\n\r\n    return x2 ? -1 : 0;\r\n  };\r\n\r\n  useEffect(() => {\r\n    restFetch2(`${Constants.SERVER_PATH}api/games/${id}`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadGame(result));\r\n    }).then(() => restFetch2(`${Constants.SERVER_PATH}api/teams`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadTeams(result));\r\n    }).then(() => restFetch2(`${Constants.SERVER_PATH}api/games/${id}/scores`, dispatch, removeCookie).then((mScores) => {\r\n      dispatch(loadScores(id, mScores));\r\n    })));\r\n  }, [dispatch, id, removeCookie]);\r\n\r\n  useEffect(() => {\r\n    const scoreList = scores[id],\r\n      output = [];\r\n    if (teams.length > 0 && scoreList) {\r\n      const obj = {};\r\n      scoreList.forEach((item) => {\r\n        obj[item.teamId] = { score: item.score, fairplay: item.fairplay };\r\n      });\r\n\r\n      teams.forEach((item) => {\r\n        const scoreData = obj[item.id];\r\n        console.log('Csecs');\r\n        console.log(scoreData);\r\n        if (scoreData) {\r\n          output.push({ ...item, score: scoreData.score, fairplay: scoreData.fairplay });\r\n        } else {\r\n          output.push({ ...item });\r\n        }\r\n      });\r\n      setScoreCounter(`${scoreList.length}/${teams.length} scored`);\r\n      setUiScores(output.sort(scoreSorter));\r\n    }\r\n  }, [id, scores, teams]);\r\n\r\n  useEffect(() => {\r\n    const removeModal = () => {\r\n      window.$('#scoreModal').modal('hide');\r\n      window.$('body').removeClass('modal-open');\r\n      window.$('.modal-backdrop').remove();\r\n    };\r\n    window.onpopstate = removeModal;\r\n    return () => {\r\n      removeModal();\r\n      window.onpopstate = () => {};\r\n    };\r\n  }, []);\r\n\r\n  const updateScore = () => {\r\n    fetch(`${Constants.SERVER_PATH}api/games/${id}/scores`, {\r\n      method: editing ? 'POST' : 'PUT',\r\n      credentials: 'include',\r\n      body: JSON.stringify({\r\n        teamId: currentTeamId,\r\n        score: Number(currentScore),\r\n        fairplay: currentFairplay,\r\n      }),\r\n    }).then((result) => result.json()).then((result) => {\r\n      if (result.succeed) {\r\n        window.$('#scoreModal').modal('hide');\r\n        restFetch2(`${Constants.SERVER_PATH}api/games/${id}/scores`, dispatch, removeCookie).then((mScores) => {\r\n          dispatch(loadScores(id, mScores));\r\n        }).catch((error) => {\r\n          console.log(error.message);\r\n        });\r\n      } else {\r\n        console.log(result.message);\r\n      }\r\n    });\r\n  };\r\n\r\n  const renderScoreModal = () => (\r\n      <div className=\"modal fade\" id=\"scoreModal\" data-backdrop=\"static\" data-keyboard=\"false\" tabIndex=\"-1\">\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h5 className=\"modal-title\">Score</h5>\r\n              <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"input_score\" className=\"col-form-label\">Score:</label>\r\n                <input autoComplete=\"off\" onChange={(e) => {\r\n                  setCurrentScore(e.target.value);\r\n                }} type=\"text\" className=\"form-control\" id=\"input_score\" value={currentScore} />\r\n              </div>\r\n              <div className=\"form-group form-check\">\r\n                <input onChange={(e) => {\r\n                  setCurrentFairplay(e.target.checked);\r\n                }} autoComplete=\"off\" type=\"checkbox\" className=\"form-check-input\" id=\"input_fairplay\" checked={currentFairplay}/>\r\n                <label className=\"form-check-label\" htmlFor=\"input_fairplay\">Fair play</label>\r\n              </div>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n              <button onClick={updateScore} type=\"button\" className=\"btn btn-primary\" disabled={false}>\r\n                {false && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\" />}\r\n                Save score\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center mt-4\">\r\n      <div style={{ width: 500 }}>\r\n        {game && <h2 className=\"text-center\">{game.name}</h2>}\r\n        <h5 className=\"text-center\">{scoreCounter}</h5>\r\n        <div className=\"list-group mt-4 mx-2\">\r\n          {uiScores.length > 0 && uiScores.map((scoreItem) => (\r\n            <div key={scoreItem.id} className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center clickable\"\r\n            onClick={() => {\r\n              setCurrentTeamId(scoreItem.id);\r\n              if (scoreItem.score || scoreItem.score === 0) {\r\n                setEditing(true);\r\n                setCurrentScore(scoreItem.score);\r\n                setCurrentFairplay(scoreItem.fairplay);\r\n              } else {\r\n                setEditing(false);\r\n                setCurrentScore('');\r\n                setCurrentFairplay(false);\r\n              }\r\n              window.$('#scoreModal').modal('show');\r\n            }}>\r\n              <span>\r\n                <p className=\"m-0 p-0\">\r\n                  {scoreItem.name}\r\n                </p>\r\n              </span>\r\n              <span>\r\n                {scoreItem.fairplay === 1 && <span className=\"badge badge-pill badge-success mr-2\">fair</span>}\r\n                {(scoreItem.score || scoreItem.score === 0)\r\n                  && <span><b>{scoreItem.score}</b></span>\r\n                }\r\n              </span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      {renderScoreModal()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Scores;\r\n","import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport * as Constants from '../constants';\r\nimport { restFetch2 } from '../utils/communication';\r\nimport { loadTeams } from '../actions/teamsActions';\r\nimport { loadAllScores } from '../actions/eventActions';\r\n\r\nconst ScoreTable = () => {\r\n  const teams = useSelector((state) => state.teams.teams);\r\n  const scores = useSelector((state) => state.event.allScores);\r\n\r\n  const dispatch = useDispatch();\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  useEffect(() => {\r\n    restFetch2(`${Constants.SERVER_PATH}api/teams`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadTeams(result));\r\n    }).then(() => restFetch2(`${Constants.SERVER_PATH}api/scores`, dispatch, removeCookie)).then((result) => {\r\n      dispatch(loadAllScores(result));\r\n    })\r\n      .catch((error) => {\r\n        console.log(error.message);\r\n      });\r\n  }, [dispatch, removeCookie]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"table-responsive\">\r\n    <table className=\"table table-sm table-dark table-striped sticky-header\">\r\n      <thead>\r\n        <tr>\r\n          <th scope=\"col\">Games</th>\r\n          {teams.map((team) => <th key={team.id} scope=\"col\">{team.name}</th>)}\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n      {scores.map((game) => (\r\n          <tr key={game.id}>\r\n            <th scope=\"row\">{game.name}</th>\r\n            {teams.map((team) => {\r\n              if (game.scores[team.id]) {\r\n                return <td key={team.id} className=\"text-center\">{game.scores[team.id].score}</td>;\r\n              }\r\n              return <td key={team.id} className=\"text-center\">-</td>;\r\n            })}\r\n          </tr>\r\n      ))}\r\n      </tbody>\r\n    </table>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default ScoreTable;\r\n","import React, { useEffect } from 'react';\r\nimport {\r\n  BrowserRouter as Router, Route, Switch, useRouteMatch, Link,\r\n} from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { logOut, loadUserData, loadPermissions } from '../actions/userActions';\r\nimport * as Constants from '../constants';\r\nimport Staff from './staff/staff.jsx';\r\nimport Teams from './teams/teams.jsx';\r\nimport Team from './teams/team.jsx';\r\nimport Player from './players/player.jsx';\r\nimport Players from './players/players.jsx';\r\nimport Games from './games/games.jsx';\r\nimport Game from './games/game.jsx';\r\nimport GameForm from './games/game_form.jsx';\r\nimport { restFetch2 } from '../utils/communication';\r\nimport Scores from './games/scores.jsx';\r\nimport ScoreTable from './ScoreTable.jsx';\r\n\r\nconst Main = () => {\r\n  const userData = useSelector((state) => state.user.userData);\r\n  const userPermissions = useSelector((state) => state.user.permissions);\r\n  const { path, url } = useRouteMatch();\r\n  const dispatch = useDispatch();\r\n\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  useEffect(() => {\r\n    restFetch2(`${Constants.SERVER_PATH}api/userData`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadUserData(result));\r\n    }).then(() => restFetch2(`${Constants.SERVER_PATH}api/userPermissions`, dispatch, removeCookie))\r\n      .then((result) => {\r\n        dispatch(loadPermissions(result));\r\n      })\r\n      .catch((error) => {\r\n        console.log(`Error: ${error.message}`);\r\n      });\r\n  }, []);\r\n\r\n  const logoutClicked = () => {\r\n    restFetch2(`${Constants.SERVER_PATH}api/logout`, dispatch, removeCookie).then(() => {\r\n      removeCookie('loggedin', { path: '/' });\r\n      dispatch(logOut());\r\n    }).catch((error) => {\r\n      console.log(`Error: ${error.message}`);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Router>\r\n      <nav className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\r\n        <Link to={`${url}`} className=\"navbar-brand\">\r\n          <img src=\"logo.svg\" width=\"30\" height=\"30\" className=\"d-inline-block align-top mr-3\" alt=\"\" />\r\n          HDN\r\n        </Link>\r\n        <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarTogglerDemo02\"\r\n                aria-controls=\"navbarTogglerDemo02\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n          <span className=\"navbar-toggler-icon\" />\r\n        </button>\r\n        <div className=\"collapse navbar-collapse\" id=\"navbarTogglerDemo02\">\r\n          <ul className=\"navbar-nav mr-auto mt-2 mt-lg-0\">\r\n            <NavbarItem to={`${url}`} title=\"Home\" />\r\n            <NavbarItem to={`${Constants.APP_URL_PATH}games`} title=\"Games\" />\r\n            <NavbarItem to={`${Constants.APP_URL_PATH}staff`} title=\"Staff\" />\r\n            {userPermissions.includes(Constants.PERM_TEAMS_DATA_ACCESS) && (\r\n              <React.Fragment>\r\n                <NavbarItem to={`${Constants.APP_URL_PATH}teams`} title=\"Teams\" />\r\n                <NavbarItem to={`${Constants.APP_URL_PATH}players`} title=\"Players\" />\r\n              </React.Fragment>\r\n            )}\r\n            {userPermissions.includes(Constants.PERM_SCORE_TABLE_ACCESS) && (\r\n              <NavbarItem to={`${Constants.APP_URL_PATH}scores`} title=\"Scores\" />\r\n            )}\r\n          </ul>\r\n          <ul className=\"navbar-nav mt-2 mt-lg-0\">\r\n          <li className=\"nav-item dropdown\">\r\n            <Link to={`${Constants.APP_URL_PATH}account`} className=\"nav-link dropdown-toggle\" role=\"button\" data-toggle=\"dropdown\"\r\n                  aria-haspopup=\"true\" aria-expanded=\"false\">\r\n              {`${userData.lastName} ${userData.firstName}`}\r\n            </Link>\r\n            <div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdownMenuLink\">\r\n              <Link to={`${url}/account`} className=\"btn shadow-none dropdown-item\">Account</Link>\r\n              <button onClick={logoutClicked} className=\"btn shadow-none rounded-0 dropdown-item\">Log Out</button>\r\n            </div>\r\n          </li>\r\n          </ul>\r\n        </div>\r\n      </nav>\r\n        <Switch>\r\n          <Route exact path={`${path}`}>\r\n            <h1>Home</h1>\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}staff`}>\r\n            <Staff />\r\n          </Route>\r\n          <Route exact path={`${Constants.APP_URL_PATH}games`}>\r\n            <Games />\r\n          </Route>\r\n          <Route exact path={`${Constants.APP_URL_PATH}games/:id`}>\r\n            <Game />\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}games/:id/edit`}>\r\n            <GameForm edit={true}/>\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}games/:id/scores`}>\r\n            <Scores />\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}addGame`}>\r\n            <GameForm />\r\n          </Route>\r\n          <Route exact path={`${Constants.APP_URL_PATH}teams`}>\r\n            <Teams />\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}teams/:id`}>\r\n            <Team />\r\n          </Route>\r\n          <Route exact path={`${Constants.APP_URL_PATH}players`}>\r\n            <Players />\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}scores`}>\r\n            <ScoreTable />\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}players/:id`}>\r\n            <Player />\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}account`}>\r\n            <h1>Account</h1>\r\n          </Route>\r\n          <Route path=\"*\">\r\n            <h3>Main error.</h3>\r\n          </Route>\r\n        </Switch>\r\n      </Router>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nconst NavbarItem = (input) => (\r\n    <li className=\"nav-item\">\r\n      <Link to={input.to} className=\"nav-link\">{input.title}</Link>\r\n    </li>\r\n);\r\n\r\nexport default Main;\r\n","import React from 'react';\nimport './App.css';\nimport {\n  BrowserRouter as Router, Route, Switch, Redirect,\n} from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { useCookies } from 'react-cookie';\nimport Login from './components/login.jsx';\nimport Registration from './components/registration.jsx';\nimport * as Constants from './constants';\nimport Main from './components/main.jsx';\n\nfunction App() {\n  const loggedIn = useSelector((state) => state.user.loggedIn);\n\n  return (\n    <React.Fragment>\n      <Router>\n        <Switch>\n          <PublicRoute path={`${Constants.APP_URL_PATH}login`}>\n            <Login />\n          </PublicRoute>\n          <PublicRoute path={`${Constants.APP_URL_PATH}registration`}>\n            <Registration />\n          </PublicRoute>\n          <PrivateRoute path={`${Constants.APP_URL_PATH}`}>\n            <Main />\n          </PrivateRoute>\n          <Route exact path=\"/\">\n            <Redirect to={`${Constants.APP_URL_PATH}`} />\n          </Route>\n          <PublicRoute path=\"*\">\n            <Redirect to={`${Constants.APP_URL_PATH}`} />\n          </PublicRoute>\n        </Switch>\n      </Router>\n    </React.Fragment>\n  );\n\n  // function PrivateRoute(input) {\n  //   const { children, ...rest } = input;\n  //   const [cookies] = useCookies(['loggedin']);\n  //   return <Route {...rest} render={() => ((cookies.loggedin === '1' || loggedIn) ? (children) : (<Redirect to={{ pathname: `${Constants.APP_URL_PATH}login` }} />))} />;\n  // }\n  //\n  // function PublicRoute(input) {\n  //   const { children, ...rest } = input;\n  //   return <Route {...rest} render={() => (loggedIn ? (<Redirect to={{ pathname: `${Constants.APP_URL_PATH}` }} />) : (children))} />;\n  // }\n\n  function PrivateRoute({ children, ...rest }) {\n    const [cookies] = useCookies(['loggedin']);\n    return <Route {...rest} render={() => ((cookies.loggedin === '1' || loggedIn) ? (children) : (<Redirect to={{ pathname: `${Constants.APP_URL_PATH}login` }} />))} />;\n  }\n\n  function PublicRoute({ children, ...rest }) {\n    return <Route {...rest} render={() => (loggedIn ? (<Redirect to={{ pathname: `${Constants.APP_URL_PATH}` }} />) : (children))} />;\n  }\n}\n\nApp.propTypes = {\n  children: PropTypes.any,\n};\n\nexport default App;\n\n// TODO signupnal hibak, visszajelzesek\n","import produce from 'immer';\r\nimport {\r\n  actionLogIn, actionLoadUserData, actionLogOut, actionLoadPermissions,\r\n} from '../actions/actionTypes';\r\n\r\nconst defaultState = {\r\n  loggedIn: false,\r\n  userData: {\r\n    firstName: '',\r\n    lastName: '',\r\n  },\r\n  permissions: [],\r\n};\r\n\r\nconst userReducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionLogIn: case actionLoadUserData:\r\n      return produce(state, (draft) => {\r\n        draft.loggedIn = true;\r\n        draft.userData = action.payload;\r\n      });\r\n    case actionLogOut:\r\n      return defaultState;\r\n    case actionLoadPermissions:\r\n      return produce(state, (draft) => {\r\n        draft.permissions = action.payload;\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default userReducer;\r\n","import produce from 'immer';\r\nimport { actionLoadPosts, actionLoadPersons, actionLogOut } from '../actions/actionTypes';\r\n\r\nconst defaultState = {\r\n  posts: [],\r\n  persons: [],\r\n};\r\n\r\nconst staffReducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionLoadPosts:\r\n      return produce(state, (draft) => {\r\n        draft.posts = action.payload;\r\n      });\r\n    case actionLoadPersons:\r\n      return produce(state, (draft) => {\r\n        draft.persons = action.payload;\r\n      });\r\n    case actionLogOut:\r\n      return produce(state, (draft) => {\r\n        draft.persons = [];\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default staffReducer;\r\n","import produce from 'immer';\r\nimport {\r\n  actionLoadTeams, actionLoadContacts, actionLoadTeam, actionLoadPlayers, actionLogOut,\r\n} from '../actions/actionTypes';\r\n\r\nconst defaultState = {\r\n  teams: [],\r\n  contacts: {},\r\n  teamsData: {},\r\n  players: [],\r\n};\r\n\r\nconst teamsReducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionLoadTeams:\r\n      return produce(state, (draft) => {\r\n        draft.teams = action.payload;\r\n      });\r\n    case actionLoadContacts:\r\n      return produce(state, (draft) => {\r\n        draft.contacts = action.payload;\r\n      });\r\n    case actionLoadTeam:\r\n      return produce(state, (draft) => {\r\n        draft.teamsData[action.payload.team.id] = action.payload;\r\n      });\r\n    case actionLoadPlayers:\r\n      return produce(state, (draft) => {\r\n        draft.players = action.payload;\r\n      });\r\n    case actionLogOut:\r\n      return defaultState;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default  teamsReducer;\r\n","import produce from 'immer';\r\nimport {\r\n  actionLoadDays, actionLoadAllGames, actionLoadMyGames,\r\n  actionLogOut, actionSetCurrentGameTab, actionLoadGame,\r\n  actionLoadScores, actionLoadAllScores,\r\n} from '../actions/actionTypes';\r\n\r\nconst defaultState = {\r\n  days: [],\r\n  allGames: [],\r\n  myGames: [],\r\n  currentTab: '',\r\n  gamesData: {},\r\n  scores: {},\r\n  allScores: [],\r\n};\r\n\r\nconst eventReducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionLoadDays:\r\n      return produce(state, (draft) => {\r\n        draft.days = action.payload;\r\n      });\r\n    case actionLoadAllGames:\r\n      return produce(state, (draft) => {\r\n        draft.allGames = action.payload;\r\n      });\r\n    case actionLoadMyGames:\r\n      return produce(state, (draft) => {\r\n        draft.myGames = action.payload;\r\n      });\r\n    case actionSetCurrentGameTab:\r\n      return produce(state, (draft) => {\r\n        draft.currentTab = action.payload;\r\n      });\r\n    case actionLoadGame:\r\n      return produce(state, (draft) => {\r\n        draft.gamesData[action.payload.id] = action.payload;\r\n      });\r\n    case actionLoadScores:\r\n      return produce(state, (draft) => {\r\n        draft.scores[action.payload.gameId] = action.payload.scores;\r\n      });\r\n    case actionLoadAllScores:\r\n      return produce(state, (draft) => {\r\n        draft.allScores = action.payload;\r\n      });\r\n    case actionLogOut:\r\n      return defaultState;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default eventReducer;\r\n","import { combineReducers } from 'redux';\r\nimport userReducer from './userReducer';\r\nimport staffReducer from './staffRedurer';\r\nimport teamsReducer from './teamsReducer';\r\nimport eventReducer from './eventReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  user: userReducer,\r\n  staff: staffReducer,\r\n  teams: teamsReducer,\r\n  event: eventReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore } from 'redux';\r\nimport { CookiesProvider } from 'react-cookie';\r\nimport App from './App';\r\nimport rootReducer from './reducers';\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  // eslint-disable-next-line no-underscore-dangle\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\r\n);\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <CookiesProvider>\r\n        <App />\r\n      </CookiesProvider>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}