(this["webpackJsonphdn-organizer"]=this["webpackJsonphdn-organizer"]||[]).push([[0],{35:function(e,t,a){e.exports=a(47)},40:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),u=a.n(n),c=a(21),r=a.n(c),l=(a(40),a(3)),o=a(16),s=a(49),i=a(1),m=a(30),d=(a(45),a(6)),E=a(7),b=a(48),f=function(e){return{type:"LOAD_USER_DATA",payload:e}},p="/organizer/",v=function(e,t,a,n,u){return new Promise((function(c,r){var l={},o={method:t,credentials:"include"};a&&(o.body=JSON.stringify(a)),fetch(e,o).then((function(e){return l.status=e.status,e.json()})).then((function(e){e.succeed?"GET"===t?c(e.payload):c():e.authenticated?(l.message=e.message,e.inputErrors&&(l.inputErrors=e.inputErrors),console.log(l),r(l)):(u("loggedin",{path:"/"}),n({type:"LOG_OUT"}),l.message="Unauthenticated.",r(l))})).catch((function(e){console.log("Error: ".concat(e.message)),l.message="Failed to connect to the server.",r(l)}))}))},h=function(e,t,a){return new Promise((function(n,u){v(e,"GET",null,t,a).then((function(e){return n(e)})).catch((function(e){return u(e)}))}))},g=function(e,t,a){return new Promise((function(n,u){v(e,"DELETE",null,t,a).then((function(e){return n(e)})).catch((function(e){return u(e)}))}))},D=function(e,t,a,n){return new Promise((function(u,c){v(e,"PUT",t,a,n).then((function(e){return u(e)})).catch((function(e){return c(e)}))}))},A=function(e,t,a,n){return new Promise((function(u,c){v(e,"POST",t,a,n).then((function(e){return u(e)})).catch((function(e){return c(e)}))}))},C=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),o=Object(i.a)(r,2),s=o[0],m=o[1],d=Object(n.useState)(!1),v=Object(i.a)(d,2),g=v[0],D=v[1],C=Object(n.useState)(""),O=Object(i.a)(C,2),j=O[0],N=O[1],y=Object(b.a)(),F=y[1],w=y[2],S=Object(l.b)(),B=Object(E.g)();Object(n.useEffect)((function(){h("".concat("../","api/userData"),S,w).then((function(e){S({type:"LOG_IN"}),S(f(e))}))}),[S,w]);return u.a.createElement("div",{className:"container col-sm-4"},u.a.createElement("form",{onSubmit:function(e){e.preventDefault(),D(!0),A("".concat("../","api/login"),{username:a,password:s},S,w).then((function(){F("loggedin","1",{path:"/"}),S({type:"LOG_IN"})})).catch((function(e){D(!1),N(e.message)}))}},u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Username"),u.a.createElement("input",{onChange:function(e){c(e.target.value)},value:a,type:"text",className:"form-control",id:"exampleInputEmail1",placeholder:"Username"})),u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),u.a.createElement("input",{onChange:function(e){m(e.target.value)},value:s,type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password"})),u.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:g},g&&u.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Log In"),u.a.createElement("button",{onClick:function(){B.push("".concat(p,"registration"))},type:"button",className:"btn btn-link"},"Sign Up")),j&&u.a.createElement("div",{className:"alert alert-danger mt-5",role:"alert"},j))},O=a(13),j=a(2),N={allowEmpty:!1,message:"This field is required."},y={presence:N,length:{minimum:3,maximum:32,tooShort:"The name must be between 3 and 32 characters.",tooLong:"The name must be between 3 and 32 characters."},format:{pattern:"\\p{L}+",flags:"u",message:"The name must only contain alphabetical characters."}},F={firstName:y,lastName:y,email:{presence:N,email:{message:"Enter a valid email address."}},phone:{presence:N,length:{is:10,wrongLength:"Enter a valid phone number."},format:{pattern:"[0-9]+",message:"Enter a valid phone number."}},cnp:{presence:N,length:{is:13,wrongLength:"Enter a valid CNP."},cnp:!0},shirtType:{presence:N,selector:!0},shirtSize:{presence:N,selector:!0},username:{presence:N,length:{minimum:3,maximum:25,tooShort:"The username must be between 4 and 32 characters.",tooLong:"The username must be between 4 and 32 characters."},format:{pattern:"[a-z|0-9|\\.|_]+",message:"The usernames must only contain lowercase alphanumeric characters."}},password:{presence:N,length:{minimum:8,maximum:128,tooShort:"The password must be between 8 and 128 characters.",tooLong:"The password must be between 8 and 128 characters."},password:!0},confirmPassword:{presence:N,confirmPassword:!0}},w=a(18),S=a.n(w),B=[2,7,9,1,4,6,3,5,8,2,7,9],x=function(e){for(var t=[],a=0;a<13;a+=1)t[a]=parseInt(e[a],10);var n,u=10*t[1]+t[2];switch(t[0]){case 1:case 2:u+=1900;break;case 3:case 4:u+=1800;break;case 5:case 6:u+=2e3;break;default:return!1}switch(t[0]){case 1:case 3:case 5:n="Male";break;default:n="Female"}var c=10*t[3]+t[4],r=10*t[5]+t[6],l=S()("".concat(u,"/").concat(c,"/").concat(r),"YYYY/M/D",!0),o=S()(),s=S.a.duration(o.diff(l)),i=Math.floor(s.asYears());return{bornDate:l.format("YYYY-MMM-DD"),age:i,sex:n}},k=function(e){console.log("Pwd check with value: ".concat(e)),console.log(e);var t=0;return e.match(/(?:[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0560-\u0588\u10D0-\u10FA\u10FD-\u10FF\u13F8-\u13FD\u1C80-\u1C88\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7AF\uA7B5\uA7B7\uA7B9\uA7BB\uA7BD\uA7BF\uA7C3\uA7C8\uA7CA\uA7F6\uA7FA\uAB30-\uAB5A\uAB60-\uAB68\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]|\uD801[\uDC28-\uDC4F\uDCD8-\uDCFB]|\uD803[\uDCC0-\uDCF2]|\uD806[\uDCC0-\uDCDF]|\uD81B[\uDE60-\uDE7F]|\uD835[\uDC1A-\uDC33\uDC4E-\uDC54\uDC56-\uDC67\uDC82-\uDC9B\uDCB6-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDCEA-\uDD03\uDD1E-\uDD37\uDD52-\uDD6B\uDD86-\uDD9F\uDDBA-\uDDD3\uDDEE-\uDE07\uDE22-\uDE3B\uDE56-\uDE6F\uDE8A-\uDEA5\uDEC2-\uDEDA\uDEDC-\uDEE1\uDEFC-\uDF14\uDF16-\uDF1B\uDF36-\uDF4E\uDF50-\uDF55\uDF70-\uDF88\uDF8A-\uDF8F\uDFAA-\uDFC2\uDFC4-\uDFC9\uDFCB]|\uD83A[\uDD22-\uDD43])+/)&&(t+=1),e.match(/(?:[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1C90-\u1CBA\u1CBD-\u1CBF\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AE\uA7B0-\uA7B4\uA7B6\uA7B8\uA7BA\uA7BC\uA7BE\uA7C2\uA7C4-\uA7C7\uA7C9\uA7F5\uFF21-\uFF3A]|\uD801[\uDC00-\uDC27\uDCB0-\uDCD3]|\uD803[\uDC80-\uDCB2]|\uD806[\uDCA0-\uDCBF]|\uD81B[\uDE40-\uDE5F]|\uD835[\uDC00-\uDC19\uDC34-\uDC4D\uDC68-\uDC81\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB5\uDCD0-\uDCE9\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD38\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD6C-\uDD85\uDDA0-\uDDB9\uDDD4-\uDDED\uDE08-\uDE21\uDE3C-\uDE55\uDE70-\uDE89\uDEA8-\uDEC0\uDEE2-\uDEFA\uDF1C-\uDF34\uDF56-\uDF6E\uDF90-\uDFA8\uDFCA]|\uD83A[\uDD00-\uDD21])/)&&(t+=1),e.match(/[0-9]/)&&(t+=1),e.match(/[`~!@#$%^&*()\-_=+{}[\]\\|;:'",<.>/?]+/)&&(t+=1),t},T=function(e){var t=e.status,a=e.message;return u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("div",null,u.a.createElement("h1",{className:"text-center text-danger display-4"},"ERROR",t&&" ".concat(t)),u.a.createElement("h4",{className:"text-center text-danger"},a)))},L=function(){return u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("div",{className:"spinner-border text-primary",role:"status"},u.a.createElement("span",{className:"sr-only"},"Loading...")))},I=a(14),M=a(19),_=function(e){return e.trim()},R=function(e){return e.toLowerCase()},P=function(e){return e?e[0].toUpperCase()+e.slice(1).toLowerCase():e},z=function(e){return e.replace(/\s/g,"")},U=function(e){return u.a.createElement("div",{className:"card border-dark my-2 mx-3"},u.a.createElement("div",{className:"card-body"},u.a.createElement("h4",null,e.title),e.children))},G=function(e){return u.a.createElement("div",{className:"form-row"},e.children)},$=function(e){var t=e.children,a=e.mdSize,n=e.na,c=I(Object(O.a)({"form-group":!0},"col-md-".concat(a),a));return u.a.createElement("div",{ref:n,className:c},t)},Y=function(e){var t=e.type,a=e.id,n=e.label,c=e.state,r=e.setState,l=e.decorators,o=e.constraint,s=I({"form-control":!0,"is-invalid":c.error});return u.a.createElement(u.a.Fragment,null,u.a.createElement("label",{htmlFor:a},n),u.a.createElement("input",{onChange:function(e){var t=e.target.value;r((function(e){return Object(j.a)(Object(j.a)({},e),{},{value:t,error:""})}))},onBlur:function(){var e=c.value;if(l){for(var t=0;t<l.length;t+=1)e=l[t](e);r((function(t){return Object(j.a)(Object(j.a)({},t),{},{value:e})}))}var a=M({value:e},o,{fullMessages:!1});a&&r((function(e){return Object(j.a)(Object(j.a)({},e),{},{error:a.value[0]})}))},type:t,className:s,id:a,placeholder:n,value:c.value}),c.error&&u.a.createElement("div",{className:"invalid-feedback"},c.error))},V=function(e){var t=e.id,a=e.label,n=e.state,c=e.setState,r=e.constraint,l=I({"custom-select":!0,"is-invalid":n.error});return u.a.createElement(u.a.Fragment,null,u.a.createElement("label",{htmlFor:t},a),u.a.createElement("select",{onChange:function(e){var t=e.target.selectedIndex,a=e.target[t].id;c((function(e){return Object(j.a)(Object(j.a)({},e),{},{selectedId:a,error:""})}))},onBlur:function(){var e=n.selectedId,t=M({value:e},r,{fullMessages:!1});t&&c((function(e){return Object(j.a)(Object(j.a)({},e),{},{error:t.value[0]})}))},id:t,className:l},u.a.createElement("option",null),n.options.map((function(e){return u.a.createElement("option",{key:e.id,id:e.id},e.name)}))),n.error&&u.a.createElement("div",{className:"invalid-feedback"},n.error))},K=function(){var e=new URLSearchParams(Object(E.h)().search),t=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),a=Object(i.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),s=Object(i.a)(o,2),m=s[0],d=s[1],v=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),g=Object(i.a)(v,2),A=g[0],C=g[1],O=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),N=Object(i.a)(O,2),y=N[0],w=N[1],x=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),I=Object(i.a)(x,2),K=I[0],q=I[1],H=Object(n.useState)({selectedId:0,error:"",options:[],ref:u.a.createRef()}),X=Object(i.a)(H,2),J=X[0],W=X[1],Z=Object(n.useState)({selectedId:0,error:"",options:[],ref:u.a.createRef()}),Q=Object(i.a)(Z,2),ee=Q[0],te=Q[1],ae=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),ne=Object(i.a)(ae,2),ue=ne[0],ce=ne[1],re=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),le=Object(i.a)(re,2),oe=le[0],se=le[1],ie=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),me=Object(i.a)(ie,2),de=me[0],Ee=me[1],be=Object(n.useState)(!1),fe=Object(i.a)(be,2),pe=fe[0],ve=fe[1],he=Object(n.useState)(e.get("key")),ge=Object(i.a)(he,1)[0],De=Object(n.useState)({}),Ae=Object(i.a)(De,2),Ce=Ae[0],Oe=Ae[1],je=Object(n.useState)(!0),Ne=Object(i.a)(je,2),ye=Ne[0],Fe=Ne[1],we=Object(E.g)(),Se=Object(l.b)(),Be=Object(b.a)()[2];Object(n.useEffect)((function(){h("".concat("../","api/userData"),Se,Be).then((function(e){Se({type:"LOG_IN"}),Se(f(e))}))}),[Se,Be]),Object(n.useEffect)((function(){h("".concat("../","api/regKey?key=").concat(ge),Se,Be).then((function(e){e||Oe({message:"Invalid registration link."}),Fe(!1)}))}),[Se,ge,Be]);var xe={firstName:{state:c,setState:r,order:2},lastName:{state:m,setState:d,order:3},email:{state:A,setState:C,order:4},phone:{state:y,setState:w,order:5},cnp:{state:K,setState:q,order:6},shirtType:{state:J,setState:W,order:7},shirtSize:{state:ee,setState:te,order:8},username:{state:ue,setState:ce,order:9},password:{state:oe,setState:se,order:10},confirmPassword:{state:de,setState:Ee,order:11}};M.validators.cnp=function(e){if(!function(e){var t,a=0,n=[];if(13!==e.length)return!1;for(var u=0;u<13;u+=1){if(n[u]=parseInt(e[u],10),t=n[u],Number.isNaN(Number(t)))return!1;u<12&&(a+=n[u]*B[u])}10===(a%=11)&&(a=1);var c=10*n[1]+n[2];switch(n[0]){case 1:case 2:c+=1900;break;case 3:case 4:c+=1800;break;case 5:case 6:c+=2e3;break;default:return!1}var r=10*n[3]+n[4],l=10*n[5]+n[6];return n[12]===a&&S()("".concat(c,"/").concat(r,"/").concat(l),"YYYY/M/D",!0).isValid()}(e))return"Enter a valid CNP."},M.validators.password=function(e){if(k(e)<2)return"The password must contain at least two character categories among the following: uppercase characters, lowercase characters, digits, special characters."},M.validators.confirmPassword=function(e){if(e!==oe.value)return"Password doesn't match."},M.validators.selector=function(e){if(!e)return"This field is required."};Object(n.useEffect)((function(){h("".concat("../","api/shirtTypes"),Se,Be).then((function(e){W((function(t){return Object(j.a)(Object(j.a)({},t),{},{options:e})}))})).then((function(){return h("".concat("../","api/shirtSizes"),Se,Be)})).then((function(e){te((function(t){return Object(j.a)(Object(j.a)({},t),{},{options:e})}))})).catch((function(e){console.log(e.message)}))}),[Se,Be]);return Ce.message?u.a.createElement(T,{status:Ce.status,message:Ce.message}):ye?u.a.createElement(L,null):u.a.createElement("div",{className:"d-flex justify-content-center"},u.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=M({firstName:c.value,lastName:m.value,email:A.value,phone:y.value,cnp:K.value,shirtType:J.selectedId,shirtSize:ee.selectedId,username:ue.value,password:oe.value,confirmPassword:de.value},F,{fullMessages:!1});if(t){var a=999,n="";Object.entries(t).forEach((function(e){var t=Object(i.a)(e,2),u=t[0],c=t[1];xe[u].order<a&&(a=xe[u].order,n=u),xe[u].setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{error:c[0]})}))})),xe[n].state.ref.current.scrollIntoView({behavior:"smooth",block:"start"})}else{ve(!0);var u={regCode:ge,firstName:c.value,lastName:m.value,email:A.value,phone:y.value,cnp:K.value,shirtType:J.selectedId,shirtSize:ee.selectedId,username:ue.value,password:oe.value};D("".concat("../","api/signup?key=").concat(ge),u,Se,Be).then((function(){we.push("".concat(p,"login"))})).catch((function(e){if(ve(!1),e.inputErrors){var t=999,a="";Object.entries(e.inputErrors).forEach((function(e){var n=Object(i.a)(e,2),u=n[0],c=n[1];xe[u].order<t&&(t=xe[u].order,a=u),xe[u].setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{error:c})}))})),xe[a].state.ref.current.scrollIntoView({behavior:"smooth",block:"start"})}else console.log(e.message)}))}}},u.a.createElement(U,{title:"Personal data"},u.a.createElement(G,null,u.a.createElement($,{mdSize:"6",na:c.ref},u.a.createElement(Y,{type:"text",id:"inputFirstName",label:"First name",state:c,setState:r,constraint:{value:F.firstName},decorators:[_,P]})),u.a.createElement($,{mdSize:"6",na:m.ref},u.a.createElement(Y,{type:"text",id:"inputLastName",label:"Last name",state:m,setState:d,constraint:{value:F.lastName},decorators:[_,P]}))),u.a.createElement(G,null,u.a.createElement($,{mdSize:"6",na:A.ref},u.a.createElement(Y,{type:"text",id:"inputEmail",label:"Email",state:A,setState:C,constraint:{value:F.email},decorators:[_,R]})),u.a.createElement($,{mdSize:"6",na:y.ref},u.a.createElement(Y,{type:"text",id:"inputPhone",label:"Phone",state:y,setState:w,constraint:{value:F.phone},decorators:[z]}))),u.a.createElement($,{na:K.ref},u.a.createElement(Y,{type:"text",id:"inputCNP",label:"CNP",state:K,setState:q,constraint:{value:F.cnp},decorators:[_]})),u.a.createElement(G,null,u.a.createElement($,{mdSize:"6"},u.a.createElement(V,{id:"inputShirtType",label:"Shirt type",state:J,setState:W,constraint:{value:F.shirtType}})),u.a.createElement($,{mdSize:"6"},u.a.createElement(V,{id:"inputShirtSize",label:"Shirt size",state:ee,setState:te,constraint:{value:F.shirtSize}})))),u.a.createElement(U,{title:"User data"},u.a.createElement($,{na:ue.ref},u.a.createElement(Y,{type:"text",id:"inputUsername",label:"Username",state:ue,setState:ce,constraint:{value:F.username},decorators:[_,R]})),u.a.createElement(G,null,u.a.createElement($,{mdSize:"6",na:oe.ref},u.a.createElement(Y,{type:"password",id:"inputPassword",label:"Password",state:oe,setState:se,constraint:{value:F.password}})),u.a.createElement($,{mdSize:"6",na:de.ref},u.a.createElement(Y,{type:"password",id:"inputConfirmPassword",label:"Confirm password",state:de,setState:Ee,constraint:{value:F.confirmPassword}})))),u.a.createElement(U,{title:"Submit"},u.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:pe},pe&&u.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Sign Up"),u.a.createElement("button",{onClick:function(){we.push("".concat(p,"login"))},type:"button",className:"btn btn-outline-secondary ml-2"},"Back to log in"))))},q=function(e){return{type:"LOAD_PERSONS",payload:e}},H=function(e){var t=e.users,a=e.activePostId,n=e.searchValue,c=Object(l.c)((function(e){return e.user.userData.id})),r=Object(E.g)();return t.length>0?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"list-group mt-4 mx-2"},t.filter((function(e){return e.postId===a})).filter((function(e){return!n||(t="".concat(e.lastName," ").concat(e.firstName),a=n,t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().search(a.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase())>=0);var t,a})).filter((function(e){return e.id!==c})).map((function(e){return u.a.createElement("div",{key:e.id,className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center"},u.a.createElement("span",null,u.a.createElement("button",{onClick:function(){return r.push("".concat(p,"players/").concat(e.id))},className:"btn btn-link m-0 p-0"},e.lastName," ",e.firstName)),u.a.createElement("span",null,u.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-success dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Contact"),u.a.createElement("div",{className:"dropdown-menu"},u.a.createElement("a",{className:"dropdown-item",href:"tel:".concat(e.phone)},"Call"),u.a.createElement("a",{className:"dropdown-item",href:"sms:".concat(e.phone)},"SMS"),u.a.createElement("div",{className:"dropdown-divider"}),u.a.createElement("a",{className:"dropdown-item",href:"mailto:".concat(e.email)},"Email"))))})))):u.a.createElement("p",null,"Nothing to show.")},X=a(14),J=function(){var e=Object(l.c)((function(e){return e.staff.posts})),t=Object(l.c)((function(e){return e.staff.persons})),a=Object(n.useState)(0),c=Object(i.a)(a,2),r=c[0],o=c[1],s=Object(n.useState)({}),m=Object(i.a)(s,2),d=m[0],E=(m[1],Object(n.useState)("")),f=Object(i.a)(E,2),p=f[0],v=f[1],g=Object(l.b)(),D=Object(b.a)()[2];Object(n.useEffect)((function(){var e=function(){window.$("#exampleModal").modal("hide"),window.$("body").removeClass("modal-open"),window.$(".modal-backdrop").remove()};return window.onpopstate=e,function(){e(),window.onpopstate=function(){}}}),[]),Object(n.useEffect)((function(){h("".concat("../","api/posts"),g,D).then((function(e){g(function(e){return{type:"LOAD_POSTS",payload:e}}(e)),e.length>0&&o(e[0].id)})).then((function(){return h("".concat("../","api/users"),g,D)})).then((function(e){g(q(e))})).catch((function(e){console.log("Error: ".concat(e.message))}))}),[g,D]);return u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("div",{style:{width:500}},u.a.createElement("h1",{className:"text-center display-4"},"Staff"),u.a.createElement("div",{className:"form-group mx-2 mt-4"},u.a.createElement("input",{onChange:function(e){v(e.target.value)},className:"form-control",type:"text",placeholder:"Search",value:p})),u.a.createElement("div",{className:"list-group list-group-horizontal mx-2 mt-2",id:"list-tab",role:"tablist"},e.map((function(e){var t=X({btn:!0,"shadow-none":!0,"rounded-0":!0,"list-group-item":!0,active:r===e.id,"flex-fill":!0});return u.a.createElement("button",{key:e.id,onClick:function(){return t=e.id,void o(t);var t},className:t},e.name)}))),u.a.createElement(H,{users:t,activePostId:r,searchValue:p})),u.a.createElement("div",{className:"modal fade",id:"exampleModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},u.a.createElement("div",{className:"modal-dialog"},u.a.createElement("div",{className:"modal-content"},u.a.createElement("div",{className:"modal-header"},u.a.createElement("h4",null,d.lastName," ",d.firstName),u.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},u.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),u.a.createElement("div",{className:"modal-body"},u.a.createElement("a",{href:"tel:".concat(d.phone),className:"btn btn-lg btn-outline-primary"},"Call"),u.a.createElement("a",{href:"sms:".concat(d.phone),className:"btn btn-lg btn-outline-primary ml-2"},"SMS"),u.a.createElement("a",{href:"mailto:".concat(d.email),className:"btn btn-lg btn-outline-primary ml-2"},"E-mail"))))))},W=function(e){return{type:"LOAD_TEAMS",payload:e}},Z=function(){var e=Object(l.c)((function(e){return e.teams.teams})),t=Object(l.c)((function(e){return e.teams.contacts})),a=Object(l.b)(),c=Object(n.useState)({}),r=Object(i.a)(c,2),o=r[0],s=r[1],m=Object(n.useState)(!1),d=Object(i.a)(m,2),f=d[0],p=d[1],v=Object(b.a)()[2],g=Object(E.g)(),D=Object(E.j)().path;return Object(n.useEffect)((function(){0===e.length&&p(!0),h("".concat("../","api/teams"),a,v).then((function(e){a(W(e))})).then((function(){return h("".concat("../","api/leaderContacts"),a,v)})).then((function(e){p(!1),a(function(e){return{type:"LOAD_CONTACTS",payload:e}}(e))})).catch((function(e){p(!1),s(e)}))}),[a,v,e.length]),o.message?u.a.createElement(T,{status:o.status,message:o.message}):f?u.a.createElement(L,null):u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("div",{style:{width:500}},u.a.createElement("h1",{className:"text-center display-4 "},"Teams"),u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("a",{className:"btn btn-outline-primary ml-2",href:"mailto:".concat(t.email?t.email.join(","):"")},"Email to all leaders"),u.a.createElement("a",{className:"btn btn-outline-primary ml-2",href:"sms:".concat(t.email?t.phone.join(","):"")},"SMS to all leaders")),u.a.createElement("div",{className:"list-group mt-4 mx-2"},e.map((function(e){return u.a.createElement("div",{key:e.id,className:"list-group-item list-group-item-action"},u.a.createElement("button",{onClick:function(){return g.push("".concat(D,"/").concat(e.id))},type:"button",className:"btn btn-link m-0 p-0 stretched-link"},e.name))})))))},Q=function(e){var t=e.players,a=e.searchValue,n=e.withBadge,c=e.withAge,r=Object(E.g)();return t.length>0?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"list-group mt-4 mx-2"},t.filter((function(e){return!a||(t="".concat(e.lastName," ").concat(e.firstName),n=a,t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().search(n.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase())>=0);var t,n})).map((function(e){var t=x(e.cnp);return u.a.createElement("div",{key:e.id,className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center"},u.a.createElement("span",null,u.a.createElement("button",{onClick:function(){return r.push("".concat(p,"players/").concat(e.id))},className:"btn btn-link m-0 p-0"},e.lastName," ",e.firstName),n&&e.rankId>0&&u.a.createElement("span",{className:"badge badge-info ml-2"},2===e.rankId?"Leader":"Vice leader")),u.a.createElement("span",null,c&&u.a.createElement("span",{className:"badge badge-pill badge-".concat(t.age>=18?"success":"warning"," mr-2")},t.age),u.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-success dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Contact"),u.a.createElement("div",{className:"dropdown-menu"},u.a.createElement("a",{className:"dropdown-item",href:"tel:".concat(e.phone)},"Call"),u.a.createElement("a",{className:"dropdown-item",href:"sms:".concat(e.phone)},"SMS"),e.email&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"dropdown-divider"}),u.a.createElement("a",{className:"dropdown-item",href:"mailto:".concat(e.email)},"Email")))))})))):u.a.createElement("p",null,"Nothing to show.")},ee=function(){var e=Object(E.i)().id,t=Object(l.c)((function(e){return e.teams.teamsData})),a=Object(l.b)(),c=Object(n.useState)({}),r=Object(i.a)(c,2),o=r[0],s=r[1],m=Object(n.useState)(!1),d=Object(i.a)(m,2),f=d[0],p=d[1],v=Object(b.a)()[2];Object(n.useEffect)((function(){t[e]||p(!0),h("".concat("../","api/teams/").concat(e),a,v).then((function(e){p(!1),a({type:"LOAD_TEAM",payload:e})})).catch((function(e){p(!1),s({status:e.status,message:e.message})}))}),[a,e,v]);return o.message?u.a.createElement(T,{status:o.status,message:o.message}):f||!t[e]?u.a.createElement(L,null):function(){var a=t[e],n=a.players;return u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("div",{style:{width:500}},u.a.createElement("h2",{className:"text-center",style:{color:"#ffbc01"}},a.team.name),u.a.createElement("h6",{className:"text-center text-secondary"},a.team.city),u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("a",{className:"btn btn-outline-primary ml-2",href:"mailto:".concat(n?n.filter((function(e){return e.rankId>0})).map((function(e){return e.email})).join(","):"")},"Email to leaders"),u.a.createElement("a",{className:"btn btn-outline-primary ml-2",href:"sms:".concat(n?n.filter((function(e){return e.rankId>0})).map((function(e){return e.phone})).join(","):"")},"SMS to leaders")),u.a.createElement(Q,{players:n,withBadge:!0,withAge:!0})))}()},te=function(e){return u.a.createElement("div",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center"},u.a.createElement("p",{className:"p-0 m-0"},e.label),u.a.createElement("p",{className:"p-0 m-0"},e.value))},ae=function(){var e=Object(E.i)().id,t=Object(n.useState)({}),a=Object(i.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)({}),s=Object(i.a)(o,2),m=s[0],d=s[1],f=Object(l.b)(),p=Object(b.a)()[2];if(Object(n.useEffect)((function(){h("".concat("../","api/players/").concat(e),f,p).then((function(e){r(e)})).catch((function(e){d(e)}))}),[f,e,p]),!m.message){if(c.id){var v=x(c.cnp),g="";return 1===c.rankId&&(g=" (Vice leader)"),2===c.rankId&&(g=" (Leader)"),u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("div",{style:{width:500}},u.a.createElement("h2",{className:"text-center",style:{color:"#ffbc01"}},c.lastName," ",c.firstName),u.a.createElement("h5",{className:"text-center text-secondary"},c.team,g),u.a.createElement("div",{className:"list-group mt-4 mx-2"},u.a.createElement(te,{label:"Born date:",value:v.bornDate}),u.a.createElement(te,{label:"Age:",value:v.age}),u.a.createElement(te,{label:"Sex:",value:v.sex}),u.a.createElement(te,{label:"Phone:",value:c.phone}),c.email&&u.a.createElement(te,{label:"Email:",value:c.email}),u.a.createElement(te,{label:"CNP:",value:c.cnp})))))}return u.a.createElement("h1",null,"Loading")}return u.a.createElement(T,{status:m.status,message:m.message})},ne=function(){var e=Object(l.c)((function(e){return e.teams.players})),t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)({}),s=Object(i.a)(o,2),m=s[0],d=s[1],E=Object(l.b)(),f=Object(b.a)()[2];Object(n.useEffect)((function(){h("".concat("../","api/players"),E,f).then((function(e){E(function(e){return{type:"LOAD_PLAYERS",payload:e}}(e))})).catch((function(e){d(e)}))}),[E,f]);return m.message?u.a.createElement(T,{status:m.status,message:m.message}):u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("div",{style:{width:500}},u.a.createElement("h1",{className:"text-center display-4"},"Players"),u.a.createElement("div",{className:"form-group mx-2 mt-4"},u.a.createElement("input",{onChange:function(e){r(e.target.value)},className:"form-control",type:"text",placeholder:"Search",value:c})),u.a.createElement(Q,{players:e,withBadge:!1,searchValue:c,withAge:!0})))},ue=function(e){var t=e.game,a=e.reference,c=e.clickHandler,r=Object(n.useState)(""),l=Object(i.a)(r,2),o=l[0],s=l[1];return Object(n.useEffect)((function(){if(t.startTime){var e=t.startTime.split(/[- :]/),a=t.endTime.split(/[- :]/);s("".concat(e[3],":").concat(e[4]," - ").concat(a[3],":").concat(a[4]))}else s("No time set.")}),[t.startTime,t.endTime]),u.a.createElement("div",{onClick:c,ref:a,className:"card shadow-sm mt-2 clickable"},u.a.createElement("div",{className:"card-header bg-transparent py-1"},o),u.a.createElement("div",{className:"card-body pb-0"},u.a.createElement("h5",{className:"card-title"},t.name),u.a.createElement("p",{className:"card-text"},t.description),u.a.createElement("p",{className:"card-text mb-2"},u.a.createElement("small",{className:"text-muted"},t.owner.lastName," ",t.owner.firstName))))},ce=function(e){return{type:"LOAD_ALL_GAMES",payload:e}},re=function(e){return{type:"LOAD_MY_GAMES",payload:e}},le=function(e){return{type:"SET_CURRENT_GAME_TAB",payload:e}},oe=function(e){return{type:"LOAD_GAME",payload:e}},se=function(e,t){return{type:"LOAD_SCORES",payload:{gameId:e,scores:t}}};function ie(e){var t=e.element,a=e.useWindow;if("undefined"===typeof window)return{x:0,y:0};var n=(t?t.current:document.body).getBoundingClientRect();return a?{x:window.scrollX,y:window.scrollY}:{x:n.left,y:n.top}}var me=function(e,t,a,u,c){var r=Object(n.useRef)(ie({useWindow:u})),l=null,o=function(){var t=ie({element:a,useWindow:u});e({prevPos:r.current,currPos:t}),r.current=t,l=null};Object(n.useLayoutEffect)((function(){var e=function(){c?null===l&&(l=setTimeout(o,c)):o()};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),t)},de=a(14),Ee=function(){var e=Object(l.c)((function(e){return e.event.currentTab})),t=Object(l.c)((function(e){return e.event.days})),a=Object(l.c)((function(t){return"all"===e?t.event.allGames:t.event.myGames})),c=Object(n.useState)({}),r=Object(i.a)(c,2),o=r[0],s=r[1],m=Object(n.useState)([]),d=Object(i.a)(m,2),f=d[0],v=d[1],g=Object(l.b)(),D=Object(b.a)()[2],A=Object(n.useState)({}),C=Object(i.a)(A,2),O=C[0],N=C[1],y=Object(n.useState)([]),F=Object(i.a)(y,2),w=F[0],S=F[1],B=Object(n.useState)(0),x=Object(i.a)(B,2),k=x[0],L=x[1],I=Object(E.g)(),M=u.a.createRef();Object(n.useEffect)((function(){var t,a;"all"===e?(t="".concat("../","api/games"),a=ce):(t="".concat("../","api/games?own=true"),a=re),h("".concat("../","api/days"),g,D).then((function(e){g(function(e){return{type:"LOAD_DAYS",payload:e}}(e.map((function(e){return new Date(e)}))))})).then((function(){return h(t,g,D)})).then((function(e){g(a(e))})).catch((function(e){N(e)}))}),[g,e,D]);Object(n.useEffect)((function(){var e={},n=new Set(a.map((function(e){return new Date(e.startTime).getDate()}))),c=!1;t.forEach((function(t){var a=t.getDate();e[a]={num:a,name:t.toLocaleDateString("en-US",{weekday:"long"}),active:!1},e[a].disabled=!n.has(a),e[a].disabled||(e[a].ref=u.a.createRef(),c||(L(a),c=!0))}));var r=[],l=[],o=-1;a.forEach((function(t,a){var n=new Date(t.startTime).getDate();if(!t.startTime||0!==a&&n===o)r.push(Object(j.a)({},t));else if(r.push(Object(j.a)(Object(j.a)({},t),{},{ref:e[n].ref})),0===a)l.push({num:n});else{var c=u.a.createRef();r[a-1]=Object(j.a)(Object(j.a)({},r[a-1]),{},{ref:c}),l.push({num:n,ref:c})}o=n})),s(e),S(l),v(r)}),[e,t,a]),me((function(){if(w.length>0){var e=0;w.forEach((function(t,a){(0===a||t.ref.current.getBoundingClientRect().bottom-M.current.getBoundingClientRect().bottom<=0)&&(e=t.num)})),L(e)}}));return O.message?u.a.createElement(T,{status:O.status,message:O.message}):u.a.createElement(u.a.Fragment,null,u.a.createElement("nav",{ref:M,className:"navbar navbar-light bg-white sticky-top mt-2 border shadow-sm"},u.a.createElement("p",{className:"navbar-brand my-0"},"all"===e?"All games":"My games"),u.a.createElement("ul",{className:"nav nav-pills"},Object.values(o).map((function(e){var t=de({btn:!0,"btn-link":!0,"nav-link":!0,active:e.num===k});return u.a.createElement("li",{key:e.num,className:"nav-item"},u.a.createElement("button",{onClick:function(){return function(e){var t=M.current.getBoundingClientRect(),a=e.ref.current.getBoundingClientRect().top-t.bottom+t.top;window.scrollBy({top:a,behavior:"smooth"})}(e)},className:t,disabled:e.disabled},e.name))})))),u.a.createElement("div",null,f.map((function(e){return u.a.createElement(ue,{reference:e.ref,clickHandler:function(){return I.push("".concat(p,"games/").concat(e.id))},key:e.id,game:e})}))))},be=a(14),fe=function(e){var t=e.type,a=e.label,n=e.active,c=e.click,r=be({"nav-link":!0,btn:!0,"btn-link":!0,"shadow-none":!0,active:n});return u.a.createElement("li",{className:"nav-item"},u.a.createElement("button",{onClick:function(e){return c(e,t)},className:r,id:"".concat(t,"-tab"),"data-target":"#tab-content"},a))},pe=function(){var e=Object(l.c)((function(e){return e.user.permissions})),t=Object(E.g)(),a=Object(l.b)(),c=Object(n.useState)(!1),r=Object(i.a)(c,2),o=r[0],s=r[1];Object(n.useEffect)((function(){e.includes(3)?(s(!0),a(le("all"))):a(le("own"))}),[a,e]);var m=function(e,t){window.$("#".concat(e.target.id)).tab("show"),a(le(t))};return u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("div",{style:{width:500}},u.a.createElement("h1",{className:"text-center display-4"},"Games"),e.includes(2)&&u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("button",{onClick:function(){t.push("".concat(p,"addgame"))},type:"button",className:"btn btn-outline-primary"},"Add game")),u.a.createElement("ul",{className:"nav nav-tabs mt-4",id:"myTab",role:"tablist"},o&&u.a.createElement(fe,{type:"all",label:"All games",active:!0,click:m}),u.a.createElement(fe,{type:"own",label:"My games",active:!o,click:m})),u.a.createElement("div",{className:"tab-content",id:"myTabContent"},u.a.createElement("div",{className:"tab-pane fade show active",id:"tab-content"},u.a.createElement(Ee,null)))))},ve=a(18),he=function(e){return e.split(/[- :]/)},ge=function(e){return new Date(Date.UTC(e[0],e[1]-1,e[2],e[3],e[4],e[5]))},De=function(e){return new Date(e.getTime()+6e4*e.getTimezoneOffset())},Ae=function(e){return ve(De(ge(he(e)))).format("HH:mm")},Ce=function(e){return(t=he(e),new Date(Date.UTC(t[0],t[1]-1,t[2],0,0,0))).getTime();var t},Oe=a(14),je=function(e){return u.a.createElement("div",{className:"card border-gray my-2 mx-2"},u.a.createElement("div",{className:"card-body"},u.a.createElement("h4",null,e.title),e.children))},Ne=function(e){return u.a.createElement("div",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center"},u.a.createElement("p",{className:"p-0 m-0"},e.label),u.a.createElement("p",{className:"p-0 m-0"},e.value))},ye=function(e){var t=e.id,a=e.title,n=e.text,c=e.confirmBtnText,r=e.btnHandler,l=e.errorMessage,o=e.isDialogLoading,s=e.btnType;s||(s="primary");var i=Oe(Object(O.a)({btn:!0},"btn-".concat(s),!0));return u.a.createElement("div",{className:"modal fade",id:t,"data-backdrop":"static","data-keyboard":"false",tabIndex:"-1"},u.a.createElement("div",{className:"modal-dialog modal-dialog-scrollable"},u.a.createElement("div",{className:"modal-content"},u.a.createElement("div",{className:"modal-header"},u.a.createElement("h5",{className:"modal-title"},a),u.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},u.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),u.a.createElement("div",{className:"modal-body"},n),u.a.createElement("div",{className:"modal-footer"},u.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Cancel"),u.a.createElement("button",{onClick:function(){return r()},type:"button",className:i,disabled:o},o&&u.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),c)),l&&u.a.createElement("div",{className:"alert alert-danger mx-2",role:"alert"},l))))},Fe=function(){var e=Object(E.i)().id,t=Object(l.c)((function(e){return e.event.gamesData})),a=Object(l.c)((function(e){return e.staff.persons})),c=Object(l.b)(),r=Object(b.a)(),o=Object(E.g)(),s=r[2],m=Object(n.useState)(new Set),d=Object(i.a)(m,2),f=d[0],v=d[1],D=Object(n.useState)(!0),C=Object(i.a)(D,2),O=C[0],j=C[1],N=Object(n.useState)({id:0,firstName:"",lastName:""}),y=Object(i.a)(N,2),F=y[0],w=y[1],S=Object(n.useState)(!1),B=Object(i.a)(S,2),x=B[0],k=B[1],I=Object(n.useState)(""),M=Object(i.a)(I,2),_=M[0],R=M[1],P=Object(n.useState)({}),z=Object(i.a)(P,2),U=z[0],G=z[1],$=Object(n.useState)(!1),Y=Object(i.a)($,2),V=Y[0],K=Y[1];Object(n.useEffect)((function(){t[e]||K(!0),h("".concat("../","api/games/").concat(e),c,s).then((function(e){c(oe(e))})).then((function(){return h("".concat("../","api/users"),c,s)})).then((function(e){c(q(e)),K(!1)})).catch((function(e){G(e),K(!1)}))}),[c,t,e,s]),Object(n.useEffect)((function(){var e=function(){window.$("#listModal").modal("hide"),window.$("#moveOwnerDialog").modal("hide"),window.$("#deleteGameDialog").modal("hide"),window.$("body").removeClass("modal-open"),window.$(".modal-backdrop").remove()};return window.onpopstate=e,function(){e(),window.onpopstate=function(){}}}),[]);var H=function(e){var t=new Set(f);t.has(e.id)?t.delete(e.id):t.add(e.id),v(t)},X=function(n){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H;return u.a.createElement("div",{className:"list-group"},a.filter((function(a){return a.id!==t[e].ownerId})).map((function(e){return u.a.createElement("div",{onClick:function(){return c(e)},key:e.id,className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center clickable"},u.a.createElement("p",{className:"m-0 p-0"},e.lastName," ",e.firstName),n&&u.a.createElement("input",{onChange:function(){return H(e)},className:"form-check-input-lg",type:"checkbox",id:"ch-".concat(e.id),checked:f.has(e.id)}))})))},J=function(t){var a=t.errorMessage,n=t.isDialogLoading;return u.a.createElement("div",{className:"modal fade",id:"listModal","data-backdrop":"static","data-keyboard":"false",tabIndex:"-1"},u.a.createElement("div",{className:"modal-dialog modal-dialog-scrollable"},u.a.createElement("div",{className:"modal-content"},u.a.createElement("div",{className:"modal-header"},u.a.createElement("h5",{className:"modal-title"},O?"Select contributors":"Move ownership to:"),u.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",disabled:n},u.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),u.a.createElement("div",{className:"modal-body"},O?X(!0):X(!1,(function(e){R(""),w(e),window.$("#listModal").modal("hide"),window.$("#moveOwnerDialog").modal("show")}))),u.a.createElement("div",{className:"modal-footer"},u.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",disabled:n},"Close"),O&&u.a.createElement("button",{onClick:function(){k(!0),A("".concat("../","api/games/").concat(e,"/assignments"),Array.from(f),c,s).then((function(){k(!1),window.$("#listModal").modal("hide"),h("".concat("../","api/games/").concat(e),c,s).then((function(e){c(oe(e))})).catch((function(e){G(e)}))})).catch((function(e){k(!1),R(e.message)}))},type:"button",className:"btn btn-primary",disabled:n},n&&u.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Save changes"),";"),a&&u.a.createElement("div",{className:"alert alert-danger mx-2",role:"alert"},a))))};return U.message?u.a.createElement(T,{status:U.status,message:U.message}):V?u.a.createElement(L,null):t[e]?function(){var a,n=t[e];return u.a.createElement("div",{className:"d-flex justify-content-center mt-2"},u.a.createElement("div",{style:{width:500}},u.a.createElement("div",{className:"card text-center border-dark my-2 mx-2  px-2 sticky-top"},u.a.createElement("div",{className:"card-body"},u.a.createElement("h2",{className:"card-title"},n.name),u.a.createElement("div",{className:"d-flex justify-content-center mt-2"},u.a.createElement("button",{onClick:function(){o.push("".concat(p,"games/").concat(e,"/scores"))},className:"btn btn-primary"},"Add score"),n.permissions.includes("edit")&&u.a.createElement("button",{onClick:function(){o.push("".concat(p,"games/").concat(e,"/edit"))},className:"btn btn-outline-secondary ml-2"},"Edit game")))),n.description&&u.a.createElement(je,{title:"Description"},u.a.createElement("p",null,n.description)),n.notes&&u.a.createElement(je,{title:"Notes"},u.a.createElement("p",null,n.notes)),u.a.createElement(je,{title:"Details"},u.a.createElement("div",{className:"list-group mt-4 mx-2"},u.a.createElement(Ne,{label:"Owner:",value:"".concat(n.lastName," ").concat(n.firstName)}),n.location&&u.a.createElement(Ne,{label:"Location:",value:n.location}),u.a.createElement(Ne,{label:"Player count:",value:n.playerCount}),n.startTime&&u.a.createElement(u.a.Fragment,null,u.a.createElement(Ne,{label:"Day:",value:(a=n.startTime,De(ge(he(a))).toLocaleDateString("en-US",{weekday:"long"}))}),u.a.createElement(Ne,{label:"Time:",value:"".concat(Ae(n.startTime)," - ").concat(Ae(n.endTime))})))),(n.assignments.length>0||n.permissions.includes("admin"))&&u.a.createElement(je,{title:"Contributors"},u.a.createElement("div",{className:"d-flex flex-wrap"},n.assignments.map((function(e){return u.a.createElement("div",{key:e.id,style:{background:"#17a2b8",color:"white",fontSize:"small"},className:"rounded px-2 py-1 mt-1 ml-1"},u.a.createElement("b",null,e.lastName," ",e.firstName))}))),n.permissions.includes("admin")&&u.a.createElement("button",{onClick:function(){R(""),j(!0);var e=new Set;n.assignments.forEach((function(t){return e.add(t.id)})),v(e)},className:"btn btn-link mt-2","data-toggle":"modal","data-target":"#listModal"},"Edit contributors")),n.permissions.includes("admin")&&u.a.createElement(je,{title:"Administration"},u.a.createElement("button",{onClick:function(){return j(!1)},className:"btn btn-outline-danger","data-toggle":"modal","data-target":"#listModal"},"Move ownership"),u.a.createElement("button",{onClick:function(){R(""),window.$("#deleteGameDialog").modal("show")},className:"btn btn-outline-danger ml-2"},"Delete game"))),J({errorMessage:_,isDialogLoading:x}),u.a.createElement(ye,{errorMessage:_,isDialogLoading:x,id:"moveOwnerDialog",title:"Move ownership",text:u.a.createElement(u.a.Fragment,null,"Do you want to move ",u.a.createElement("b",null,n.name),"'s ownership to ",u.a.createElement("b",null,F.lastName," ",F.firstName,"?")),confirmBtnText:"Move",btnHandler:function(){var t;t=F.id,k(!0),A("".concat("../","api/games/").concat(e,"/moveOwner"),t,c,s).then((function(){k(!1),o.push("".concat(p,"games"))})).catch((function(e){k(!1),R(e.message)}))}}),u.a.createElement(ye,{errorMessage:_,isDialogLoading:x,id:"deleteGameDialog",title:"Delete game",text:u.a.createElement(u.a.Fragment,null,"Do you want to delete ",u.a.createElement("b",null,n.name),"?"),confirmBtnText:"Delete",btnType:"danger",btnHandler:function(){console.log("Delete game ".concat(n.name)),k(!0),g("".concat("../","api/games/").concat(e),c,s).then((function(){k(!1),o.push("".concat(p,"games"))})).catch((function(e){k(!1),R(e.message)}))}}))}():u.a.createElement(L,null)},we={allowEmpty:!1,message:"This field is required."},Se={length:{maximum:1024,tooLong:"Max length of this field is 1024 characters."}},Be={title:{presence:we,length:{minimum:3,maximum:32,tooShort:"The title must be between 3 and 32 characters.",tooLong:"The title must be between 3 and 32 characters."}},playerCount:{numericality:{onlyInteger:!0,strict:!0,greaterThanOrEqualTo:0,lessThanOrEqualTo:16,message:"Player count must be between 0 and 16."}},description:Se,notes:Se,location:{length:{maximum:32,tooLong:"The location must be between 3 and 32 characters."}},day:{presence:we,selector:!0},startTime:{presence:we,format:{pattern:"[0-9]{2}:[0-9]{2}",message:"Enter a valid time"}},endTime:{presence:we,format:{pattern:"([0-1]?[0-9]|2[0-3]):[0-5][0-9]",message:"Enter a valid time"}}},xe=a(19),ke=a(14),Te=function(e){return u.a.createElement("div",{className:"card border-dark my-2 mx-3"},u.a.createElement("div",{className:"card-body"},u.a.createElement("h4",null,e.title),e.children))},Le=function(e){return u.a.createElement("div",{className:"form-row"},e.children)},Ie=function(e){var t=e.children,a=e.mdSize,n=e.na,c=ke(Object(O.a)({"form-group":!0},"col-md-".concat(a),a));return u.a.createElement("div",{ref:n,className:c},t)},Me=function(e){var t=e.type,a=e.id,n=e.label,c=e.state,r=e.setState,l=e.decorators,o=e.rows,s=e.constraint,i=e.disabled,m=function(e){var t=e.target.value;r((function(e){return Object(j.a)(Object(j.a)({},e),{},{value:t,error:""})}))},d=function(){var e=c.value;if(l){for(var t=0;t<l.length;t+=1)e=l[t](e);r((function(t){return Object(j.a)(Object(j.a)({},t),{},{value:e})}))}var a=xe({value:e},s,{fullMessages:!1});a&&r((function(e){return Object(j.a)(Object(j.a)({},e),{},{error:a.value[0]})}))},E=ke({"form-control":!0,"is-invalid":!i&&c.error});return u.a.createElement(u.a.Fragment,null,u.a.createElement("label",{htmlFor:a},n),o?u.a.createElement("textarea",{onChange:m,onBlur:d,rows:o,className:E,id:a,placeholder:n,value:c.value,disabled:i}):u.a.createElement("input",{onChange:m,onBlur:d,type:t,className:E,id:a,placeholder:n,value:c.value,disabled:i}),!i&&c.error&&u.a.createElement("div",{className:"invalid-feedback"},c.error))},_e=function(e){var t=e.id,a=e.label,n=e.state,c=e.setState,r=e.selected,l=e.setSelected,o=e.constraint,s=e.disabled,i=ke({"custom-select":!0,"is-invalid":!s&&n.error});return u.a.createElement(u.a.Fragment,null,u.a.createElement("label",{htmlFor:t},a),u.a.createElement("select",{onChange:function(e){var t=e.target.selectedIndex,a=e.target[t].id;l(Number.parseInt(a,10)),c((function(e){return Object(j.a)(Object(j.a)({},e),{},{error:""})}))},onBlur:function(){var e=xe({value:r},o,{fullMessages:!1});e&&c((function(t){return Object(j.a)(Object(j.a)({},t),{},{error:e.value[0]})}))},id:t,className:i,disabled:s,value:function(){if(0===r)return"";for(var e=0;e<n.options.length;e+=1)if(n.options[e].id===r)return console.log(n.options[e].name),n.options[e].name;return""}()},u.a.createElement("option",{value:""}),n.options.map((function(e){return u.a.createElement("option",{key:e.id,id:e.id},e.name)}))),!s&&n.error&&u.a.createElement("div",{className:"invalid-feedback"},n.error))},Re=function(e){var t=e.id,a=e.label,n=e.state,c=e.setState,r=e.constraint,l=e.min,o=e.max,s=ke({"form-control-range":!0,"is-invalid":n.error});return u.a.createElement(u.a.Fragment,null,u.a.createElement("label",{htmlFor:t},a,": ",u.a.createElement("b",null,n.value)),u.a.createElement("input",{onChange:function(e){var t=e.target.value;c((function(e){return Object(j.a)(Object(j.a)({},e),{},{value:t,error:""})}));var a=xe({value:t},r,{fullMessages:!1});a&&c((function(e){return Object(j.a)(Object(j.a)({},e),{},{error:a.value[0]})}))},min:l,max:o,type:"range",className:s,id:t,value:n.value}),n.error&&u.a.createElement("div",{className:"invalid-feedback"},n.error))},Pe=function(e){var t=e.edit,a=Object(E.i)().id,c=Object(l.c)((function(e){return e.event.gamesData})),r=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),o=Object(i.a)(r,2),s=o[0],m=o[1],d=Object(n.useState)({value:0,error:"",ref:u.a.createRef()}),f=Object(i.a)(d,2),v=f[0],g=f[1],C=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),O=Object(i.a)(C,2),N=O[0],y=O[1],F=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),w=Object(i.a)(F,2),S=w[0],B=w[1],x=Object(n.useState)({options:[],error:"",ref:u.a.createRef()}),k=Object(i.a)(x,2),T=k[0],L=k[1],I=Object(n.useState)(0),M=Object(i.a)(I,2),_=M[0],R=M[1],P=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),z=Object(i.a)(P,2),U=z[0],G=z[1],$=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),Y=Object(i.a)($,2),V=Y[0],K=Y[1],q=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),H=Object(i.a)(q,2),X=H[0],J=H[1],W=Object(n.useState)(!1),Z=Object(i.a)(W,2),Q=Z[0],ee=Z[1],te=Object(n.useState)(!1),ae=Object(i.a)(te,2),ne=ae[0],ue=ae[1],ce={title:{state:s,setState:m,order:1},playerCount:{state:v,setState:g,order:2},description:{state:N,setState:y,order:3},notes:{state:S,setState:B,order:4},location:{state:X,setState:J,order:5},day:{state:T,setState:L,order:6},startTime:{state:U,setState:G,order:7},endTime:{state:V,setState:K,order:8}},re=Object(l.b)(),le=Object(E.g)(),se=Object(b.a)()[2];xe.validators.selector=function(e){if(!e)return"This field is required."},Object(n.useEffect)((function(){t&&h("".concat("../","api/games/").concat(a),re,se).then((function(e){re(oe(e))})).catch((function(e){console.log(e.message)}))}),[t,re,a,se]),Object(n.useEffect)((function(){t&&c[a]&&(m(Object(j.a)(Object(j.a)({},s),{},{value:c[a].name})),g(Object(j.a)(Object(j.a)({},v),{},{value:c[a].playerCount})),c[a].description&&y(Object(j.a)(Object(j.a)({},s),{},{value:c[a].description})),c[a].notes&&B(Object(j.a)(Object(j.a)({},S),{},{value:c[a].notes})),c[a].location&&J(Object(j.a)(Object(j.a)({},X),{},{value:c[a].location})),c[a].startTime?(ee(!1),R(Ce(c[a].startTime)),G(Object(j.a)(Object(j.a)({},U),{},{value:Ae(c[a].startTime)})),K(Object(j.a)(Object(j.a)({},V),{},{value:Ae(c[a].endTime)}))):ee(!0))}),[t,c,a]),Object(n.useEffect)((function(){h("".concat("../","api/days"),re,se).then((function(e){L(Object(j.a)(Object(j.a)({},T),{},{options:e.map((function(e){var t=new Date(e),a=new Date(t.getTime()+6e4*t.getTimezoneOffset());return{id:t.getTime(),name:a.toLocaleDateString("en-US",{weekday:"long"})}}))}))})).catch((function(e){console.log("Error: ".concat(e.message))}))}),[re,se]);var ie=function(e){return 0===e.trim().length?null:e},me=function(e){return e.toISOString().slice(0,16).replace("T"," ")};return u.a.createElement("div",{className:"d-flex justify-content-center"},u.a.createElement("div",{style:{width:500}},u.a.createElement("form",null,u.a.createElement(Te,{title:"Game data"},u.a.createElement(Ie,{na:s.ref},u.a.createElement(Me,{type:"text",id:"inputTitle",label:"Title",state:s,setState:m,constraint:{value:Be.title}})),u.a.createElement(Ie,{na:v.ref},u.a.createElement(Re,{id:"inputPlayerCount",label:"Player count",state:v,setState:g,constraint:{value:Be.playerCount},min:0,max:16})),u.a.createElement(Ie,{na:N.ref},u.a.createElement(Me,{rows:"4",id:"inputDescription",label:"Description",state:N,setState:y,constraint:{value:Be.description}})),u.a.createElement(Ie,{na:S.ref},u.a.createElement(Me,{rows:"4",id:"inputNotes",label:"Notes",state:S,setState:B,constraint:{value:Be.notes}})),u.a.createElement(Ie,{na:X.ref},u.a.createElement(Me,{type:"text",id:"inputLocation",label:"Location",state:X,setState:J,constraint:{value:Be.location}}))),u.a.createElement(Te,{title:"Game time"},u.a.createElement(Le,null,u.a.createElement(Ie,{mdSize:"4",na:T.ref},u.a.createElement(_e,{id:"inputDay",label:"Day",state:T,setState:L,selected:_,setSelected:R,constraint:{value:Be.day},disabled:Q})),u.a.createElement(Ie,{mdSize:"4",na:U.ref},u.a.createElement(Me,{type:"time",id:"inputStartTime",label:"Start time",state:U,setState:G,constraint:{value:Be.time},disabled:Q})),u.a.createElement(Ie,{mdSize:"4",na:V.ref},u.a.createElement(Me,{type:"time",id:"inputEndTime",label:"End time",state:V,setState:K,constraint:{value:Be.time},disabled:Q}))),u.a.createElement("div",{className:"form-check"},u.a.createElement("input",{onChange:function(e){ee(e.target.checked)},className:"form-check-input",type:"checkbox",id:"inputTimeLater",checked:Q}),u.a.createElement("label",{className:"form-check-label",htmlFor:"inputTimeLater"},"Add later"))),u.a.createElement(Te,{title:"Submit"},u.a.createElement("button",{onClick:function(){return function(){var e={title:s.value,playerCount:v.value,description:N.value,notes:S.value,location:X.value},n=Object(j.a)({},Be);Q?(delete n.day,delete n.startTime,delete n.endTime):e=Object(j.a)(Object(j.a)({},e),{},{day:_,startTime:U.value,endTime:V.value}),console.log(e);var u=xe(e,n,{fullMessages:!1});if(u){console.log(u);var c=999,r="";Object.entries(u).forEach((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];ce[a].order<c&&(c=ce[a].order,r=a),ce[a].setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{error:n[0]})}))})),ce[r].state.ref.current.scrollIntoView({behavior:"smooth",block:"start"})}else{console.log("Adding game");var l={title:s.value,playerCount:v.value,description:ie(N.value),notes:ie(S.value),location:ie(X.value)};if(Q)l.startTime=null,l.endTime=null;else{var o=_,m=U.value.split(":"),d=V.value.split(":"),E=36e5*Number.parseInt(m[0],10)+6e4*Number.parseInt(m[1],10),b=36e5*Number.parseInt(d[0],10)+6e4*Number.parseInt(d[1],10),f=new Date(o+E),h=new Date(b>E?o+b:o+864e5+b);l.startTime=me(f),l.endTime=me(h)}var g=t?"".concat("../","api/games/").concat(a):"".concat("../","api/games");ue(!0),(t?A:D)(g,l,re,se).then((function(){ue(!1),le.replace(t?"".concat(p,"games/").concat(a):"".concat(p,"games"))})).catch((function(e){if(ue(!1),e.inputErrors){var t=999,a="";Object.entries(e.inputErrors).forEach((function(e){var n=Object(i.a)(e,2),u=n[0],c=n[1];ce[u].order<t&&(t=ce[u].order,a=u),ce[u].setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{error:c})}))})),ce[a].state.ref.current.scrollIntoView({behavior:"smooth",block:"start"})}else console.log(e.message)}))}}()},type:"button",className:"btn btn-primary",disabled:ne},ne&&u.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),t?"Edit game":"Save game")))))},ze=a(14),Ue=function(){var e=Object(E.i)().id,t=Object(l.c)((function(t){return t.event.gamesData[e]})),a=Object(l.c)((function(e){return e.teams.teams})),c=Object(l.c)((function(e){return e.event.scores})),r=Object(n.useState)([]),o=Object(i.a)(r,2),s=o[0],m=o[1],d=Object(n.useState)(""),f=Object(i.a)(d,2),p=f[0],v=f[1],C=Object(l.b)(),O=Object(b.a)()[2],N=Object(n.useState)(null),y=Object(i.a)(N,2),F=y[0],w=y[1],S=Object(n.useState)(""),B=Object(i.a)(S,2),x=B[0],k=B[1],I=Object(n.useState)(!1),M=Object(i.a)(I,2),_=M[0],R=M[1],P=Object(n.useState)(!1),z=Object(i.a)(P,2),U=z[0],G=z[1],$=Object(n.useState)({}),Y=Object(i.a)($,2),V=Y[0],K=Y[1],q=Object(n.useState)(!1),H=Object(i.a)(q,2),X=H[0],J=H[1],Z=Object(n.useState)(!1),Q=Object(i.a)(Z,2),ee=Q[0],te=Q[1],ae=Object(n.useState)(""),ne=Object(i.a)(ae,2),ue=ne[0],ce=ne[1],re=Object(n.useState)(""),le=Object(i.a)(re,2),ie=le[0],me=le[1],de=function(e,t){var a=e.score||0===e.score,n=t.score||0===t.score;return a?n?e.score>t.score?-1:e.score<t.score?1:e.fairplay?t.fairplay?0:-1:t.fairplay?1:0:1:n?-1:0};Object(n.useEffect)((function(){J(!0),h("".concat("../","api/games/").concat(e),C,O).then((function(e){C(oe(e))})).then((function(){return h("".concat("../","api/teams"),C,O).then((function(e){C(W(e))})).then((function(){return h("".concat("../","api/games/").concat(e,"/scores"),C,O).then((function(t){C(se(e,t)),J(!1)}))}))})).catch((function(e){K(e),J(!1)}))}),[C,e,O]),Object(n.useEffect)((function(){var t=c[e],n=[];if(a.length>0&&t){var u={};t.forEach((function(e){u[e.teamId]={score:e.score,fairplay:e.fairplay}})),a.forEach((function(e){var t=u[e.id];t?n.push(Object(j.a)(Object(j.a)({},e),{},{score:t.score,fairplay:t.fairplay})):n.push(Object(j.a)({},e))})),v("".concat(t.length,"/").concat(a.length," scored")),m(n.sort(de))}}),[e,c,a]),Object(n.useEffect)((function(){var e=function(){window.$("#scoreModal").modal("hide"),window.$("body").removeClass("modal-open"),window.$(".modal-backdrop").remove()};return window.onpopstate=e,function(){e(),window.onpopstate=function(){}}}),[]);var Ee=function(){if(function(e){var t=String(e),a=Math.floor(Number(t));return a!==1/0&&String(a)===t&&a>=0}(x)){te(!0);var t={teamId:F,score:Number(x),fairplay:_};(U?A:D)("".concat("../","api/games/").concat(e,"/scores"),t,C,O).then((function(){window.$("#scoreModal").modal("hide"),te(!1),h("".concat("../","api/games/").concat(e,"/scores"),C,O).then((function(t){C(se(e,t))})).catch((function(e){K(e)}))})).catch((function(e){ce(e.message),te(!1)}))}else me("Enter a number greater than or equal to 0.")},be=function(){te(!0),g("".concat("../","api/games/").concat(e,"/scores/").concat(F),C,O).then((function(){window.$("#scoreModal").modal("hide"),te(!1),h("".concat("../","api/games/").concat(e,"/scores"),C,O).then((function(t){C(se(e,t))})).catch((function(e){K(e)}))})).catch((function(e){ce(e.message),te(!1)}))};return V.message?u.a.createElement(T,{status:V.status,message:V.message}):X?u.a.createElement(L,null):u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("div",{style:{width:500}},t&&u.a.createElement("h2",{className:"text-center"},t.name),u.a.createElement("h5",{className:"text-center"},p),u.a.createElement("div",{className:"list-group mt-4 mx-2"},s.length>0&&s.map((function(e){return u.a.createElement("div",{key:e.id,className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center clickable",onClick:function(){te(!1),ce(""),w(e.id),e.score||0===e.score?(G(!0),k(e.score),R(Boolean(e.fairplay))):(G(!1),k(""),R(!1)),window.$("#scoreModal").modal("show")}},u.a.createElement("span",null,u.a.createElement("p",{className:"m-0 p-0"},e.name)),u.a.createElement("span",null,1===e.fairplay&&u.a.createElement("span",{className:"badge badge-pill badge-success mr-2"},"fair"),(e.score||0===e.score)&&u.a.createElement("span",null,u.a.createElement("b",null,e.score))))})))),u.a.createElement("div",{className:"modal fade",id:"scoreModal","data-backdrop":"static","data-keyboard":"false",tabIndex:"-1"},u.a.createElement("div",{className:"modal-dialog"},u.a.createElement("div",{className:"modal-content"},u.a.createElement("div",{className:"modal-header"},u.a.createElement("h5",{className:"modal-title"},"Score"),u.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",disabled:ee},u.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),u.a.createElement("div",{className:"modal-body"},u.a.createElement("div",{className:"form-row"},u.a.createElement("div",{className:"form-group col-md-6"},function(){var e=ze({"form-control":!0,"is-invalid":ie});return u.a.createElement(u.a.Fragment,null,u.a.createElement("input",{autoComplete:"off",onChange:function(e){me(""),k(e.target.value)},type:"number",min:"0",className:e,id:"input_score",placeholder:"Score",value:x,disabled:ee}),ie&&u.a.createElement("div",{className:"invalid-feedback"},ie))}()),u.a.createElement("div",{className:"form-group col-md-6 align-self-center"},u.a.createElement("div",{className:"form-check"},u.a.createElement("input",{onChange:function(e){R(e.target.checked)},autoComplete:"off",type:"checkbox",className:"form-check-input",id:"input_fairplay",checked:_,disabled:ee}),u.a.createElement("label",{className:"form-check-label",htmlFor:"input_fairplay"},"Fair play"))))),u.a.createElement("div",{className:"modal-footer"},u.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",disabled:ee},"Close"),U&&u.a.createElement("button",{onClick:be,type:"button",className:"btn btn-danger",disabled:ee},ee&&u.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Delete score"),u.a.createElement("button",{onClick:Ee,type:"button",className:"btn btn-primary",disabled:ee},ee&&u.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),U?"Edit score":"Save score")),ue&&u.a.createElement("div",{className:"alert alert-danger mx-2",role:"alert"},ue)))))},Ge=function(){var e=Object(l.c)((function(e){return e.teams.teams})),t=Object(l.c)((function(e){return e.event.allScores})),a=Object(l.b)(),c=Object(b.a)()[2];return Object(n.useEffect)((function(){h("".concat("../","api/teams"),a,c).then((function(e){a(W(e))})).then((function(){return h("".concat("../","api/scores"),a,c)})).then((function(e){a(function(e){return{type:"LOAD_ALL_SCORES",payload:e}}(e))})).catch((function(e){console.log(e.message)}))}),[a,c]),u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"table-responsive"},u.a.createElement("table",{className:"table table-sm table-dark table-striped sticky-header"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",{scope:"col"},"Games"),e.map((function(e){return u.a.createElement("th",{key:e.id,scope:"col",className:"text-center"},e.name)})))),u.a.createElement("tbody",null,t.map((function(t){return u.a.createElement("tr",{key:t.id},u.a.createElement("th",{scope:"row"},t.name),e.map((function(e){return t.scores[e.id]?u.a.createElement("td",{key:e.id,className:"text-center"},t.scores[e.id].score):u.a.createElement("td",{key:e.id,className:"text-center"},"-")})))}))))))},$e=a(4),Ye=function(e){return{type:"LOAD_INVITATIONS",payload:e}},Ve=function(e){return{type:"LOAD_EVENTS",payload:e}},Ke={allowEmpty:!1,message:"This field is required."},qe={presence:Ke,selector:!0},He={name:{presence:Ke,length:{minimum:3,maximum:16,tooShort:"The title must be between 3 and 16 characters.",tooLong:"The title must be between 3 and 16 characters."}},event:qe,post:qe,role:qe},Xe=a(19),Je=a(14),We=function(e){return u.a.createElement("div",{className:"form-row"},e.children)},Ze=function(e){var t=e.children,a=e.size,n=e.na,c=Je(Object(O.a)({"form-group":!0},"col-md-".concat(a),a));return u.a.createElement("div",{ref:n,className:c},t)},Qe=function(e){var t=e.contextual,a=e.id,n=e.label,c=e.inputKey,r=e.decorators,l=e.constraint,o=e.type,s=t.inputs,i=t.setInputs,m=t.isLoading,d=s[c],E=d.value,b=d.error;o||(o="text");var f=Je({"form-control":!0,"is-invalid":b});return u.a.createElement(u.a.Fragment,null,u.a.createElement("label",{htmlFor:a},n),u.a.createElement("input",{autoComplete:"off",onChange:function(e){i(Object($e.a)(s,(function(t){t[c].error="",t[c].value=e.target.value})))},onBlur:function(){var e=E;if(r&&r.forEach((function(t){e=t(e)})),l){var t=Xe({value:e},l,{fullMessages:!1}),a=t?t.value[0]:"";(e!==E||a)&&i(Object($e.a)(s,(function(t){t[c].value=e,t[c].error=a})))}console.log(s[c].value)},type:o,className:f,id:a,placeholder:n,value:E,disabled:m}),b&&u.a.createElement("div",{className:"invalid-feedback"},b))},et=function(e){var t=e.contextual,a=e.id,n=e.label,c=e.inputKey,r=e.constraint,l=t.inputs,o=t.setInputs,s=t.isLoading,m=l[c],d=m.value,E=m.error,b=Je({"custom-select":!0,"is-invalid":E});return u.a.createElement(u.a.Fragment,null,u.a.createElement("label",{htmlFor:a},n),u.a.createElement("select",{onChange:function(e){var t=e.target.selectedIndex,a=e.target[t].id;o(Object($e.a)(l,(function(e){e[c].error="",e[c].value=a})))},onBlur:function(){var e=Xe({value:d},r,{fullMessages:!1});e&&o(Object($e.a)(l,(function(t){var a=Object(i.a)(e.value,1);t[c].error=a[0]})))},id:a,className:b,disabled:s},u.a.createElement("option",{value:""}),l[c].options.map((function(e){return u.a.createElement("option",{key:e.id,id:e.id},e.name)}))),E&&u.a.createElement("div",{className:"invalid-feedback"},E))},tt=function(e){var t=e.id,a=e.title,n=e.body,c=e.footer,r=e.isLoading,l=e.error;return u.a.createElement("div",{className:"modal fade",id:t,"data-backdrop":"static","data-keyboard":"false",tabIndex:"-1"},u.a.createElement("div",{className:"modal-dialog"},u.a.createElement("div",{className:"modal-content"},u.a.createElement("div",{className:"modal-header"},u.a.createElement("h5",{className:"modal-title"},a),u.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",disabled:r},u.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),u.a.createElement("div",{className:"modal-body"},n),u.a.createElement("div",{className:"modal-footer"},c),l&&u.a.createElement("div",{className:"alert alert-danger mx-2",role:"alert"},l))))},at=a(19),nt={name:{value:"",error:""},event:{value:0,options:[],error:""},post:{value:0,options:[],error:""},role:{value:0,options:[],error:""},singleUse:!0},ut=function(){var e=Object(l.c)((function(e){return e.system.invitations})),t=Object(n.useState)(nt),a=Object(i.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),m=s[0],d=s[1],E=Object(n.useState)(""),f=Object(i.a)(E,2),p=f[0],v=f[1],g=Object(n.useState)({}),A=Object(i.a)(g,2),C=A[0],O=A[1],N=Object(n.useState)(!1),y=Object(i.a)(N,2),F=y[0],w=y[1],S=Object(l.b)(),B=Object(b.a)()[2],x=function(e){return e.trim()};at.validators.selector=function(e){if(!e)return"This field is required."},Object(n.useEffect)((function(){var e=function(){window.$("#addInvModal").modal("hide"),window.$("body").removeClass("modal-open"),window.$(".modal-backdrop").remove()};return window.onpopstate=e,function(){e(),window.onpopstate=function(){}}}),[]),Object(n.useEffect)((function(){w(!0),h("".concat("../","api/invitations"),S,B).then((function(e){S(Ye(e)),w(!1)})).catch((function(e){O(e),w(!1)}))}),[S,B]),Object(n.useEffect)((function(){var e,t;h("".concat("../","api/events"),S,B).then((function(t){e=t})).then((function(){return h("".concat("../","api/posts"),S,B)})).then((function(e){t=e})).then((function(){return h("".concat("../","api/roles"),S,B)})).then((function(a){r(Object($e.a)(c,(function(n){n.event.options=e,n.post.options=t,n.role.options=a})))})).catch((function(e){O(e),w(!1)}))}),[S,B]);var k=function(){v("");var e={};Object.keys(He).forEach((function(t){e[t]=c[t].value}));var t=at(e,He,{fullMessages:!1});t?r(Object($e.a)(c,(function(e){Object.entries(t).forEach((function(t){var a=Object(i.a)(t,2),n=a[0],u=a[1],c=Object(i.a)(u,1);e[n].error=c[0]}))}))):(d(!0),D("".concat("../","api/invitations"),Object(j.a)(Object(j.a)({},e),{},{singleUse:c.singleUse}),S,B).then((function(){window.$("#addInvModal").modal("hide"),d(!1),h("".concat("../","api/invitations"),S,B).then((function(e){S(Ye(e))})).catch((function(e){O(e)}))})).catch((function(e){d(!1),e.inputErrors?(v(""),r(Object($e.a)(c,(function(t){Object.entries(e.inputErrors).forEach((function(e){var a=Object(i.a)(e,2),n=a[0],u=a[1];t[n].error=u}))})))):v(e.message)})))};return C.message?u.a.createElement(T,{status:C.status,message:C.message}):F?u.a.createElement(L,null):u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"d-flex justify-content-center mt-4 mx-2"},u.a.createElement("div",{style:{width:800}},u.a.createElement("h1",{className:"text-center display-4"},"Invitations"),u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("button",{onClick:function(){r(Object($e.a)(nt,(function(e){v(""),e.event.options=c.event.options,e.post.options=c.post.options,e.role.options=c.role.options,document.getElementById("inputEvent").value="",document.getElementById("inputPost").value="",document.getElementById("inputRole").value=""})))},className:"btn btn-outline-primary ml-2","data-toggle":"modal","data-target":"#addInvModal"},"Add invitation")))),u.a.createElement("div",{className:"table-responsive mt-4"},u.a.createElement("table",{className:"table"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",{className:"text-center"},"Name"),u.a.createElement("th",{className:"text-center"},"Event"),u.a.createElement("th",{className:"text-center"},"Post"),u.a.createElement("th",{className:"text-center"},"Role"),u.a.createElement("th",{className:"text-center"},"Used"),u.a.createElement("th",{className:"text-center"},"Link"))),u.a.createElement("tbody",null,e.map((function(e){return u.a.createElement("tr",{key:e.id},u.a.createElement("td",{className:"text-center"},e.name),u.a.createElement("td",{className:"text-center"},e.event),u.a.createElement("td",{className:"text-center"},e.post),u.a.createElement("td",{className:"text-center"},e.role),u.a.createElement("td",{className:"text-center"},e.used,"/",e.singleUse?"1":"\u221e"),u.a.createElement("td",{className:"text-center"},u.a.createElement("button",{onClick:function(){return t=e.regKey,void navigator.clipboard.writeText("".concat(window.location.host,"/registration?key=").concat(t));var t},className:"btn btn-link m-0 p-0"},"Copy link")))}))))),function(){var e=function(e){var t="single"===e.target.value;r(Object($e.a)(c,(function(e){e.singleUse=t})))},t={inputs:c,setInputs:r,isLoading:m},a=u.a.createElement(u.a.Fragment,null,u.a.createElement(We,null,u.a.createElement(Ze,{size:"6"},u.a.createElement(Qe,{contextual:t,id:"inputName",label:"Name",inputKey:"name",constraint:{value:He.name},decorators:[x]})),u.a.createElement(Ze,{size:"6"},u.a.createElement(et,{contextual:t,id:"inputEvent",label:"Event",inputKey:"event",constraint:{value:He.event}}))),u.a.createElement(We,null,u.a.createElement(Ze,{size:"6"},u.a.createElement(et,{contextual:t,id:"inputPost",label:"Post",inputKey:"post",constraint:{value:He.post}})),u.a.createElement(Ze,{size:"6"},u.a.createElement(et,{contextual:t,id:"inputRole",label:"Role",inputKey:"role",constraint:{value:He.role}}))),u.a.createElement("div",{className:"form-check form-check-inline"},u.a.createElement("input",{onChange:e,className:"form-check-input",type:"radio",name:"inputSingleUse",id:"inputSingleUse",value:"single",checked:c.singleUse}),u.a.createElement("label",{className:"form-check-label",htmlFor:"inlineRadio1"},"Single use")),u.a.createElement("div",{className:"form-check form-check-inline"},u.a.createElement("input",{onChange:e,className:"form-check-input",type:"radio",name:"inputSingleUse",id:"inputSingleUse",value:"multiple",checked:!c.singleUse}),u.a.createElement("label",{className:"form-check-label",htmlFor:"inlineRadio2"},"Multiple use"))),n=u.a.createElement(u.a.Fragment,null,u.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",disabled:m},"Close"),u.a.createElement("button",{onClick:k,type:"button",className:"btn btn-primary",disabled:m},m&&u.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Add invitation"));return u.a.createElement(tt,{id:"addInvModal",title:"Add invitation",body:a,footer:n,isLoading:m,error:p})}())},ct={allowEmpty:!1,message:"This field is required."},rt={name:{presence:ct,length:{minimum:3,maximum:16,tooShort:"The title must be between 3 and 16 characters.",tooLong:"The title must be between 3 and 16 characters."}},startDate:{presence:ct},endDate:{presence:ct}},lt=a(19),ot={name:{value:"",error:""},startDate:{value:"",error:""},endDate:{value:"",error:""}},st=function(){var e=Object(l.c)((function(e){return e.system.events})),t=Object(n.useState)(ot),a=Object(i.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),m=s[0],d=s[1],E=Object(n.useState)(""),f=Object(i.a)(E,2),p=f[0],v=f[1],g=Object(n.useState)({}),A=Object(i.a)(g,2),C=A[0],O=A[1],j=Object(n.useState)(!1),N=Object(i.a)(j,2),y=N[0],F=N[1],w=Object(l.b)(),S=Object(b.a)()[2];Object(n.useEffect)((function(){var e=function(){window.$("#addEventModal").modal("hide"),window.$("body").removeClass("modal-open"),window.$(".modal-backdrop").remove()};return window.onpopstate=e,function(){e(),window.onpopstate=function(){}}}),[]),Object(n.useEffect)((function(){F(!0),h("".concat("../","api/events"),w,S).then((function(e){w(Ve(e)),F(!1)})).catch((function(e){O(e),F(!1)}))}),[w,S]);var B=function(e){return e.trim()},x=function(){v("");var e={};Object.keys(rt).forEach((function(t){e[t]=c[t].value}));var t=lt(e,rt,{fullMessages:!1});t?r(Object($e.a)(c,(function(e){Object.entries(t).forEach((function(t){var a=Object(i.a)(t,2),n=a[0],u=a[1],c=Object(i.a)(u,1);e[n].error=c[0]}))}))):(d(!0),D("".concat("../","api/events"),e,w,S).then((function(){window.$("#addEventModal").modal("hide"),d(!1),h("".concat("../","api/events"),w,S).then((function(e){w(Ve(e))})).catch((function(e){O(e)}))})).catch((function(e){d(!1),e.inputErrors?(v(""),r(Object($e.a)(c,(function(t){Object.entries(e.inputErrors).forEach((function(e){var a=Object(i.a)(e,2),n=a[0],u=a[1];t[n].error=u}))})))):v(e.message)})))};return C.message?u.a.createElement(T,{status:C.status,message:C.message}):y?u.a.createElement(L,null):u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"d-flex justify-content-center mt-4 mx-2"},u.a.createElement("div",{style:{width:500}},u.a.createElement("h1",{className:"text-center display-4"},"Events"),u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("button",{onClick:function(){r(ot)},className:"btn btn-outline-primary ml-2","data-toggle":"modal","data-target":"#addEventModal"},"Add event")))),u.a.createElement("div",{className:"table-responsive mt-4"},u.a.createElement("table",{className:"table"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",{className:"text-center"},"Name"),u.a.createElement("th",{className:"text-center"},"Start date"),u.a.createElement("th",{className:"text-center"},"End date"))),u.a.createElement("tbody",null,e.map((function(e){return u.a.createElement("tr",{key:e.id},u.a.createElement("td",{className:"text-center"},e.name),u.a.createElement("td",{className:"text-center"},e.firstDay),u.a.createElement("td",{className:"text-center"},e.lastDay))}))))),function(){var e={inputs:c,setInputs:r,isLoading:m},t=u.a.createElement(u.a.Fragment,null,u.a.createElement(We,null,u.a.createElement(Ze,{size:"12"},u.a.createElement(Qe,{contextual:e,id:"inputName",label:"Name",inputKey:"name",constraint:{value:rt.name},decorators:[B]}))),u.a.createElement(We,null,u.a.createElement(Ze,{size:"6"},u.a.createElement(Qe,{contextual:e,id:"inputStartDate",label:"Start date",type:"date",inputKey:"startDate",constraint:{value:rt.name}})),u.a.createElement(Ze,{size:"6"},u.a.createElement(Qe,{contextual:e,id:"inputEndDate",label:"End date",type:"date",inputKey:"endDate",constraint:{value:rt.name}})))),a=u.a.createElement(u.a.Fragment,null,u.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",disabled:m},"Close"),u.a.createElement("button",{onClick:x,type:"button",className:"btn btn-primary",disabled:m},m&&u.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Add event"));return u.a.createElement(tt,{id:"addEventModal",title:"Add event",body:t,footer:a,isLoading:m,error:p})}())},it=function(e){return u.a.createElement("li",{className:"nav-item"},u.a.createElement(d.b,{to:e.to,className:"nav-link"},e.title))},mt=function(){var e=Object(l.c)((function(e){return e.user.userData})),t=Object(l.c)((function(e){return e.user.permissions})),a=Object(l.c)((function(e){return e.user.loggedIn})),c=Object(E.j)(),r=c.path,o=c.url,s=Object(l.b)(),i=Object(b.a)()[2];Object(n.useEffect)((function(){h("".concat("../","api/userData"),s,i).then((function(e){s(f(e))})).then((function(){return h("".concat("../","api/userPermissions"),s,i)})).then((function(e){s({type:"LOAD_PERMISSIONS",payload:e})})).catch((function(e){console.log("Error: ".concat(e.message))}))}),[s,i,a]);return u.a.createElement(u.a.Fragment,null,u.a.createElement(d.a,null,u.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},u.a.createElement(d.b,{to:"".concat(o),className:"navbar-brand"},u.a.createElement("img",{src:"logo.svg",width:"30",height:"30",className:"d-inline-block align-top mr-3",alt:""}),"HDN"),u.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo02","aria-controls":"navbarTogglerDemo02","aria-expanded":"false","aria-label":"Toggle navigation"},u.a.createElement("span",{className:"navbar-toggler-icon"})),u.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo02"},u.a.createElement("ul",{className:"navbar-nav mr-auto mt-2 mt-lg-0"},u.a.createElement(it,{to:"".concat(o),title:"Home"}),u.a.createElement(it,{to:"".concat(p,"games"),title:"Games"}),u.a.createElement(it,{to:"".concat(p,"staff"),title:"Staff"}),t.includes(1)&&u.a.createElement(u.a.Fragment,null,u.a.createElement(it,{to:"".concat(p,"teams"),title:"Teams"}),u.a.createElement(it,{to:"".concat(p,"players"),title:"Players"})),(t.includes(7)||t.includes(8))&&u.a.createElement("li",{className:"nav-item dropdown"},u.a.createElement("button",{className:"btn btn-link nav-link dropdown-toggle shadow-none","data-toggle":"dropdown"},"Admin tools"),u.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"},u.a.createElement(d.b,{to:"".concat(p,"scores"),className:"btn shadow-none dropdown-item"},"Score table"),t.includes(8)&&u.a.createElement(u.a.Fragment,null,u.a.createElement(d.b,{to:"".concat(p,"users"),className:"btn shadow-none dropdown-item"},"Users"),u.a.createElement(d.b,{to:"".concat(p,"roles"),className:"btn shadow-none dropdown-item"},"Roles"),u.a.createElement(d.b,{to:"".concat(p,"events"),className:"btn shadow-none dropdown-item"},"Events"),u.a.createElement(d.b,{to:"".concat(p,"invitations"),className:"btn shadow-none dropdown-item"},"Invitations"))))),u.a.createElement("ul",{className:"navbar-nav mt-2 mt-lg-0"},u.a.createElement("li",{className:"nav-item dropdown"},u.a.createElement(d.b,{to:"".concat(p,"account"),className:"nav-link dropdown-toggle",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"".concat(e.lastName," ").concat(e.firstName)),u.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"},u.a.createElement(d.b,{to:"".concat(o,"/account"),className:"btn shadow-none dropdown-item"},"Account"),u.a.createElement("button",{onClick:function(){h("".concat("../","api/logout"),s,i).then((function(){i("loggedin",{path:"/"}),s({type:"LOG_OUT"})})).catch((function(e){console.log("Error: ".concat(e.message))}))},className:"btn shadow-none rounded-0 dropdown-item"},"Log Out")))))),u.a.createElement(E.d,null,u.a.createElement(E.b,{exact:!0,path:"".concat(r)},u.a.createElement("h1",null,"Home")),u.a.createElement(E.b,{path:"".concat(p,"staff")},u.a.createElement(J,null)),u.a.createElement(E.b,{exact:!0,path:"".concat(p,"games")},u.a.createElement(pe,null)),u.a.createElement(E.b,{exact:!0,path:"".concat(p,"games/:id")},u.a.createElement(Fe,null)),u.a.createElement(E.b,{path:"".concat(p,"games/:id/edit")},u.a.createElement(Pe,{edit:!0})),u.a.createElement(E.b,{path:"".concat(p,"games/:id/scores")},u.a.createElement(Ue,null)),u.a.createElement(E.b,{path:"".concat(p,"addGame")},u.a.createElement(Pe,null)),u.a.createElement(E.b,{exact:!0,path:"".concat(p,"teams")},u.a.createElement(Z,null)),u.a.createElement(E.b,{path:"".concat(p,"teams/:id")},u.a.createElement(ee,null)),u.a.createElement(E.b,{exact:!0,path:"".concat(p,"players")},u.a.createElement(ne,null)),u.a.createElement(E.b,{path:"".concat(p,"scores")},u.a.createElement(Ge,null)),u.a.createElement(E.b,{path:"".concat(p,"players/:id")},u.a.createElement(ae,null)),u.a.createElement(E.b,{path:"".concat(p,"invitations")},u.a.createElement(ut,null)),u.a.createElement(E.b,{path:"".concat(p,"events")},u.a.createElement(st,null)),u.a.createElement(E.b,{path:"".concat(p,"account")},u.a.createElement("h1",null,"Account")),u.a.createElement(E.b,{path:"*"},u.a.createElement("h3",null,"Main error.")))))};var dt=function(){var e=Object(l.c)((function(e){return e.user.loggedIn}));return u.a.createElement(u.a.Fragment,null,u.a.createElement(d.a,null,u.a.createElement(E.d,null,u.a.createElement(a,{path:"".concat(p,"login")},u.a.createElement(C,null)),u.a.createElement(a,{exact:!0,path:"".concat(p,"registration")},u.a.createElement(K,null)),u.a.createElement(t,{path:"".concat(p)},u.a.createElement(mt,null)),u.a.createElement(E.b,{exact:!0,path:"/"},u.a.createElement(E.a,{to:"".concat(p)})),u.a.createElement(a,{path:"*"},u.a.createElement(E.a,{to:"".concat(p)})))));function t(t){var a=t.children,n=Object(m.a)(t,["children"]),c=Object(b.a)(["loggedin"]),r=Object(i.a)(c,1)[0];return u.a.createElement(E.b,Object.assign({},n,{render:function(){return"1"===r.loggedin||e?a:u.a.createElement(E.a,{to:{pathname:"".concat(p,"login")}})}}))}function a(t){var a=t.children,n=Object(m.a)(t,["children"]);return u.a.createElement(E.b,Object.assign({},n,{render:function(){return e?u.a.createElement(E.a,{to:{pathname:"".concat(p)}}):a}}))}},Et={loggedIn:!1,userData:{firstName:"",lastName:""},permissions:[]},bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN":return Object($e.a)(e,(function(e){e.loggedIn=!0}));case"LOAD_USER_DATA":return Object($e.a)(e,(function(e){e.userData=t.payload}));case"LOG_OUT":return Et;case"LOAD_PERMISSIONS":return Object($e.a)(e,(function(e){e.permissions=t.payload}));default:return e}},ft={posts:[],persons:[]},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_POSTS":return Object($e.a)(e,(function(e){e.posts=t.payload}));case"LOAD_PERSONS":return Object($e.a)(e,(function(e){e.persons=t.payload}));case"LOG_OUT":return Object($e.a)(e,(function(e){e.persons=[]}));default:return e}},vt={teams:[],contacts:{},teamsData:{},players:[]},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_TEAMS":return Object($e.a)(e,(function(e){e.teams=t.payload}));case"LOAD_CONTACTS":return Object($e.a)(e,(function(e){e.contacts=t.payload}));case"LOAD_TEAM":return Object($e.a)(e,(function(e){e.teamsData[t.payload.team.id]=t.payload}));case"LOAD_PLAYERS":return Object($e.a)(e,(function(e){e.players=t.payload}));case"LOG_OUT":return vt;default:return e}},gt={days:[],allGames:[],myGames:[],currentTab:"",gamesData:{},scores:{},allScores:[]},Dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_DAYS":return Object($e.a)(e,(function(e){e.days=t.payload}));case"LOAD_ALL_GAMES":return Object($e.a)(e,(function(e){e.allGames=t.payload}));case"LOAD_MY_GAMES":return Object($e.a)(e,(function(e){e.myGames=t.payload}));case"SET_CURRENT_GAME_TAB":return Object($e.a)(e,(function(e){e.currentTab=t.payload}));case"LOAD_GAME":return Object($e.a)(e,(function(e){e.gamesData[t.payload.id]=t.payload}));case"LOAD_SCORES":return Object($e.a)(e,(function(e){e.scores[t.payload.gameId]=t.payload.scores}));case"LOAD_ALL_SCORES":return Object($e.a)(e,(function(e){e.allScores=t.payload}));case"LOG_OUT":return gt;default:return e}},At={invitations:[],events:[]},Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_INVITATIONS":return Object($e.a)(e,(function(e){e.invitations=t.payload}));case"LOAD_EVENTS":return Object($e.a)(e,(function(e){e.events=t.payload}));default:return e}},Ot=Object(o.b)({user:bt,staff:pt,teams:ht,event:Dt,system:Ct}),jt=Object(o.c)(Ot,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());r.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(l.a,{store:jt},u.a.createElement(s.a,null,u.a.createElement(dt,null)))),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.cd34bd3e.chunk.js.map