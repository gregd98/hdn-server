(this["webpackJsonphdn-organizer"]=this["webpackJsonphdn-organizer"]||[]).push([[0],{35:function(e,t,a){e.exports=a(47)},40:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),u=a.n(n),c=a(20),r=a.n(c),l=(a(40),a(3)),o=a(16),s=a(49),i=a(1),m=a(29),d=(a(45),a(6)),E=a(5),f=a(48),b=function(e){return{type:"LOG_IN",payload:e}},p="/organizer/",g=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),o=Object(i.a)(r,2),s=o[0],m=o[1],d=Object(n.useState)(!1),g=Object(i.a)(d,2),A=g[0],D=g[1],h=Object(n.useState)(""),v=Object(i.a)(h,2),C=v[0],O=v[1],j=Object(f.a)(),y=Object(i.a)(j,2),F=y[0],N=y[1],w=Object(l.b)(),S=Object(E.g)();Object(n.useEffect)((function(){fetch("".concat("../","api/userData"),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.succeed&&(console.log("Login succeed."),w(b(e.payload)))})).catch((function(e){console.log("Error: ".concat(e.message))}))}),[w]);return u.a.createElement("div",{className:"container col-sm-4"},u.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log("Username: ".concat(a,"\nPassword: ").concat(s)),console.log("Login clicked."),D(!0),fetch("".concat("../","api/login"),{method:"POST",credentials:"include",body:JSON.stringify({username:a,password:s})}).then((function(e){return e.json()})).then((function(e){e.succeed?(N("loggedin","1",{path:"/"}),console.log(F),w(b(e.userData))):(console.log("Login failed."),O(e.message),D(!1))})).catch((function(e){console.log("Error: ".concat(e.message)),D(!1),O("Network error.")}))}},u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Username"),u.a.createElement("input",{onChange:function(e){c(e.target.value)},value:a,type:"text",className:"form-control",id:"exampleInputEmail1",placeholder:"Username"})),u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),u.a.createElement("input",{onChange:function(e){m(e.target.value)},value:s,type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password"})),u.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:A},A&&u.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Log In"),u.a.createElement("button",{onClick:function(){S.push("".concat(p,"registration"))},type:"button",className:"btn btn-link"},"Sign Up")),C&&u.a.createElement("div",{className:"alert alert-danger mt-5",role:"alert"},C))},A=a(13),D=a(2),h={allowEmpty:!1,message:"This field is required."},v={presence:h,length:{minimum:3,maximum:32,tooShort:"The name must be between 3 and 32 characters.",tooLong:"The name must be between 3 and 32 characters."},format:{pattern:"\\p{L}+",flags:"u",message:"The name must only contain alphabetical characters."}},C={regCode:{presence:h,length:{is:10,wrongLength:"Enter a valid registration code."},format:{pattern:"[A-Z|0-9]+",message:"Enter a valid registration code."}},firstName:v,lastName:v,email:{presence:h,email:{message:"Enter a valid email address."}},phone:{presence:h,length:{is:10,wrongLength:"Enter a valid phone number."},format:{pattern:"[0-9]+",message:"Enter a valid phone number."}},cnp:{presence:h,length:{is:13,wrongLength:"Enter a valid CNP."},cnp:!0},shirtType:{presence:h,selector:!0},shirtSize:{presence:h,selector:!0},username:{presence:h,length:{minimum:3,maximum:25,tooShort:"The username must be between 4 and 32 characters.",tooLong:"The username must be between 4 and 32 characters."},format:{pattern:"[a-z|0-9|\\.|_]+",message:"The usernames must only contain lowercase alphanumeric characters."}},password:{presence:h,length:{minimum:8,maximum:128,tooShort:"The password must be between 8 and 128 characters.",tooLong:"The password must be between 8 and 128 characters."},password:!0},confirmPassword:{presence:h,confirmPassword:!0}},O=a(18),j=a.n(O),y=[2,7,9,1,4,6,3,5,8,2,7,9],F=function(e){for(var t=[],a=0;a<13;a+=1)t[a]=parseInt(e[a],10);var n,u=10*t[1]+t[2];switch(t[0]){case 1:case 2:u+=1900;break;case 3:case 4:u+=1800;break;case 5:case 6:u+=2e3;break;default:return!1}switch(t[0]){case 1:case 3:case 5:n="Male";break;default:n="Female"}var c=10*t[3]+t[4],r=10*t[5]+t[6],l=j()("".concat(u,"/").concat(c,"/").concat(r),"YYYY/M/D",!0),o=j()(),s=j.a.duration(o.diff(l)),i=Math.floor(s.asYears());return{bornDate:l.format("YYYY-MMM-DD"),age:i,sex:n}},N=function(e){console.log("Pwd check with value: ".concat(e)),console.log(e);var t=0;return e.match(/(?:[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0560-\u0588\u10D0-\u10FA\u10FD-\u10FF\u13F8-\u13FD\u1C80-\u1C88\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7AF\uA7B5\uA7B7\uA7B9\uA7BB\uA7BD\uA7BF\uA7C3\uA7C8\uA7CA\uA7F6\uA7FA\uAB30-\uAB5A\uAB60-\uAB68\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]|\uD801[\uDC28-\uDC4F\uDCD8-\uDCFB]|\uD803[\uDCC0-\uDCF2]|\uD806[\uDCC0-\uDCDF]|\uD81B[\uDE60-\uDE7F]|\uD835[\uDC1A-\uDC33\uDC4E-\uDC54\uDC56-\uDC67\uDC82-\uDC9B\uDCB6-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDCEA-\uDD03\uDD1E-\uDD37\uDD52-\uDD6B\uDD86-\uDD9F\uDDBA-\uDDD3\uDDEE-\uDE07\uDE22-\uDE3B\uDE56-\uDE6F\uDE8A-\uDEA5\uDEC2-\uDEDA\uDEDC-\uDEE1\uDEFC-\uDF14\uDF16-\uDF1B\uDF36-\uDF4E\uDF50-\uDF55\uDF70-\uDF88\uDF8A-\uDF8F\uDFAA-\uDFC2\uDFC4-\uDFC9\uDFCB]|\uD83A[\uDD22-\uDD43])+/)&&(t+=1),e.match(/(?:[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1C90-\u1CBA\u1CBD-\u1CBF\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AE\uA7B0-\uA7B4\uA7B6\uA7B8\uA7BA\uA7BC\uA7BE\uA7C2\uA7C4-\uA7C7\uA7C9\uA7F5\uFF21-\uFF3A]|\uD801[\uDC00-\uDC27\uDCB0-\uDCD3]|\uD803[\uDC80-\uDCB2]|\uD806[\uDCA0-\uDCBF]|\uD81B[\uDE40-\uDE5F]|\uD835[\uDC00-\uDC19\uDC34-\uDC4D\uDC68-\uDC81\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB5\uDCD0-\uDCE9\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD38\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD6C-\uDD85\uDDA0-\uDDB9\uDDD4-\uDDED\uDE08-\uDE21\uDE3C-\uDE55\uDE70-\uDE89\uDEA8-\uDEC0\uDEE2-\uDEFA\uDF1C-\uDF34\uDF56-\uDF6E\uDF90-\uDFA8\uDFCA]|\uD83A[\uDD00-\uDD21])/)&&(t+=1),e.match(/[0-9]/)&&(t+=1),e.match(/[`~!@#$%^&*()\-_=+{}[\]\\|;:'",<.>/?]+/)&&(t+=1),t},w=a(14),S=a(32),B=function(e){return e.trim()},x=function(e){return e.toLowerCase()},T=function(e){return e.toUpperCase()},k=function(e){return e?e[0].toUpperCase()+e.slice(1).toLowerCase():e},L=function(e){return e.replace(/\s/g,"")},_=function(e){return u.a.createElement("div",{className:"card border-dark my-2 mx-3"},u.a.createElement("div",{className:"card-body"},u.a.createElement("h4",null,e.title),e.children))},M=function(e){return u.a.createElement("div",{className:"form-row"},e.children)},I=function(e){var t=e.children,a=e.mdSize,n=e.na,c=w(Object(A.a)({"form-group":!0},"col-md-".concat(a),a));return u.a.createElement("div",{ref:n,className:c},t)},P=function(e){var t=e.type,a=e.id,n=e.label,c=e.state,r=e.setState,l=e.decorators,o=e.constraint,s=w({"form-control":!0,"is-invalid":c.error});return u.a.createElement(u.a.Fragment,null,u.a.createElement("label",{htmlFor:a},n),u.a.createElement("input",{onChange:function(e){var t=e.target.value;r((function(e){return Object(D.a)(Object(D.a)({},e),{},{value:t,error:""})}))},onBlur:function(){var e=c.value;if(l){for(var t=0;t<l.length;t+=1)e=l[t](e);r((function(t){return Object(D.a)(Object(D.a)({},t),{},{value:e})}))}var a=S({value:e},o,{fullMessages:!1});a&&r((function(e){return Object(D.a)(Object(D.a)({},e),{},{error:a.value[0]})}))},type:t,className:s,id:a,placeholder:n,value:c.value}),c.error&&u.a.createElement("div",{className:"invalid-feedback"},c.error))},R=function(e){var t=e.id,a=e.label,n=e.state,c=e.setState,r=e.constraint,l=w({"custom-select":!0,"is-invalid":n.error});return u.a.createElement(u.a.Fragment,null,u.a.createElement("label",{htmlFor:t},a),u.a.createElement("select",{onChange:function(e){var t=e.target.selectedIndex,a=e.target[t].id;c((function(e){return Object(D.a)(Object(D.a)({},e),{},{selectedId:a,error:""})}))},onBlur:function(){var e=n.selectedId,t=S({value:e},r,{fullMessages:!1});t&&c((function(e){return Object(D.a)(Object(D.a)({},e),{},{error:t.value[0]})}))},id:t,className:l},u.a.createElement("option",null),n.options.map((function(e){return u.a.createElement("option",{key:e.id,id:e.id},e.name)}))),n.error&&u.a.createElement("div",{className:"invalid-feedback"},n.error))},G=function(){var e=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),l=Object(i.a)(r,2),o=l[0],s=l[1],m=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),d=Object(i.a)(m,2),f=d[0],b=d[1],g=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),A=Object(i.a)(g,2),h=A[0],v=A[1],O=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),F=Object(i.a)(O,2),w=F[0],G=F[1],z=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),U=Object(i.a)(z,2),Y=U[0],$=U[1],V=Object(n.useState)({selectedId:0,error:"",options:[],ref:u.a.createRef()}),H=Object(i.a)(V,2),J=H[0],q=H[1],X=Object(n.useState)({selectedId:0,error:"",options:[],ref:u.a.createRef()}),W=Object(i.a)(X,2),Z=W[0],K=W[1],Q=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),ee=Object(i.a)(Q,2),te=ee[0],ae=ee[1],ne=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),ue=Object(i.a)(ne,2),ce=ue[0],re=ue[1],le=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),oe=Object(i.a)(le,2),se=oe[0],ie=oe[1],me=Object(n.useState)(!1),de=Object(i.a)(me,2),Ee=de[0],fe=de[1],be=Object(E.g)(),pe={regCode:{state:a,setState:c,order:1},firstName:{state:o,setState:s,order:2},lastName:{state:f,setState:b,order:3},email:{state:h,setState:v,order:4},phone:{state:w,setState:G,order:5},cnp:{state:Y,setState:$,order:6},shirtType:{state:J,setState:q,order:7},shirtSize:{state:Z,setState:K,order:8},username:{state:te,setState:ae,order:9},password:{state:ce,setState:re,order:10},confirmPassword:{state:se,setState:ie,order:11}};S.validators.cnp=function(e){if(!function(e){var t,a=0,n=[];if(13!==e.length)return!1;for(var u=0;u<13;u+=1){if(n[u]=parseInt(e[u],10),t=n[u],Number.isNaN(Number(t)))return!1;u<12&&(a+=n[u]*y[u])}10===(a%=11)&&(a=1);var c=10*n[1]+n[2];switch(n[0]){case 1:case 2:c+=1900;break;case 3:case 4:c+=1800;break;case 5:case 6:c+=2e3;break;default:return!1}var r=10*n[3]+n[4],l=10*n[5]+n[6];return n[12]===a&&j()("".concat(c,"/").concat(r,"/").concat(l),"YYYY/M/D",!0).isValid()}(e))return"Enter a valid CNP."},S.validators.password=function(e){if(N(e)<2)return"The password must contain at least two character categories among the following: uppercase characters, lowercase characters, digits, special characters."},S.validators.confirmPassword=function(e){if(e!==ce.value)return"Password doesn't match."},S.validators.selector=function(e){if(!e)return"This field is required."};Object(n.useEffect)((function(){fetch("".concat("../","api/shirtTypes"),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.succeed&&q((function(t){return Object(D.a)(Object(D.a)({},t),{},{options:e.payload})}))})),fetch("".concat("../","api/shirtSizes"),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.succeed&&K((function(t){return Object(D.a)(Object(D.a)({},t),{},{options:e.payload})}))}))}),[]);return u.a.createElement("div",{className:"d-flex justify-content-center"},u.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=S({regCode:a.value,firstName:o.value,lastName:f.value,email:h.value,phone:w.value,cnp:Y.value,shirtType:J.selectedId,shirtSize:Z.selectedId,username:te.value,password:ce.value,confirmPassword:se.value},C,{fullMessages:!1});if(t){var n=999,u="";Object.entries(t).forEach((function(e){var t=Object(i.a)(e,2),a=t[0],c=t[1];pe[a].order<n&&(n=pe[a].order,u=a),pe[a].setState((function(e){return Object(D.a)(Object(D.a)({},e),{},{error:c[0]})}))})),pe[u].state.ref.current.scrollIntoView({behavior:"smooth",block:"start"})}else fe(!0),fetch("".concat("../","api/signup"),{method:"POST",credentials:"include",body:JSON.stringify({regCode:a.value,firstName:o.value,lastName:f.value,email:h.value,phone:w.value,cnp:Y.value,shirtType:J.selectedId,shirtSize:Z.selectedId,username:te.value,password:ce.value})}).then((function(e){return e.json()})).then((function(e){if(e.succeed)console.log("WIN"),be.push("".concat(p,"login"));else if(fe(!1),e.message)console.log(e.message);else{var t=999,a="";Object.entries(e.inputErrors).forEach((function(e){var n=Object(i.a)(e,2),u=n[0],c=n[1];pe[u].order<t&&(t=pe[u].order,a=u),pe[u].setState((function(e){return Object(D.a)(Object(D.a)({},e),{},{error:c})}))})),pe[a].state.ref.current.scrollIntoView({behavior:"smooth",block:"start"})}})).catch((function(e){fe(!1),console.log("Error: ".concat(e.message))}))}},u.a.createElement(_,{title:"Validation"},u.a.createElement(I,{na:a.ref},u.a.createElement(P,{type:"text",id:"inputRegistrationCode",label:"Registration code",state:a,setState:c,constraint:{value:C.regCode},decorators:[B,T]}))),u.a.createElement(_,{title:"Personal data"},u.a.createElement(M,null,u.a.createElement(I,{mdSize:"6",na:o.ref},u.a.createElement(P,{type:"text",id:"inputFirstName",label:"First name",state:o,setState:s,constraint:{value:C.firstName},decorators:[B,k]})),u.a.createElement(I,{mdSize:"6",na:f.ref},u.a.createElement(P,{type:"text",id:"inputLastName",label:"Last name",state:f,setState:b,constraint:{value:C.lastName},decorators:[B,k]}))),u.a.createElement(M,null,u.a.createElement(I,{mdSize:"6",na:h.ref},u.a.createElement(P,{type:"text",id:"inputEmail",label:"Email",state:h,setState:v,constraint:{value:C.email},decorators:[B,x]})),u.a.createElement(I,{mdSize:"6",na:w.ref},u.a.createElement(P,{type:"text",id:"inputPhone",label:"Phone",state:w,setState:G,constraint:{value:C.phone},decorators:[L]}))),u.a.createElement(I,{na:Y.ref},u.a.createElement(P,{type:"text",id:"inputCNP",label:"CNP",state:Y,setState:$,constraint:{value:C.cnp},decorators:[B]})),u.a.createElement(M,null,u.a.createElement(I,{mdSize:"6"},u.a.createElement(R,{id:"inputShirtType",label:"Shirt type",state:J,setState:q,constraint:{value:C.shirtType}})),u.a.createElement(I,{mdSize:"6"},u.a.createElement(R,{id:"inputShirtSize",label:"Shirt size",state:Z,setState:K,constraint:{value:C.shirtSize}})))),u.a.createElement(_,{title:"User data"},u.a.createElement(I,{na:te.ref},u.a.createElement(P,{type:"text",id:"inputUsername",label:"Username",state:te,setState:ae,constraint:{value:C.username},decorators:[B,x]})),u.a.createElement(M,null,u.a.createElement(I,{mdSize:"6",na:ce.ref},u.a.createElement(P,{type:"password",id:"inputPassword",label:"Password",state:ce,setState:re,constraint:{value:C.password}})),u.a.createElement(I,{mdSize:"6",na:se.ref},u.a.createElement(P,{type:"password",id:"inputConfirmPassword",label:"Confirm password",state:se,setState:ie,constraint:{value:C.confirmPassword}})))),u.a.createElement(_,{title:"Submit"},u.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:Ee},Ee&&u.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Sign Up"),u.a.createElement("button",{onClick:function(){be.push("".concat(p,"login"))},type:"button",className:"btn btn-outline-secondary ml-2"},"Back to log in"))))},z=function(e){return{type:"LOAD_PERSONS",payload:e}},U=function(e,t,a,n,u){return new Promise((function(c){var r={};fetch(e,{method:"GET",credentials:"include"}).then((function(e){return r.status=e.status,e.json()})).then((function(e){e.succeed?(a({}),t(e.payload),c()):e.authenticated?(r.message=e.message,console.log(r),a(r),c()):(u("loggedin",{path:"/"}),n({type:"LOG_OUT"}),c())})).catch((function(e){a({message:"Failed to connect to the server."}),console.log("Error: ".concat(e.message)),c()}))}))},Y=function(e,t,a){return new Promise((function(n,u){var c={};fetch(e,{method:"GET",credentials:"include"}).then((function(e){return c.status=e.status,e.json()})).then((function(e){e.succeed?n(e.payload):e.authenticated?(c.message=e.message,console.log(c),u(c)):(a("loggedin",{path:"/"}),t({type:"LOG_OUT"}),c.message="Unauthenticated.",u(c))})).catch((function(e){console.log("Error: ".concat(e.message)),c.message="Failed to connect to the server.",u(c)}))}))},$=function(e){var t=e.users,a=e.activePostId,n=e.searchValue,c=Object(l.c)((function(e){return e.user.userData.id})),r=Object(E.g)();return t.length>0?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"list-group mt-4 mx-2"},t.filter((function(e){return e.postId===a})).filter((function(e){return!n||(t="".concat(e.lastName," ").concat(e.firstName),a=n,t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().search(a.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase())>=0);var t,a})).filter((function(e){return e.id!==c})).map((function(e){return u.a.createElement("div",{key:e.id,className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center"},u.a.createElement("span",null,u.a.createElement("button",{onClick:function(){return r.push("".concat(p,"players/").concat(e.id))},className:"btn btn-link m-0 p-0"},e.lastName," ",e.firstName)),u.a.createElement("span",null,u.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-success dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Contact"),u.a.createElement("div",{className:"dropdown-menu"},u.a.createElement("a",{className:"dropdown-item",href:"tel:".concat(e.phone)},"Call"),u.a.createElement("a",{className:"dropdown-item",href:"sms:".concat(e.phone)},"SMS"),u.a.createElement("div",{className:"dropdown-divider"}),u.a.createElement("a",{className:"dropdown-item",href:"mailto:".concat(e.email)},"Email"))))})))):u.a.createElement("p",null,"Nothing to show.")},V=a(14),H=function(){var e=Object(l.c)((function(e){return e.staff.posts})),t=Object(l.c)((function(e){return e.staff.persons})),a=Object(n.useState)(0),c=Object(i.a)(a,2),r=c[0],o=c[1],s=Object(n.useState)({}),m=Object(i.a)(s,2),d=m[0],E=(m[1],Object(n.useState)("")),b=Object(i.a)(E,2),p=b[0],g=b[1],A=Object(l.b)(),D=Object(f.a)()[2];Object(n.useEffect)((function(){var e=function(){window.$("#exampleModal").modal("hide"),window.$("body").removeClass("modal-open"),window.$(".modal-backdrop").remove()};return window.onpopstate=e,function(){e(),window.onpopstate=function(){}}}),[]),Object(n.useEffect)((function(){Y("".concat("../","api/posts"),A,D).then((function(e){A(function(e){return{type:"LOAD_POSTS",payload:e}}(e)),e.length>0&&o(e[0].id)})).then((function(){return Y("".concat("../","api/users"),A,D)})).then((function(e){A(z(e))})).catch((function(e){console.log("Error: ".concat(e.message))}))}),[A,D]);return u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("div",{style:{width:500}},u.a.createElement("h1",{className:"text-center display-4"},"Staff"),u.a.createElement("div",{className:"form-group mx-2 mt-4"},u.a.createElement("input",{onChange:function(e){g(e.target.value)},className:"form-control",type:"text",placeholder:"Search",value:p})),u.a.createElement("div",{className:"list-group list-group-horizontal mx-2 mt-2",id:"list-tab",role:"tablist"},e.map((function(e){var t=V({btn:!0,"shadow-none":!0,"rounded-0":!0,"list-group-item":!0,active:r===e.id,"flex-fill":!0});return u.a.createElement("button",{key:e.id,onClick:function(){return t=e.id,void o(t);var t},className:t},e.name)}))),u.a.createElement($,{users:t,activePostId:r,searchValue:p})),u.a.createElement("div",{className:"modal fade",id:"exampleModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},u.a.createElement("div",{className:"modal-dialog"},u.a.createElement("div",{className:"modal-content"},u.a.createElement("div",{className:"modal-header"},u.a.createElement("h4",null,d.lastName," ",d.firstName),u.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},u.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),u.a.createElement("div",{className:"modal-body"},u.a.createElement("a",{href:"tel:".concat(d.phone),className:"btn btn-lg btn-outline-primary"},"Call"),u.a.createElement("a",{href:"sms:".concat(d.phone),className:"btn btn-lg btn-outline-primary ml-2"},"SMS"),u.a.createElement("a",{href:"mailto:".concat(d.email),className:"btn btn-lg btn-outline-primary ml-2"},"E-mail"))))))},J=function(e){return{type:"LOAD_TEAMS",payload:e}},q=function(e){var t=e.status,a=e.message;return u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("div",null,u.a.createElement("h1",{className:"text-center text-danger display-4"},"ERROR",t&&" ".concat(t)),u.a.createElement("h4",{className:"text-center text-danger"},a)))},X=function(){return u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("div",{className:"spinner-border text-primary",role:"status"},u.a.createElement("span",{className:"sr-only"},"Loading...")))},W=function(){var e=Object(l.c)((function(e){return e.teams.teams})),t=Object(l.c)((function(e){return e.teams.contacts})),a=Object(l.b)(),c=Object(n.useState)({}),r=Object(i.a)(c,2),o=r[0],s=r[1],m=Object(n.useState)(!1),d=Object(i.a)(m,2),b=d[0],p=d[1],g=Object(f.a)()[2],A=Object(E.g)(),D=Object(E.i)().path;return Object(n.useEffect)((function(){0===e.length&&(console.log("Loading on"),p(!0)),U("".concat("../","api/teams"),(function(e){a(J(e))}),s,a,g).then((function(){return U("".concat("../","api/leaderContacts"),(function(e){a(function(e){return{type:"LOAD_CONTACTS",payload:e}}(e))}),s,a,g).then((function(){p(!1)}))}))}),[a,g,e.length]),o.message?u.a.createElement(q,{status:o.status,message:o.message}):b?u.a.createElement(X,null):u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("div",{style:{width:500}},u.a.createElement("h1",{className:"text-center display-4 "},"Teams"),u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("a",{className:"btn btn-outline-primary ml-2",href:"mailto:".concat(t.email?t.email.join(","):"")},"Email to all leaders"),u.a.createElement("a",{className:"btn btn-outline-primary ml-2",href:"sms:".concat(t.email?t.phone.join(","):"")},"SMS to all leaders")),u.a.createElement("div",{className:"list-group mt-4 mx-2"},e.map((function(e){return u.a.createElement("div",{key:e.id,className:"list-group-item list-group-item-action"},u.a.createElement("button",{onClick:function(){return A.push("".concat(D,"/").concat(e.id))},type:"button",className:"btn btn-link m-0 p-0 stretched-link"},e.name))})))))},Z=function(e){var t=e.players,a=e.searchValue,n=e.withBadge,c=e.withAge,r=Object(E.g)();return t.length>0?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"list-group mt-4 mx-2"},t.filter((function(e){return!a||(t="".concat(e.lastName," ").concat(e.firstName),n=a,t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().search(n.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase())>=0);var t,n})).map((function(e){var t=F(e.cnp);return u.a.createElement("div",{key:e.id,className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center"},u.a.createElement("span",null,u.a.createElement("button",{onClick:function(){return r.push("".concat(p,"players/").concat(e.id))},className:"btn btn-link m-0 p-0"},e.lastName," ",e.firstName),n&&e.rankId>0&&u.a.createElement("span",{className:"badge badge-info ml-2"},2===e.rankId?"Leader":"Vice leader")),u.a.createElement("span",null,c&&u.a.createElement("span",{className:"badge badge-pill badge-".concat(t.age>=18?"success":"warning"," mr-2")},t.age),u.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-success dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Contact"),u.a.createElement("div",{className:"dropdown-menu"},u.a.createElement("a",{className:"dropdown-item",href:"tel:".concat(e.phone)},"Call"),u.a.createElement("a",{className:"dropdown-item",href:"sms:".concat(e.phone)},"SMS"),e.email&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"dropdown-divider"}),u.a.createElement("a",{className:"dropdown-item",href:"mailto:".concat(e.email)},"Email")))))})))):u.a.createElement("p",null,"Nothing to show.")},K=function(){var e=Object(E.h)().id,t=Object(l.c)((function(e){return e.teams.teamsData})),a=Object(l.b)(),c=Object(n.useState)({}),r=Object(i.a)(c,2),o=r[0],s=r[1],m=Object(n.useState)(!1),d=Object(i.a)(m,2),b=d[0],p=d[1],g=Object(f.a)()[2];Object(n.useEffect)((function(){t[e]||p(!0),U("".concat("../","api/teams/").concat(e),(function(e){a({type:"LOAD_TEAM",payload:e})}),s,a,g).then((function(){p(!1)}))}),[a,e,g]);return o.message?u.a.createElement(q,{status:o.status,message:o.message}):b||!t[e]?u.a.createElement(X,null):function(){var a=t[e],n=a.players;return u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("div",{style:{width:500}},u.a.createElement("h2",{className:"text-center",style:{color:"#ffbc01"}},a.team.name),u.a.createElement("h6",{className:"text-center text-secondary"},a.team.city),u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("a",{className:"btn btn-outline-primary ml-2",href:"mailto:".concat(n?n.filter((function(e){return e.rankId>0})).map((function(e){return e.email})).join(","):"")},"Email to leaders"),u.a.createElement("a",{className:"btn btn-outline-primary ml-2",href:"sms:".concat(n?n.filter((function(e){return e.rankId>0})).map((function(e){return e.phone})).join(","):"")},"SMS to leaders")),u.a.createElement(Z,{players:n,withBadge:!0,withAge:!0})))}()},Q=function(e){return u.a.createElement("div",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center"},u.a.createElement("p",{className:"p-0 m-0"},e.label),u.a.createElement("p",{className:"p-0 m-0"},e.value))},ee=function(){var e=Object(E.h)().id,t=Object(n.useState)({}),a=Object(i.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)({}),s=Object(i.a)(o,2),m=s[0],d=s[1],b=Object(l.b)(),p=Object(f.a)()[2];if(Object(n.useEffect)((function(){U("".concat("../","api/players/").concat(e),(function(e){r(e)}),d,b,p)}),[b,e,p]),!m.message){if(c.id){var g=F(c.cnp),A="";return 1===c.rankId&&(A=" (Vice leader)"),2===c.rankId&&(A=" (Leader)"),u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("div",{style:{width:500}},u.a.createElement("h2",{className:"text-center",style:{color:"#ffbc01"}},c.lastName," ",c.firstName),u.a.createElement("h5",{className:"text-center text-secondary"},c.team,A),u.a.createElement("div",{className:"list-group mt-4 mx-2"},u.a.createElement(Q,{label:"Born date:",value:g.bornDate}),u.a.createElement(Q,{label:"Age:",value:g.age}),u.a.createElement(Q,{label:"Sex:",value:g.sex}),u.a.createElement(Q,{label:"Phone:",value:c.phone}),c.email&&u.a.createElement(Q,{label:"Email:",value:c.email}),u.a.createElement(Q,{label:"CNP:",value:c.cnp})))))}return u.a.createElement("h1",null,"Loading")}return u.a.createElement(q,{status:m.status,message:m.message})},te=function(){var e=Object(l.c)((function(e){return e.teams.players})),t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)({}),s=Object(i.a)(o,2),m=s[0],d=s[1],E=Object(l.b)(),b=Object(f.a)()[2];Object(n.useEffect)((function(){Y("".concat("../","api/players"),E,b).then((function(e){E(function(e){return{type:"LOAD_PLAYERS",payload:e}}(e))})).catch((function(e){d(e)}))}),[E,b]);return m.message?u.a.createElement(q,{status:m.status,message:m.message}):u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("div",{style:{width:500}},u.a.createElement("h1",{className:"text-center display-4"},"Players"),u.a.createElement("div",{className:"form-group mx-2 mt-4"},u.a.createElement("input",{onChange:function(e){r(e.target.value)},className:"form-control",type:"text",placeholder:"Search",value:c})),u.a.createElement(Z,{players:e,withBadge:!1,searchValue:c,withAge:!0})))},ae=function(e){var t=e.game,a=e.reference,c=e.clickHandler,r=Object(n.useState)(""),l=Object(i.a)(r,2),o=l[0],s=l[1];return Object(n.useEffect)((function(){if(t.startTime){var e=t.startTime.split(/[- :]/),a=t.endTime.split(/[- :]/);s("".concat(e[3],":").concat(e[4]," - ").concat(a[3],":").concat(a[4]))}else s("No time set.")}),[t.startTime,t.endTime]),u.a.createElement("div",{onClick:c,ref:a,className:"card shadow-sm mt-2 clickable"},u.a.createElement("div",{className:"card-header bg-transparent py-1"},o),u.a.createElement("div",{className:"card-body pb-0"},u.a.createElement("h5",{className:"card-title"},t.name),u.a.createElement("p",{className:"card-text"},t.description),u.a.createElement("p",{className:"card-text mb-2"},u.a.createElement("small",{className:"text-muted"},t.owner.lastName," ",t.owner.firstName))))},ne=function(e){return{type:"LOAD_ALL_GAMES",payload:e}},ue=function(e){return{type:"LOAD_MY_GAMES",payload:e}},ce=function(e){return{type:"SET_CURRENT_GAME_TAB",payload:e}},re=function(e){return{type:"LOAD_GAME",payload:e}},le=function(e,t){return{type:"LOAD_SCORES",payload:{gameId:e,scores:t}}};function oe(e){var t=e.element,a=e.useWindow;if("undefined"===typeof window)return{x:0,y:0};var n=(t?t.current:document.body).getBoundingClientRect();return a?{x:window.scrollX,y:window.scrollY}:{x:n.left,y:n.top}}var se=function(e,t,a,u,c){var r=Object(n.useRef)(oe({useWindow:u})),l=null,o=function(){var t=oe({element:a,useWindow:u});e({prevPos:r.current,currPos:t}),r.current=t,l=null};Object(n.useLayoutEffect)((function(){var e=function(){c?null===l&&(l=setTimeout(o,c)):o()};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),t)},ie=a(14),me=function(){var e=Object(l.c)((function(e){return e.event.currentTab})),t=Object(l.c)((function(e){return e.event.days})),a=Object(l.c)((function(t){return"all"===e?t.event.allGames:t.event.myGames})),c=Object(n.useState)({}),r=Object(i.a)(c,2),o=r[0],s=r[1],m=Object(n.useState)([]),d=Object(i.a)(m,2),b=d[0],g=d[1],A=Object(l.b)(),h=Object(f.a)()[2],v=Object(n.useState)({}),C=Object(i.a)(v,2),O=C[0],j=C[1],y=Object(n.useState)([]),F=Object(i.a)(y,2),N=F[0],w=F[1],S=Object(n.useState)(0),B=Object(i.a)(S,2),x=B[0],T=B[1],k=Object(E.g)(),L=u.a.createRef();Object(n.useEffect)((function(){var t,a;"all"===e?(t="".concat("../","api/games"),a=ne):(t="".concat("../","api/games?own=true"),a=ue),Y("".concat("../","api/days"),A,h).then((function(e){A(function(e){return{type:"LOAD_DAYS",payload:e}}(e.map((function(e){return new Date(e)}))))})).then((function(){return Y(t,A,h)})).then((function(e){A(a(e))})).catch((function(e){j(e)}))}),[A,e,h]);Object(n.useEffect)((function(){var e={},n=new Set(a.map((function(e){return new Date(e.startTime).getDate()}))),c=!1;t.forEach((function(t){var a=t.getDate();e[a]={num:a,name:t.toLocaleDateString("en-US",{weekday:"long"}),active:!1},e[a].disabled=!n.has(a),e[a].disabled||(e[a].ref=u.a.createRef(),c||(T(a),c=!0))}));var r=[],l=[],o=-1;a.forEach((function(t,a){var n=new Date(t.startTime).getDate();if(!t.startTime||0!==a&&n===o)r.push(Object(D.a)({},t));else if(r.push(Object(D.a)(Object(D.a)({},t),{},{ref:e[n].ref})),0===a)l.push({num:n});else{var c=u.a.createRef();r[a-1]=Object(D.a)(Object(D.a)({},r[a-1]),{},{ref:c}),l.push({num:n,ref:c})}o=n})),s(e),w(l),g(r)}),[e,t,a]),se((function(){if(N.length>0){var e=0;N.forEach((function(t,a){(0===a||t.ref.current.getBoundingClientRect().bottom-L.current.getBoundingClientRect().bottom<=0)&&(e=t.num)})),T(e)}}));return O.message?u.a.createElement(q,{status:O.status,message:O.message}):u.a.createElement(u.a.Fragment,null,u.a.createElement("nav",{ref:L,className:"navbar navbar-light bg-white sticky-top mt-2 border shadow-sm"},u.a.createElement("p",{className:"navbar-brand my-0"},"all"===e?"All games":"My games"),u.a.createElement("ul",{className:"nav nav-pills"},Object.values(o).map((function(e){var t=ie({btn:!0,"btn-link":!0,"nav-link":!0,active:e.num===x});return u.a.createElement("li",{key:e.num,className:"nav-item"},u.a.createElement("button",{onClick:function(){return function(e){var t=L.current.getBoundingClientRect(),a=e.ref.current.getBoundingClientRect().top-t.bottom+t.top;window.scrollBy({top:a,behavior:"smooth"})}(e)},className:t,disabled:e.disabled},e.name))})))),u.a.createElement("div",null,b.map((function(e){return u.a.createElement(ae,{reference:e.ref,clickHandler:function(){return k.push("".concat(p,"games/").concat(e.id))},key:e.id,game:e})}))))},de=a(14),Ee=function(e){var t=e.type,a=e.label,n=e.active,c=e.click,r=de({"nav-link":!0,btn:!0,"btn-link":!0,"shadow-none":!0,active:n});return u.a.createElement("li",{className:"nav-item"},u.a.createElement("button",{onClick:function(e){return c(e,t)},className:r,id:"".concat(t,"-tab"),"data-target":"#tab-content"},a))},fe=function(){var e=Object(l.c)((function(e){return e.user.permissions})),t=Object(E.g)(),a=Object(l.b)(),c=Object(n.useState)(!1),r=Object(i.a)(c,2),o=r[0],s=r[1];Object(n.useEffect)((function(){e.includes(3)?(s(!0),a(ce("all"))):a(ce("own"))}),[a,e]);var m=function(e,t){window.$("#".concat(e.target.id)).tab("show"),a(ce(t))};return u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("div",{style:{width:500}},u.a.createElement("h1",{className:"text-center display-4"},"Games"),e.includes(2)&&u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("button",{onClick:function(){t.push("".concat(p,"addgame"))},type:"button",className:"btn btn-outline-primary"},"Add game")),u.a.createElement("ul",{className:"nav nav-tabs mt-4",id:"myTab",role:"tablist"},o&&u.a.createElement(Ee,{type:"all",label:"All games",active:!0,click:m}),u.a.createElement(Ee,{type:"own",label:"My games",active:!o,click:m})),u.a.createElement("div",{className:"tab-content",id:"myTabContent"},u.a.createElement("div",{className:"tab-pane fade show active",id:"tab-content"},u.a.createElement(me,null)))))},be=a(18),pe=function(e){return e.split(/[- :]/)},ge=function(e){return new Date(Date.UTC(e[0],e[1]-1,e[2],e[3],e[4],e[5]))},Ae=function(e){return new Date(e.getTime()+6e4*e.getTimezoneOffset())},De=function(e){return be(Ae(ge(pe(e)))).format("HH:mm")},he=function(e){return(t=pe(e),new Date(Date.UTC(t[0],t[1]-1,t[2],0,0,0))).getTime();var t},ve=a(14),Ce=function(e){return u.a.createElement("div",{className:"card border-gray my-2 mx-2"},u.a.createElement("div",{className:"card-body"},u.a.createElement("h4",null,e.title),e.children))},Oe=function(e){return u.a.createElement("div",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center"},u.a.createElement("p",{className:"p-0 m-0"},e.label),u.a.createElement("p",{className:"p-0 m-0"},e.value))},je=function(e){var t=e.id,a=e.title,n=e.text,c=e.confirmBtnText,r=e.btnHandler,l=e.errorMessage,o=e.isLoading,s=e.btnType;s||(s="primary");var i=ve(Object(A.a)({btn:!0},"btn-".concat(s),!0));return u.a.createElement("div",{className:"modal fade",id:t,"data-backdrop":"static","data-keyboard":"false",tabIndex:"-1"},u.a.createElement("div",{className:"modal-dialog modal-dialog-scrollable"},u.a.createElement("div",{className:"modal-content"},u.a.createElement("div",{className:"modal-header"},u.a.createElement("h5",{className:"modal-title"},a),u.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},u.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),u.a.createElement("div",{className:"modal-body"},n),u.a.createElement("div",{className:"modal-footer"},u.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Cancel"),u.a.createElement("button",{onClick:function(){return r()},type:"button",className:i,disabled:o},o&&u.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),c)),l&&u.a.createElement("div",{className:"alert alert-danger mx-2",role:"alert"},l))))},ye=function(){var e=Object(E.h)().id,t=Object(l.c)((function(e){return e.event.gamesData})),a=Object(l.c)((function(e){return e.staff.persons})),c=Object(l.b)(),r=Object(f.a)(),o=Object(E.g)(),s=r[2],m=Object(n.useState)(new Set),d=Object(i.a)(m,2),b=d[0],g=d[1],A=Object(n.useState)(!0),D=Object(i.a)(A,2),h=D[0],v=D[1],C=Object(n.useState)({id:0,firstName:"",lastName:""}),O=Object(i.a)(C,2),j=O[0],y=O[1],F=Object(n.useState)(!1),N=Object(i.a)(F,2),w=N[0],S=N[1],B=Object(n.useState)(""),x=Object(i.a)(B,2),T=x[0],k=x[1];Object(n.useEffect)((function(){Y("".concat("../","api/games/").concat(e),c,s).then((function(e){c(re(e))})).then((function(){return Y("".concat("../","api/users"),c,s)})).then((function(e){c(z(e))})).catch((function(e){console.log(e.message)}))}),[c,e,s]),Object(n.useEffect)((function(){var e=function(){window.$("#listModal").modal("hide"),window.$("#moveOwnerDialog").modal("hide"),window.$("#deleteGameDialog").modal("hide"),window.$("body").removeClass("modal-open"),window.$(".modal-backdrop").remove()};return window.onpopstate=e,function(){e(),window.onpopstate=function(){}}}),[]);var L=function(e){var t=new Set(b);t.has(e.id)?t.delete(e.id):t.add(e.id),g(t)},_=function(n){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return u.a.createElement("div",{className:"list-group"},a.filter((function(a){return a.id!==t[e].ownerId})).map((function(e){return u.a.createElement("div",{onClick:function(){return c(e)},key:e.id,className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center clickable"},u.a.createElement("p",{className:"m-0 p-0"},e.lastName," ",e.firstName),n&&u.a.createElement("input",{onChange:function(){return L(e)},className:"form-check-input-lg",type:"checkbox",id:"ch-".concat(e.id),checked:b.has(e.id)}))})))},M=function(t){var a=t.errorMessage,n=t.isLoading;return u.a.createElement("div",{className:"modal fade",id:"listModal","data-backdrop":"static","data-keyboard":"false",tabIndex:"-1"},u.a.createElement("div",{className:"modal-dialog modal-dialog-scrollable"},u.a.createElement("div",{className:"modal-content"},u.a.createElement("div",{className:"modal-header"},u.a.createElement("h5",{className:"modal-title"},h?"Select contributors":"Move ownership to:"),u.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},u.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),u.a.createElement("div",{className:"modal-body"},h?_(!0):_(!1,(function(e){k(""),y(e),window.$("#listModal").modal("hide"),window.$("#moveOwnerDialog").modal("show")}))),u.a.createElement("div",{className:"modal-footer"},u.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"),h&&u.a.createElement("button",{onClick:function(){S(!0),fetch("".concat("../","api/games/").concat(e,"/assignments"),{method:"POST",credentials:"include",body:JSON.stringify(Array.from(b))}).then((function(e){return e.json()})).then((function(t){S(!1),t.succeed?(window.$("#listModal").modal("hide"),Y("".concat("../","api/games/").concat(e),c,s).then((function(e){c(re(e))})).catch((function(e){console.log(e.message)}))):k(t.message)})).catch((function(e){S(!1),k("Network error."),console.log("Network error: ".concat(e.messageg))}))},type:"button",className:"btn btn-primary",disabled:n},n&&u.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Save changes"),";"),a&&u.a.createElement("div",{className:"alert alert-danger mx-2",role:"alert"},a))))};return t[e]?function(){var a,n=t[e];return u.a.createElement("div",{className:"d-flex justify-content-center mt-2"},u.a.createElement("div",{style:{width:500}},u.a.createElement("div",{className:"card text-center border-dark my-2 mx-2  px-2 sticky-top"},u.a.createElement("div",{className:"card-body"},u.a.createElement("h2",{className:"card-title"},n.name),u.a.createElement("div",{className:"d-flex justify-content-center mt-2"},u.a.createElement("button",{onClick:function(){o.push("".concat(p,"games/").concat(e,"/scores"))},className:"btn btn-primary"},"Add score"),n.permissions.includes("edit")&&u.a.createElement("button",{onClick:function(){o.push("".concat(p,"games/").concat(e,"/edit"))},className:"btn btn-outline-secondary ml-2"},"Edit game")))),n.description&&u.a.createElement(Ce,{title:"Description"},u.a.createElement("p",null,n.description)),n.notes&&u.a.createElement(Ce,{title:"Notes"},u.a.createElement("p",null,n.notes)),u.a.createElement(Ce,{title:"Details"},u.a.createElement("div",{className:"list-group mt-4 mx-2"},u.a.createElement(Oe,{label:"Owner:",value:"".concat(n.lastName," ").concat(n.firstName)}),n.location&&u.a.createElement(Oe,{label:"Location:",value:n.location}),u.a.createElement(Oe,{label:"Player count:",value:n.playerCount}),n.startTime&&u.a.createElement(u.a.Fragment,null,u.a.createElement(Oe,{label:"Day:",value:(a=n.startTime,Ae(ge(pe(a))).toLocaleDateString("en-US",{weekday:"long"}))}),u.a.createElement(Oe,{label:"Time:",value:"".concat(De(n.startTime)," - ").concat(De(n.endTime))})))),(n.assignments.length>0||n.permissions.includes("admin"))&&u.a.createElement(Ce,{title:"Contributors"},u.a.createElement("div",{className:"d-flex flex-wrap"},n.assignments.map((function(e){return u.a.createElement("div",{key:e.id,style:{background:"#17a2b8",color:"white",fontSize:"small"},className:"rounded px-2 py-1 mt-1 ml-1"},u.a.createElement("b",null,e.lastName," ",e.firstName))}))),n.permissions.includes("admin")&&u.a.createElement("button",{onClick:function(){k(""),v(!0);var e=new Set;n.assignments.forEach((function(t){return e.add(t.id)})),g(e)},className:"btn btn-link mt-2","data-toggle":"modal","data-target":"#listModal"},"Edit contributors")),n.permissions.includes("admin")&&u.a.createElement(Ce,{title:"Administration"},u.a.createElement("button",{onClick:function(){return v(!1)},className:"btn btn-outline-danger","data-toggle":"modal","data-target":"#listModal"},"Move ownership"),u.a.createElement("button",{onClick:function(){k(""),window.$("#deleteGameDialog").modal("show")},className:"btn btn-outline-danger ml-2"},"Delete game"))),M({errorMessage:T,isLoading:w}),u.a.createElement(je,{errorMessage:T,isLoading:w,id:"moveOwnerDialog",title:"Move ownership",text:u.a.createElement(u.a.Fragment,null,"Do you want to move ",u.a.createElement("b",null,n.name),"'s ownership to ",u.a.createElement("b",null,j.lastName," ",j.firstName,"?")),confirmBtnText:"Move",btnHandler:function(){var t;t=j.id,S(!0),fetch("".concat("../","api/games/").concat(e,"/moveOwner"),{method:"POST",credentials:"include",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){S(!1),e.succeed?o.push("".concat(p,"games")):k(e.message)})).catch((function(e){S(!1),k("Network error."),console.log(e.message)}))}}),u.a.createElement(je,{errorMessage:T,isLoading:w,id:"deleteGameDialog",title:"Delete game",text:u.a.createElement(u.a.Fragment,null,"Do you want to delete ",u.a.createElement("b",null,n.name),"?"),confirmBtnText:"Delete",btnType:"danger",btnHandler:function(){console.log("Delete game ".concat(n.name)),S(!0),fetch("".concat("../","api/games/").concat(e),{method:"DELETE",credentials:"include"}).then((function(e){return e.json()})).then((function(e){S(!1),e.succeed?o.push("".concat(p,"games")):k(e.message)})).catch((function(e){S(!1),k("Network error."),console.log(e.message)}))}}))}():u.a.createElement("h4",null,"Loading")},Fe={allowEmpty:!1,message:"This field is required."},Ne={length:{maximum:1024,tooLong:"Max length of this field is 1024 characters."}},we={title:{presence:Fe,length:{minimum:3,maximum:32,tooShort:"The title must be between 3 and 32 characters.",tooLong:"The title must be between 3 and 32 characters."}},playerCount:{numericality:{onlyInteger:!0,strict:!0,greaterThanOrEqualTo:0,lessThanOrEqualTo:16,message:"Player count must be between 0 and 16."}},description:Ne,notes:Ne,location:{length:{maximum:32,tooLong:"The location must be between 3 and 32 characters."}},day:{presence:Fe,selector:!0},startTime:{presence:Fe,format:{pattern:"[0-9]{2}:[0-9]{2}",message:"Enter a valid time"}},endTime:{presence:Fe,format:{pattern:"([0-1]?[0-9]|2[0-3]):[0-5][0-9]",message:"Enter a valid time"}}},Se=a(32),Be=a(14),xe=function(e){return u.a.createElement("div",{className:"card border-dark my-2 mx-3"},u.a.createElement("div",{className:"card-body"},u.a.createElement("h4",null,e.title),e.children))},Te=function(e){return u.a.createElement("div",{className:"form-row"},e.children)},ke=function(e){var t=e.children,a=e.mdSize,n=e.na,c=Be(Object(A.a)({"form-group":!0},"col-md-".concat(a),a));return u.a.createElement("div",{ref:n,className:c},t)},Le=function(e){var t=e.type,a=e.id,n=e.label,c=e.state,r=e.setState,l=e.decorators,o=e.rows,s=e.constraint,i=e.disabled,m=function(e){var t=e.target.value;r((function(e){return Object(D.a)(Object(D.a)({},e),{},{value:t,error:""})}))},d=function(){var e=c.value;if(l){for(var t=0;t<l.length;t+=1)e=l[t](e);r((function(t){return Object(D.a)(Object(D.a)({},t),{},{value:e})}))}var a=Se({value:e},s,{fullMessages:!1});a&&r((function(e){return Object(D.a)(Object(D.a)({},e),{},{error:a.value[0]})}))},E=Be({"form-control":!0,"is-invalid":!i&&c.error});return u.a.createElement(u.a.Fragment,null,u.a.createElement("label",{htmlFor:a},n),o?u.a.createElement("textarea",{onChange:m,onBlur:d,rows:o,className:E,id:a,placeholder:n,value:c.value,disabled:i}):u.a.createElement("input",{onChange:m,onBlur:d,type:t,className:E,id:a,placeholder:n,value:c.value,disabled:i}),!i&&c.error&&u.a.createElement("div",{className:"invalid-feedback"},c.error))},_e=function(e){var t=e.id,a=e.label,n=e.state,c=e.setState,r=e.selected,l=e.setSelected,o=e.constraint,s=e.disabled,i=Be({"custom-select":!0,"is-invalid":!s&&n.error});return u.a.createElement(u.a.Fragment,null,u.a.createElement("label",{htmlFor:t},a),u.a.createElement("select",{onChange:function(e){var t=e.target.selectedIndex,a=e.target[t].id;l(Number.parseInt(a,10)),c((function(e){return Object(D.a)(Object(D.a)({},e),{},{error:""})}))},onBlur:function(){var e=Se({value:r},o,{fullMessages:!1});e&&c((function(t){return Object(D.a)(Object(D.a)({},t),{},{error:e.value[0]})}))},id:t,className:i,disabled:s,value:function(){if(0===r)return"";for(var e=0;e<n.options.length;e+=1)if(n.options[e].id===r)return console.log(n.options[e].name),n.options[e].name;return""}()},u.a.createElement("option",{value:""}),n.options.map((function(e){return u.a.createElement("option",{key:e.id,id:e.id},e.name)}))),!s&&n.error&&u.a.createElement("div",{className:"invalid-feedback"},n.error))},Me=function(e){var t=e.id,a=e.label,n=e.state,c=e.setState,r=e.constraint,l=e.min,o=e.max,s=Be({"form-control-range":!0,"is-invalid":n.error});return u.a.createElement(u.a.Fragment,null,u.a.createElement("label",{htmlFor:t},a,": ",u.a.createElement("b",null,n.value)),u.a.createElement("input",{onChange:function(e){var t=e.target.value;c((function(e){return Object(D.a)(Object(D.a)({},e),{},{value:t,error:""})}));var a=Se({value:t},r,{fullMessages:!1});a&&c((function(e){return Object(D.a)(Object(D.a)({},e),{},{error:a.value[0]})}))},min:l,max:o,type:"range",className:s,id:t,value:n.value}),n.error&&u.a.createElement("div",{className:"invalid-feedback"},n.error))},Ie=function(e){var t=e.edit,a=Object(E.h)().id,c=Object(l.c)((function(e){return e.event.gamesData})),r=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),o=Object(i.a)(r,2),s=o[0],m=o[1],d=Object(n.useState)({value:0,error:"",ref:u.a.createRef()}),b=Object(i.a)(d,2),g=b[0],A=b[1],h=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),v=Object(i.a)(h,2),C=v[0],O=v[1],j=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),y=Object(i.a)(j,2),F=y[0],N=y[1],w=Object(n.useState)({options:[],error:"",ref:u.a.createRef()}),S=Object(i.a)(w,2),B=S[0],x=S[1],T=Object(n.useState)(0),k=Object(i.a)(T,2),L=k[0],_=k[1],M=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),I=Object(i.a)(M,2),P=I[0],R=I[1],G=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),z=Object(i.a)(G,2),U=z[0],$=z[1],V=Object(n.useState)({value:"",error:"",ref:u.a.createRef()}),H=Object(i.a)(V,2),J=H[0],q=H[1],X=Object(n.useState)(!1),W=Object(i.a)(X,2),Z=W[0],K=W[1],Q=Object(n.useState)(!1),ee=Object(i.a)(Q,2),te=ee[0],ae=ee[1],ne={title:{state:s,setState:m,order:1},playerCount:{state:g,setState:A,order:2},description:{state:C,setState:O,order:3},notes:{state:F,setState:N,order:4},location:{state:J,setState:q,order:5},day:{state:B,setState:x,order:6},startTime:{state:P,setState:R,order:7},endTime:{state:U,setState:$,order:8}},ue=Object(l.b)(),ce=Object(E.g)(),le=Object(f.a)()[2];Se.validators.selector=function(e){if(console.log("Day:"),console.log(e),!e)return"This field is required."},Object(n.useEffect)((function(){t&&Y("".concat("../","api/games/").concat(a),ue,le).then((function(e){ue(re(e))})).catch((function(e){console.log(e.message)}))}),[t,ue,a,le]),Object(n.useEffect)((function(){t&&c[a]&&(m(Object(D.a)(Object(D.a)({},s),{},{value:c[a].name})),A(Object(D.a)(Object(D.a)({},g),{},{value:c[a].playerCount})),c[a].description&&O(Object(D.a)(Object(D.a)({},s),{},{value:c[a].description})),c[a].notes&&N(Object(D.a)(Object(D.a)({},F),{},{value:c[a].notes})),c[a].location&&q(Object(D.a)(Object(D.a)({},J),{},{value:c[a].location})),c[a].startTime?(K(!1),_(he(c[a].startTime)),R(Object(D.a)(Object(D.a)({},P),{},{value:De(c[a].startTime)})),$(Object(D.a)(Object(D.a)({},U),{},{value:De(c[a].endTime)}))):K(!0))}),[t,c,a]),Object(n.useEffect)((function(){Y("".concat("../","api/days"),ue,le).then((function(e){x(Object(D.a)(Object(D.a)({},B),{},{options:e.map((function(e){var t=new Date(e),a=new Date(t.getTime()+6e4*t.getTimezoneOffset());return{id:t.getTime(),name:a.toLocaleDateString("en-US",{weekday:"long"})}}))}))})).catch((function(e){console.log("Error: ".concat(e.message))}))}),[ue,le]);var oe=function(e){return 0===e.trim().length?null:e},se=function(e){return e.toISOString().slice(0,16).replace("T"," ")};return u.a.createElement("div",{className:"d-flex justify-content-center"},u.a.createElement("div",{style:{width:500}},u.a.createElement("form",null,u.a.createElement(xe,{title:"Game data"},u.a.createElement(ke,{na:s.ref},u.a.createElement(Le,{type:"text",id:"inputTitle",label:"Title",state:s,setState:m,constraint:{value:we.title}})),u.a.createElement(ke,{na:g.ref},u.a.createElement(Me,{id:"inputPlayerCount",label:"Player count",state:g,setState:A,constraint:{value:we.playerCount},min:0,max:16})),u.a.createElement(ke,{na:C.ref},u.a.createElement(Le,{rows:"4",id:"inputDescription",label:"Description",state:C,setState:O,constraint:{value:we.description}})),u.a.createElement(ke,{na:F.ref},u.a.createElement(Le,{rows:"4",id:"inputNotes",label:"Notes",state:F,setState:N,constraint:{value:we.notes}})),u.a.createElement(ke,{na:J.ref},u.a.createElement(Le,{type:"text",id:"inputLocation",label:"Location",state:J,setState:q,constraint:{value:we.location}}))),u.a.createElement(xe,{title:"Game time"},u.a.createElement(Te,null,u.a.createElement(ke,{mdSize:"4",na:B.ref},u.a.createElement(_e,{id:"inputDay",label:"Day",state:B,setState:x,selected:L,setSelected:_,constraint:{value:we.day},disabled:Z})),u.a.createElement(ke,{mdSize:"4",na:P.ref},u.a.createElement(Le,{type:"time",id:"inputStartTime",label:"Start time",state:P,setState:R,constraint:{value:we.time},disabled:Z})),u.a.createElement(ke,{mdSize:"4",na:U.ref},u.a.createElement(Le,{type:"time",id:"inputEndTime",label:"End time",state:U,setState:$,constraint:{value:we.time},disabled:Z}))),u.a.createElement("div",{className:"form-check"},u.a.createElement("input",{onChange:function(e){K(e.target.checked)},className:"form-check-input",type:"checkbox",id:"inputTimeLater",checked:Z}),u.a.createElement("label",{className:"form-check-label",htmlFor:"inputTimeLater"},"Add later"))),u.a.createElement(xe,{title:"Submit"},u.a.createElement("button",{onClick:function(){return function(){var e={title:s.value,playerCount:g.value,description:C.value,notes:F.value,location:J.value},n=Object(D.a)({},we);Z?(delete n.day,delete n.startTime,delete n.endTime):e=Object(D.a)(Object(D.a)({},e),{},{day:L,startTime:P.value,endTime:U.value}),console.log(e);var u=Se(e,n,{fullMessages:!1});if(u){console.log(u);var c=999,r="";Object.entries(u).forEach((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];ne[a].order<c&&(c=ne[a].order,r=a),ne[a].setState((function(e){return Object(D.a)(Object(D.a)({},e),{},{error:n[0]})}))})),ne[r].state.ref.current.scrollIntoView({behavior:"smooth",block:"start"})}else{console.log("Adding game");var l={title:s.value,playerCount:g.value,description:oe(C.value),notes:oe(F.value),location:oe(J.value)};if(Z)l.startTime=null,l.endTime=null;else{var o=L,m=P.value.split(":"),d=U.value.split(":"),E=36e5*Number.parseInt(m[0],10)+6e4*Number.parseInt(m[1],10),f=36e5*Number.parseInt(d[0],10)+6e4*Number.parseInt(d[1],10),b=new Date(o+E),A=new Date(f>E?o+f:o+864e5+f);l.startTime=se(b),l.endTime=se(A)}var h=t?"".concat("../","api/games/").concat(a):"".concat("../","api/games");ae(!0),fetch(h,{method:t?"POST":"PUT",credentials:"include",body:JSON.stringify(l)}).then((function(e){return e.json()})).then((function(e){if(ae(!1),e.succeed)ce.replace(t?"".concat(p,"games/").concat(a):"".concat(p,"games"));else{var n=999,u="";Object.entries(e.inputErrors).forEach((function(e){var t=Object(i.a)(e,2),a=t[0],c=t[1];ne[a].order<n&&(n=ne[a].order,u=a),ne[a].setState((function(e){return Object(D.a)(Object(D.a)({},e),{},{error:c})}))})),ne[u].state.ref.current.scrollIntoView({behavior:"smooth",block:"start"})}}))}}()},type:"button",className:"btn btn-primary",disabled:te},te&&u.a.createElement("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),t?"Edit game":"Save game")))))},Pe=function(){var e=Object(E.h)().id,t=Object(l.c)((function(t){return t.event.gamesData[e]})),a=Object(l.c)((function(e){return e.teams.teams})),c=Object(l.c)((function(e){return e.event.scores})),r=Object(n.useState)([]),o=Object(i.a)(r,2),s=o[0],m=o[1],d=Object(n.useState)(""),b=Object(i.a)(d,2),p=b[0],g=b[1],A=Object(l.b)(),h=Object(f.a)()[2],v=Object(n.useState)(null),C=Object(i.a)(v,2),O=C[0],j=C[1],y=Object(n.useState)(""),F=Object(i.a)(y,2),N=F[0],w=F[1],S=Object(n.useState)(!1),B=Object(i.a)(S,2),x=B[0],T=B[1],k=Object(n.useState)(!1),L=Object(i.a)(k,2),_=L[0],M=L[1],I=function(e,t){var a=e.score||0===e.score,n=t.score||0===t.score;return a?n?e.score>t.score?-1:e.score<t.score?1:0:1:n?-1:0};Object(n.useEffect)((function(){Y("".concat("../","api/games/").concat(e),A,h).then((function(e){A(re(e))})).then((function(){return Y("".concat("../","api/teams"),A,h).then((function(e){A(J(e))})).then((function(){return Y("".concat("../","api/games/").concat(e,"/scores"),A,h).then((function(t){A(le(e,t))}))}))}))}),[A,e,h]),Object(n.useEffect)((function(){var t=c[e],n=[];if(a.length>0&&t){var u={};t.forEach((function(e){u[e.teamId]={score:e.score,fairplay:e.fairplay}})),a.forEach((function(e){var t=u[e.id];console.log("Csecs"),console.log(t),t?n.push(Object(D.a)(Object(D.a)({},e),{},{score:t.score,fairplay:t.fairplay})):n.push(Object(D.a)({},e))})),g("".concat(t.length,"/").concat(a.length," scored")),m(n.sort(I))}}),[e,c,a]),Object(n.useEffect)((function(){var e=function(){window.$("#scoreModal").modal("hide"),window.$("body").removeClass("modal-open"),window.$(".modal-backdrop").remove()};return window.onpopstate=e,function(){e(),window.onpopstate=function(){}}}),[]);var P=function(){fetch("".concat("../","api/games/").concat(e,"/scores"),{method:_?"POST":"PUT",credentials:"include",body:JSON.stringify({teamId:O,score:Number(N),fairplay:x})}).then((function(e){return e.json()})).then((function(t){t.succeed?(window.$("#scoreModal").modal("hide"),Y("".concat("../","api/games/").concat(e,"/scores"),A,h).then((function(t){A(le(e,t))})).catch((function(e){console.log(e.message)}))):console.log(t.message)}))};return u.a.createElement("div",{className:"d-flex justify-content-center mt-4"},u.a.createElement("div",{style:{width:500}},t&&u.a.createElement("h2",{className:"text-center"},t.name),u.a.createElement("h5",{className:"text-center"},p),u.a.createElement("div",{className:"list-group mt-4 mx-2"},s.length>0&&s.map((function(e){return u.a.createElement("div",{key:e.id,className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center clickable",onClick:function(){j(e.id),e.score||0===e.score?(M(!0),w(e.score),T(e.fairplay)):(M(!1),w(""),T(!1)),window.$("#scoreModal").modal("show")}},u.a.createElement("span",null,u.a.createElement("p",{className:"m-0 p-0"},e.name)),u.a.createElement("span",null,1===e.fairplay&&u.a.createElement("span",{className:"badge badge-pill badge-success mr-2"},"fair"),(e.score||0===e.score)&&u.a.createElement("span",null,u.a.createElement("b",null,e.score))))})))),u.a.createElement("div",{className:"modal fade",id:"scoreModal","data-backdrop":"static","data-keyboard":"false",tabIndex:"-1"},u.a.createElement("div",{className:"modal-dialog"},u.a.createElement("div",{className:"modal-content"},u.a.createElement("div",{className:"modal-header"},u.a.createElement("h5",{className:"modal-title"},"Score"),u.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},u.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),u.a.createElement("div",{className:"modal-body"},u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{htmlFor:"input_score",className:"col-form-label"},"Score:"),u.a.createElement("input",{autoComplete:"off",onChange:function(e){w(e.target.value)},type:"text",className:"form-control",id:"input_score",value:N})),u.a.createElement("div",{className:"form-group form-check"},u.a.createElement("input",{onChange:function(e){T(e.target.checked)},autoComplete:"off",type:"checkbox",className:"form-check-input",id:"input_fairplay",checked:x}),u.a.createElement("label",{className:"form-check-label",htmlFor:"input_fairplay"},"Fair play"))),u.a.createElement("div",{className:"modal-footer"},u.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"),u.a.createElement("button",{onClick:P,type:"button",className:"btn btn-primary",disabled:!1},!1,"Save score"))))))},Re=function(){var e=Object(l.c)((function(e){return e.teams.teams})),t=Object(l.c)((function(e){return e.event.allScores})),a=Object(l.b)(),c=Object(f.a)()[2];return Object(n.useEffect)((function(){Y("".concat("../","api/teams"),a,c).then((function(e){a(J(e))})).then((function(){return Y("".concat("../","api/scores"),a,c)})).then((function(e){a(function(e){return{type:"LOAD_ALL_SCORES",payload:e}}(e))})).catch((function(e){console.log(e.message)}))}),[a,c]),u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"table-responsive"},u.a.createElement("table",{className:"table table-sm table-dark table-striped sticky-header"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",{scope:"col"},"Games"),e.map((function(e){return u.a.createElement("th",{key:e.id,scope:"col"},e.name)})))),u.a.createElement("tbody",null,t.map((function(t){return u.a.createElement("tr",{key:t.id},u.a.createElement("th",{scope:"row"},t.name),e.map((function(e){return t.scores[e.id]?u.a.createElement("td",{key:e.id,className:"text-center"},t.scores[e.id].score):u.a.createElement("td",{key:e.id,className:"text-center"},"-")})))}))))))},Ge=function(e){return u.a.createElement("li",{className:"nav-item"},u.a.createElement(d.b,{to:e.to,className:"nav-link"},e.title))},ze=function(){var e=Object(l.c)((function(e){return e.user.userData})),t=Object(l.c)((function(e){return e.user.permissions})),a=Object(E.i)(),c=a.path,r=a.url,o=Object(l.b)(),s=Object(f.a)()[2];Object(n.useEffect)((function(){Y("".concat("../","api/userData"),o,s).then((function(e){o({type:"LOAD_USER_DATA",payload:e})})).then((function(){return Y("".concat("../","api/userPermissions"),o,s)})).then((function(e){o({type:"LOAD_PERMISSIONS",payload:e})})).catch((function(e){console.log("Error: ".concat(e.message))}))}),[]);return u.a.createElement(u.a.Fragment,null,u.a.createElement(d.a,null,u.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},u.a.createElement(d.b,{to:"".concat(r),className:"navbar-brand"},u.a.createElement("img",{src:"logo.svg",width:"30",height:"30",className:"d-inline-block align-top mr-3",alt:""}),"HDN"),u.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo02","aria-controls":"navbarTogglerDemo02","aria-expanded":"false","aria-label":"Toggle navigation"},u.a.createElement("span",{className:"navbar-toggler-icon"})),u.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo02"},u.a.createElement("ul",{className:"navbar-nav mr-auto mt-2 mt-lg-0"},u.a.createElement(Ge,{to:"".concat(r),title:"Home"}),u.a.createElement(Ge,{to:"".concat(p,"games"),title:"Games"}),u.a.createElement(Ge,{to:"".concat(p,"staff"),title:"Staff"}),t.includes(1)&&u.a.createElement(u.a.Fragment,null,u.a.createElement(Ge,{to:"".concat(p,"teams"),title:"Teams"}),u.a.createElement(Ge,{to:"".concat(p,"players"),title:"Players"})),t.includes(6)&&u.a.createElement(Ge,{to:"".concat(p,"scores"),title:"Scores"})),u.a.createElement("ul",{className:"navbar-nav mt-2 mt-lg-0"},u.a.createElement("li",{className:"nav-item dropdown"},u.a.createElement(d.b,{to:"".concat(p,"account"),className:"nav-link dropdown-toggle",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"".concat(e.lastName," ").concat(e.firstName)),u.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"},u.a.createElement(d.b,{to:"".concat(r,"/account"),className:"btn shadow-none dropdown-item"},"Account"),u.a.createElement("button",{onClick:function(){Y("".concat("../","api/logout"),o,s).then((function(){s("loggedin",{path:"/"}),o({type:"LOG_OUT"})})).catch((function(e){console.log("Error: ".concat(e.message))}))},className:"btn shadow-none rounded-0 dropdown-item"},"Log Out")))))),u.a.createElement(E.d,null,u.a.createElement(E.b,{exact:!0,path:"".concat(c)},u.a.createElement("h1",null,"Home")),u.a.createElement(E.b,{path:"".concat(p,"staff")},u.a.createElement(H,null)),u.a.createElement(E.b,{exact:!0,path:"".concat(p,"games")},u.a.createElement(fe,null)),u.a.createElement(E.b,{exact:!0,path:"".concat(p,"games/:id")},u.a.createElement(ye,null)),u.a.createElement(E.b,{path:"".concat(p,"games/:id/edit")},u.a.createElement(Ie,{edit:!0})),u.a.createElement(E.b,{path:"".concat(p,"games/:id/scores")},u.a.createElement(Pe,null)),u.a.createElement(E.b,{path:"".concat(p,"addGame")},u.a.createElement(Ie,null)),u.a.createElement(E.b,{exact:!0,path:"".concat(p,"teams")},u.a.createElement(W,null)),u.a.createElement(E.b,{path:"".concat(p,"teams/:id")},u.a.createElement(K,null)),u.a.createElement(E.b,{exact:!0,path:"".concat(p,"players")},u.a.createElement(te,null)),u.a.createElement(E.b,{path:"".concat(p,"scores")},u.a.createElement(Re,null)),u.a.createElement(E.b,{path:"".concat(p,"players/:id")},u.a.createElement(ee,null)),u.a.createElement(E.b,{path:"".concat(p,"account")},u.a.createElement("h1",null,"Account")),u.a.createElement(E.b,{path:"*"},u.a.createElement("h3",null,"Main error.")))))};var Ue=function(){var e=Object(l.c)((function(e){return e.user.loggedIn}));return u.a.createElement(u.a.Fragment,null,u.a.createElement(d.a,null,u.a.createElement(E.d,null,u.a.createElement(a,{path:"".concat(p,"login")},u.a.createElement(g,null)),u.a.createElement(a,{path:"".concat(p,"registration")},u.a.createElement(G,null)),u.a.createElement(t,{path:"".concat(p)},u.a.createElement(ze,null)),u.a.createElement(E.b,{exact:!0,path:"/"},u.a.createElement(E.a,{to:"".concat(p)})),u.a.createElement(a,{path:"*"},u.a.createElement(E.a,{to:"".concat(p)})))));function t(t){var a=t.children,n=Object(m.a)(t,["children"]),c=Object(f.a)(["loggedin"]),r=Object(i.a)(c,1)[0];return u.a.createElement(E.b,Object.assign({},n,{render:function(){return"1"===r.loggedin||e?a:u.a.createElement(E.a,{to:{pathname:"".concat(p,"login")}})}}))}function a(t){var a=t.children,n=Object(m.a)(t,["children"]);return u.a.createElement(E.b,Object.assign({},n,{render:function(){return e?u.a.createElement(E.a,{to:{pathname:"".concat(p)}}):a}}))}},Ye=a(7),$e={loggedIn:!1,userData:{firstName:"",lastName:""},permissions:[]},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN":case"LOAD_USER_DATA":return Object(Ye.a)(e,(function(e){e.loggedIn=!0,e.userData=t.payload}));case"LOG_OUT":return $e;case"LOAD_PERMISSIONS":return Object(Ye.a)(e,(function(e){e.permissions=t.payload}));default:return e}},He={posts:[],persons:[]},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_POSTS":return Object(Ye.a)(e,(function(e){e.posts=t.payload}));case"LOAD_PERSONS":return Object(Ye.a)(e,(function(e){e.persons=t.payload}));case"LOG_OUT":return Object(Ye.a)(e,(function(e){e.persons=[]}));default:return e}},qe={teams:[],contacts:{},teamsData:{},players:[]},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_TEAMS":return Object(Ye.a)(e,(function(e){e.teams=t.payload}));case"LOAD_CONTACTS":return Object(Ye.a)(e,(function(e){e.contacts=t.payload}));case"LOAD_TEAM":return Object(Ye.a)(e,(function(e){e.teamsData[t.payload.team.id]=t.payload}));case"LOAD_PLAYERS":return Object(Ye.a)(e,(function(e){e.players=t.payload}));case"LOG_OUT":return qe;default:return e}},We={days:[],allGames:[],myGames:[],currentTab:"",gamesData:{},scores:{},allScores:[]},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_DAYS":return Object(Ye.a)(e,(function(e){e.days=t.payload}));case"LOAD_ALL_GAMES":return Object(Ye.a)(e,(function(e){e.allGames=t.payload}));case"LOAD_MY_GAMES":return Object(Ye.a)(e,(function(e){e.myGames=t.payload}));case"SET_CURRENT_GAME_TAB":return Object(Ye.a)(e,(function(e){e.currentTab=t.payload}));case"LOAD_GAME":return Object(Ye.a)(e,(function(e){e.gamesData[t.payload.id]=t.payload}));case"LOAD_SCORES":return Object(Ye.a)(e,(function(e){e.scores[t.payload.gameId]=t.payload.scores}));case"LOAD_ALL_SCORES":return Object(Ye.a)(e,(function(e){e.allScores=t.payload}));case"LOG_OUT":return We;default:return e}},Ke=Object(o.b)({user:Ve,staff:Je,teams:Xe,event:Ze}),Qe=Object(o.c)(Ke,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());r.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(l.a,{store:Qe},u.a.createElement(s.a,null,u.a.createElement(Ue,null)))),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.392df869.chunk.js.map