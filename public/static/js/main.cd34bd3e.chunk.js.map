{"version":3,"sources":["actions/userActions.js","actions/actionTypes.js","constants.js","utils/communication.js","components/login.jsx","constraints/signupConstraints.js","utils/cnp.js","utils/password.js","components/error_page.jsx","components/loading_page.jsx","components/registration.jsx","actions/staffActions.js","components/staff/staff_list.jsx","components/staff/staff.jsx","actions/teamsActions.js","components/teams/teams.jsx","components/players/player_list.jsx","components/teams/team.jsx","components/players/player.jsx","components/players/players.jsx","components/games/game_card.jsx","actions/eventActions.js","utils/scroll.js","components/games/game_list.jsx","components/games/games.jsx","utils/mysql_date.js","components/games/game.jsx","constraints/gameConstraints.js","components/games/game_form.jsx","components/games/scores.jsx","components/score_table.jsx","actions/systemActions.js","constraints/invitationConstraints.js","utils/formElements.jsx","components/invitations.jsx","constraints/eventConstraints.js","components/events.jsx","components/main.jsx","App.js","reducers/userReducer.js","reducers/staffRedurer.js","reducers/teamsReducer.js","reducers/eventReducer.js","reducers/systemReducer.js","reducers/index.js","index.js"],"names":["loadUserData","payload","type","APP_URL_PATH","communication","url","method","body","dispatch","removeCookie","Promise","resolve","reject","init","credentials","JSON","stringify","fetch","then","result","status","json","succeed","authenticated","message","inputErrors","console","log","path","catch","error","restGet","restDelete","restPut","restPost","Login","useState","username","setUsername","password","setPassword","btnDisabled","setBtnDisabled","errorMessage","setErrorMessage","cookies","useCookies","setCookie","useDispatch","history","useHistory","useEffect","className","onSubmit","event","preventDefault","htmlFor","onChange","target","value","id","placeholder","disabled","role","aria-hidden","onClick","push","Constants","required","allowEmpty","nameConstraint","presence","length","minimum","maximum","tooShort","tooLong","format","pattern","flags","signupConstraints","firstName","lastName","email","phone","is","wrongLength","cnp","shirtType","selector","shirtSize","confirmPassword","control","getInformation","input","i","parseInt","sex","year","month","day","bornDate","moment","now","duration","diff","age","Math","floor","asYears","calculatePasswordStrength","strength","match","ErrorPage","LoadingPage","classNames","require","validate","trimDecorator","trim","lowerCaseDecorator","toLowerCase","capitalizeDecorator","toUpperCase","slice","trimAllDecorator","replace","Card","prop","title","children","FormRow","FormGroup","mdSize","na","classes","ref","Input","label","state","setState","decorators","constraint","Fragment","rest","onBlur","validation","fullMessages","SelectInput","selectedIndex","selectedId","options","map","item","key","name","Registration","query","URLSearchParams","useLocation","search","React","createRef","setFirstName","setLastName","setEmail","setPhone","setCnp","setShirtType","setShirtSize","setConfirmPassword","get","regKey","pageError","setPageError","isLoading","setLoading","fields","order","validators","hashResult","Number","isNaN","isValid","isValidCNP","rules","minOrder","minKey","Object","entries","forEach","current","scrollIntoView","behavior","block","regCode","loadPersons","persons","StaffList","users","activePostId","searchValue","userId","useSelector","user","userData","filter","postId","text","searched","normalize","data-toggle","aria-haspopup","aria-expanded","href","Staff","posts","staff","setActivePostId","selectedPerson","setSearchValue","removeModal","window","$","modal","removeClass","remove","onpopstate","loadPosts","style","width","post","btn","active","tabIndex","aria-labelledby","data-dismiss","aria-label","loadTeams","teams","Teams","contacts","useRouteMatch","loadContacts","join","team","PlayerList","players","withBadge","withAge","player","rankId","Team","useParams","teamsData","teamData","color","city","renderTeamPage","DetailItem","Player","setPlayer","teamExtension","Players","loadPlayers","GameCard","game","reference","clickHandler","time","setTime","startTime","start","split","end","endTime","description","owner","loadAllGames","games","loadMyGames","setCurrentTab","currentTab","loadGame","loadScores","gameId","scores","getScrollPosition","element","useWindow","x","y","position","document","getBoundingClientRect","scrollX","scrollY","left","top","useScrollPosition","effect","deps","wait","useRef","throttleTimeout","callBack","currPos","prevPos","useLayoutEffect","handleScroll","setTimeout","addEventListener","removeEventListener","GameList","days","allGames","myGames","buttons","setButtons","uiGames","setUiGames","refs","setRefs","selectedDay","setSelectedDay","navRef","gameUrl","loadFunc","resultDays","loadDays","Date","resultGames","tmp","daySet","Set","getDate","selected","dayNum","num","toLocaleDateString","weekday","has","nana","tmpRefs","lastDay","currentDay","k","bottom","values","button","navParams","offset","scrollBy","handleDayClicked","TabHeader","click","e","data-target","Games","userPermissions","permissions","permAllGames","setPermAllGames","includes","tabClicked","tab","splitInput","date","convertToDateTime","t","UTC","balanceTimeZone","getTime","getTimezoneOffset","getTimeByDate","getLongByDate","ConfirmationDialog","confirmBtnText","btnHandler","isDialogLoading","btnType","data-backdrop","data-keyboard","Game","gameData","gamesData","contributors","setContributors","assignmentsModal","setAssignmentsModal","newOwner","setNewOwner","dialogLoading","setDialogLoading","dialogError","setDialogError","toggleCheckbox","delete","add","renderUserList","withCheckbox","ownerId","checked","renderModal","Array","from","res","notes","location","playerCount","assignments","contributor","background","fontSize","renderGamePage","area","gameConstraints","numericality","onlyInteger","strict","greaterThanOrEqualTo","lessThanOrEqualTo","rows","handleInputChange","handleBlur","setSelected","findValue","RangeInput","min","max","GameForm","edit","setTitle","setPlayerCount","setDescription","setNotes","setDay","selectedDayId","setSelectedDayId","setStartTime","setEndTime","setLocation","timeDisabled","setTimeDisabled","newDate","simplifyNonRequiredField","dateToSqlFormat","toISOString","validationObj","currentRules","data","t1","t2","ss","ee","saveGameClicked","Scores","uiScores","setUiScores","scoreCounter","setScoreCounter","currentTeamId","setCurrentTeamId","currentScore","setCurrentScore","currentFairplay","setCurrentFairplay","editing","setEditing","inputError","setInputError","scoreSorter","a","b","x1","score","x2","fairplay","mScores","scoreList","output","obj","teamId","scoreData","sort","updateScore","str","s","String","n","Infinity","checkInt","deleteScore","scoreItem","Boolean","autoComplete","renderScoreInput","ScoreTable","allScores","loadAllScores","scope","loadInvitations","invitations","loadEvents","events","inputSelect","invitationConstraints","size","TextInput","contextual","inputKey","inputs","setInputs","produce","draft","decorator","newError","Modal","footer","inputDefaults","singleUse","Invitations","system","addInvitation","keys","rule","getElementById","inv","used","navigator","clipboard","writeText","host","radioChange","modalBody","modalFooter","renderAddInvModal","eventConstraints","startDate","endDate","Events","addEvent","firstDay","renderAddEventModal","NavbarItem","to","Main","loggedIn","src","height","alt","aria-controls","exact","App","PublicRoute","PrivateRoute","render","loggedin","pathname","defaultState","userReducer","action","staffReducer","teamsReducer","eventReducer","systemReducer","rootReducer","combineReducers","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","StrictMode","CookiesProvider"],"mappings":"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","file":"static/js/main.cd34bd3e.chunk.js","sourcesContent":["import {\n  actionLogIn, actionLogOut, actionLoadUserData, actionLoadPermissions,\n} from './actionTypes';\n\nexport const logIn = () => ({ type: actionLogIn });\nexport const logOut = () => ({ type: actionLogOut });\nexport const loadUserData = (payload) => ({ type: actionLoadUserData, payload });\nexport const loadPermissions = (payload) => ({ type: actionLoadPermissions, payload });\n","export const actionLogIn = 'LOG_IN';\r\nexport const actionLogOut = 'LOG_OUT';\r\nexport const actionLoadUserData = 'LOAD_USER_DATA';\r\nexport const actionLoadPermissions = 'LOAD_PERMISSIONS';\r\n\r\nexport const actionLoadPosts = 'LOAD_POSTS';\r\nexport const actionLoadPersons = 'LOAD_PERSONS';\r\n\r\nexport const actionLoadTeams = 'LOAD_TEAMS';\r\nexport const actionLoadContacts = 'LOAD_CONTACTS';\r\nexport const actionLoadTeam = 'LOAD_TEAM';\r\nexport const actionLoadPlayers = 'LOAD_PLAYERS';\r\n\r\nexport const actionLoadDays = 'LOAD_DAYS';\r\nexport const actionLoadAllGames = 'LOAD_ALL_GAMES';\r\nexport const actionLoadMyGames = 'LOAD_MY_GAMES';\r\nexport const actionSetCurrentGameTab = 'SET_CURRENT_GAME_TAB';\r\nexport const actionLoadGame = 'LOAD_GAME';\r\nexport const actionLoadScores = 'LOAD_SCORES';\r\nexport const actionLoadAllScores = 'LOAD_ALL_SCORES';\r\n\r\nexport const actionLoadInvitations = 'LOAD_INVITATIONS';\r\nexport const actionLoadEvents = 'LOAD_EVENTS';\r\n","// export const APP_URL_PATH = '/';\r\n// export const SERVER_PATH = 'http://localhost/';\r\n\r\nexport const APP_URL_PATH = '/organizer/';\r\nexport const SERVER_PATH = '../';\r\n\r\nexport const PERM_TEAMS_DATA_ACCESS = 1;\r\nexport const PERM_ADD_GAME = 2;\r\nexport const PERM_ALL_GAME_ACCESS = 3;\r\nexport const PERM_SCORE_TABLE_ACCESS = 6;\r\nexport const PERM_CONTENT_ADMIN = 7;\r\nexport const PERM_SYSTEM_ADMIN = 8;\r\n","import { logOut } from '../actions/userActions';\r\n\r\nconst communication = (url, method, body, dispatch, removeCookie) => new Promise(\r\n  (resolve, reject) => {\r\n    const payload = {};\r\n    const init = { method, credentials: 'include' };\r\n    if (body) {\r\n      init.body = JSON.stringify(body);\r\n    }\r\n    fetch(url, init).then((result) => {\r\n      payload.status = result.status;\r\n      return result.json();\r\n    }).then((result) => {\r\n      if (result.succeed) {\r\n        if (method === 'GET') {\r\n          resolve(result.payload);\r\n        } else {\r\n          resolve();\r\n        }\r\n      } else if (!result.authenticated) {\r\n        removeCookie('loggedin', { path: '/' });\r\n        dispatch(logOut());\r\n        payload.message = 'Unauthenticated.';\r\n        reject(payload);\r\n      } else {\r\n        payload.message = result.message;\r\n        if (result.inputErrors) {\r\n          payload.inputErrors =  result.inputErrors;\r\n        }\r\n        console.log(payload);\r\n        reject(payload);\r\n      }\r\n    }).catch((error) => {\r\n      console.log(`Error: ${error.message}`);\r\n      payload.message = 'Failed to connect to the server.';\r\n      reject(payload);\r\n    });\r\n  },\r\n);\r\n\r\nexport const restGet = (url, dispatch, removeCookie) => new Promise((resolve, reject) => {\r\n  communication(url, 'GET', null, dispatch, removeCookie).then((result) => resolve(result)).catch((error) => reject(error));\r\n});\r\n\r\nexport const restDelete = (url, dispatch, removeCookie) => new Promise((resolve, reject) => {\r\n  communication(url, 'DELETE', null, dispatch, removeCookie).then((result) => resolve(result)).catch((error) => reject(error));\r\n});\r\n\r\nexport const restPut = (url, body, dispatch, removeCookie) => new Promise((resolve, reject) => {\r\n  communication(url, 'PUT', body, dispatch, removeCookie).then((result) => resolve(result)).catch((error) => reject(error));\r\n});\r\n\r\nexport const restPost = (url, body, dispatch, removeCookie) => new Promise((resolve, reject) => {\r\n  communication(url, 'POST', body, dispatch, removeCookie).then((result) => resolve(result)).catch((error) => reject(error));\r\n});\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { loadUserData, logIn } from '../actions/userActions';\r\nimport * as Constants from '../constants';\r\nimport { restGet, restPost } from '../utils/communication';\r\n\r\nconst Login = () => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [btnDisabled, setBtnDisabled] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  const cookies = useCookies();\r\n  const setCookie = cookies[1];\r\n  const removeCookie = cookies[2];\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    restGet(`${Constants.SERVER_PATH}api/userData`, dispatch, removeCookie).then((result) => {\r\n      dispatch(logIn());\r\n      dispatch(loadUserData(result));\r\n    });\r\n  }, [dispatch, removeCookie]);\r\n\r\n  const handleUsernameChange = (event) => {\r\n    setUsername(event.target.value);\r\n  };\r\n\r\n  const handlePasswordChange = (event) => {\r\n    setPassword(event.target.value);\r\n  };\r\n\r\n  const loginClicked = (event) => {\r\n    event.preventDefault();\r\n    setBtnDisabled(true);\r\n    restPost(`${Constants.SERVER_PATH}api/login`, { username, password }, dispatch, removeCookie).then(() => {\r\n      setCookie('loggedin', '1', { path: '/' });\r\n      dispatch(logIn());\r\n    }).catch((error) => {\r\n      setBtnDisabled(false);\r\n      setErrorMessage(error.message);\r\n    });\r\n  };\r\n\r\n  const registerClicked = () => {\r\n    history.push(`${Constants.APP_URL_PATH}registration`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container col-sm-4\">\r\n      <form onSubmit={loginClicked}>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"exampleInputEmail1\">Username</label>\r\n          <input onChange={handleUsernameChange} value={username} type=\"text\" className=\"form-control\" id=\"exampleInputEmail1\" placeholder=\"Username\" />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"exampleInputPassword1\">Password</label>\r\n          <input onChange={handlePasswordChange} value={password} type=\"password\" className=\"form-control\" id=\"exampleInputPassword1\" placeholder=\"Password\" />\r\n        </div>\r\n        <button type=\"submit\" className=\"btn btn-primary\" disabled={btnDisabled}>\r\n          {btnDisabled && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\" />}\r\n          Log In\r\n        </button>\r\n        <button onClick={registerClicked} type=\"button\" className=\"btn btn-link\">Sign Up</button>\r\n      </form>\r\n      {errorMessage && <div className=\"alert alert-danger mt-5\" role=\"alert\">{errorMessage}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","const required = { allowEmpty: false, message: 'This field is required.' };\r\nconst nameConstraint = {\r\n  presence: required,\r\n  length: {\r\n    minimum: 3,\r\n    maximum: 32,\r\n    tooShort: 'The name must be between 3 and 32 characters.',\r\n    tooLong: 'The name must be between 3 and 32 characters.',\r\n  },\r\n  format: {\r\n    pattern: '\\\\p{L}+',\r\n    flags: 'u',\r\n    message: 'The name must only contain alphabetical characters.',\r\n  },\r\n};\r\n\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const signupConstraints = {\r\n  // regCode: {\r\n  //   presence: required,\r\n  //   length: {\r\n  //     is: 10,\r\n  //     wrongLength: 'Enter a valid registration code.',\r\n  //   },\r\n  //   format: {\r\n  //     pattern: '[A-Z|0-9]+',\r\n  //     message: 'Enter a valid registration code.',\r\n  //   },\r\n  // },\r\n  firstName: nameConstraint,\r\n  lastName: nameConstraint,\r\n  email: {\r\n    presence: required,\r\n    email: {\r\n      message: 'Enter a valid email address.',\r\n    },\r\n  },\r\n  phone: {\r\n    presence: required,\r\n    length: {\r\n      is: 10,\r\n      wrongLength: 'Enter a valid phone number.',\r\n    },\r\n    format: {\r\n      pattern: '[0-9]+',\r\n      message: 'Enter a valid phone number.',\r\n    },\r\n  },\r\n  cnp: {\r\n    presence: required,\r\n    length: {\r\n      is: 13,\r\n      wrongLength: 'Enter a valid CNP.',\r\n    },\r\n    cnp: true,\r\n  },\r\n  shirtType: {\r\n    presence: required,\r\n    selector: true,\r\n  },\r\n  shirtSize: {\r\n    presence: required,\r\n    selector: true,\r\n  },\r\n  username: {\r\n    presence: required,\r\n    length: {\r\n      minimum: 3,\r\n      maximum: 25,\r\n      tooShort: 'The username must be between 4 and 32 characters.',\r\n      tooLong: 'The username must be between 4 and 32 characters.',\r\n    },\r\n    format: {\r\n      pattern: '[a-z|0-9|\\\\.|_]+',\r\n      message: 'The usernames must only contain lowercase alphanumeric characters.',\r\n    },\r\n  },\r\n  password: {\r\n    presence: required,\r\n    length: {\r\n      minimum: 8,\r\n      maximum: 128,\r\n      tooShort: 'The password must be between 8 and 128 characters.',\r\n      tooLong: 'The password must be between 8 and 128 characters.',\r\n    },\r\n    password: true,\r\n  },\r\n  confirmPassword: {\r\n    presence: required,\r\n    confirmPassword: true,\r\n  },\r\n};\r\n","import moment from 'moment';\r\n\r\nconst isNumber = (value) => !Number.isNaN(Number(value));\r\nconst control = [2, 7, 9, 1, 4, 6, 3, 5, 8, 2, 7, 9];\r\n\r\nexport const isValidCNP = (input) => {\r\n  let hashResult = 0;\r\n  const cnp = [];\r\n\r\n  if (input.length !== 13) {\r\n    return false;\r\n  }\r\n  for (let i = 0; i < 13; i += 1) {\r\n    cnp[i] = parseInt(input[i], 10);\r\n    if (!isNumber(cnp[i])) {\r\n      return false;\r\n    }\r\n    if (i < 12) {\r\n      hashResult += cnp[i] * control[i];\r\n    }\r\n  }\r\n  hashResult %= 11;\r\n  if (hashResult === 10) {\r\n    hashResult = 1;\r\n  }\r\n\r\n  let year = cnp[1] * 10 + cnp[2];\r\n  switch (cnp[0]) {\r\n    case 1: case 2:\r\n      year += 1900;\r\n      break;\r\n    case 3: case 4:\r\n      year += 1800;\r\n      break;\r\n    case 5: case 6:\r\n      year += 2000;\r\n      break;\r\n    default:\r\n      return false;\r\n  }\r\n\r\n  const month = cnp[3] * 10 + cnp[4];\r\n  const day = cnp[5] * 10 + cnp[6];\r\n  return cnp[12] === hashResult && moment(`${year}/${month}/${day}`, 'YYYY/M/D', true).isValid();\r\n};\r\n\r\nexport const getInformation = (input) => {\r\n  const cnp = [];\r\n  for (let i = 0; i < 13; i += 1) {\r\n    cnp[i] = parseInt(input[i], 10);\r\n  }\r\n\r\n  let year = cnp[1] * 10 + cnp[2];\r\n  switch (cnp[0]) {\r\n    case 1: case 2:\r\n      year += 1900;\r\n      break;\r\n    case 3: case 4:\r\n      year += 1800;\r\n      break;\r\n    case 5: case 6:\r\n      year += 2000;\r\n      break;\r\n    default:\r\n      return false;\r\n  }\r\n  let sex;\r\n  switch (cnp[0]) {\r\n    case 1: case 3: case 5:\r\n      sex = 'Male';\r\n      break;\r\n    default:\r\n      sex = 'Female';\r\n  }\r\n\r\n  const month = cnp[3] * 10 + cnp[4];\r\n  const day = cnp[5] * 10 + cnp[6];\r\n\r\n  const bornDate = moment(`${year}/${month}/${day}`, 'YYYY/M/D', true);\r\n  const now = moment();\r\n\r\n  const duration = moment.duration(now.diff(bornDate));\r\n  const age = Math.floor(duration.asYears());\r\n\r\n  return ({ bornDate: bornDate.format('YYYY-MMM-DD'), age, sex });\r\n};\r\n","const calculatePasswordStrength = (value) => {\r\n  console.log(`Pwd check with value: ${value}`);\r\n  console.log(value);\r\n  let strength = 0;\r\n  if (value.match(/[\\p{Ll}]+/u)) {\r\n    strength += 1;\r\n  }\r\n  if (value.match(/\\p{Lu}/u)) {\r\n    strength += 1;\r\n  }\r\n  if (value.match(/[0-9]/)) {\r\n    strength += 1;\r\n  }\r\n  if (value.match(/[`~!@#$%^&*()\\-_=+{}[\\]\\\\|;:'\",<.>/?]+/)) {\r\n    strength += 1;\r\n  }\r\n  return strength;\r\n};\r\n\r\nexport default calculatePasswordStrength;\r\n","import React from 'react';\r\n\r\nconst ErrorPage = (input) => {\r\n  const { status, message } = input;\r\n  return (\r\n    <div className=\"d-flex justify-content-center mt-4\">\r\n      <div>\r\n      <h1 className=\"text-center text-danger display-4\">ERROR{status && ` ${status}`}</h1>\r\n      <h4 className=\"text-center text-danger\">{message}</h4>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorPage;\r\n","import React from 'react';\r\n\r\nconst LoadingPage = () => (\r\n    <div className=\"d-flex justify-content-center mt-4\">\r\n      <div className=\"spinner-border text-primary\" role=\"status\">\r\n        <span className=\"sr-only\">Loading...</span>\r\n      </div>\r\n    </div>\r\n);\r\n\r\nexport default LoadingPage;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { signupConstraints as rules } from '../constraints/signupConstraints';\r\nimport { isValidCNP } from '../utils/cnp';\r\nimport calculatePasswordStrength from '../utils/password';\r\nimport * as Constants from '../constants';\r\nimport { restGet, restPut } from '../utils/communication';\r\nimport { loadUserData, logIn } from '../actions/userActions';\r\nimport ErrorPage from './error_page.jsx';\r\nimport LoadingPage from './loading_page.jsx';\r\n\r\nconst  classNames = require('classnames');\r\nconst validate = require('validate.js');\r\n\r\nconst trimDecorator = (value) => value.trim();\r\nconst lowerCaseDecorator = (value) => value.toLowerCase();\r\n// const upperCaseDecorator = (value) => value.toUpperCase();\r\nconst capitalizeDecorator = (value) => (\r\n  value ? value[0].toUpperCase() + value.slice(1).toLowerCase() : value\r\n);\r\nconst trimAllDecorator = (value) => value.replace(/\\s/g, '');\r\n\r\nconst useQuery = () => new URLSearchParams(useLocation().search);\r\n\r\n// eslint-disable-next-line max-lines-per-function\r\nconst Registration = () => {\r\n  const query = useQuery();\r\n  // const [regCode, setRegCode] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [firstName, setFirstName] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [lastName, setLastName] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [email, setEmail] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [phone, setPhone] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [cnp, setCnp] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [shirtType, setShirtType] = useState({\r\n    selectedId: 0, error: '', options: [], ref: React.createRef(),\r\n  });\r\n  const [shirtSize, setShirtSize] = useState({\r\n    selectedId: 0, error: '', options: [], ref: React.createRef(),\r\n  });\r\n  const [username, setUsername] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [password, setPassword] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [confirmPassword, setConfirmPassword] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [btnDisabled, setBtnDisabled] = useState(false);\r\n\r\n  const [regKey] = useState(query.get('key'));\r\n  const [pageError, setPageError] = useState({});\r\n  const [isLoading, setLoading] = useState(true);\r\n\r\n  const history = useHistory();\r\n\r\n  const dispatch = useDispatch();\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  useEffect(() => {\r\n    restGet(`${Constants.SERVER_PATH}api/userData`, dispatch, removeCookie).then((result) => {\r\n      dispatch(logIn());\r\n      dispatch(loadUserData(result));\r\n    });\r\n  }, [dispatch, removeCookie]);\r\n\r\n  useEffect(() => {\r\n    restGet(`${Constants.SERVER_PATH}api/regKey?key=${regKey}`, dispatch, removeCookie).then((result) => {\r\n      if (!result) {\r\n        setPageError({ message: 'Invalid registration link.' });\r\n      }\r\n      setLoading(false);\r\n    });\r\n  }, [dispatch, regKey, removeCookie]);\r\n\r\n  const fields = {\r\n    // regCode: { state: regCode, setState: setRegCode, order: 1 },\r\n    firstName: { state: firstName, setState: setFirstName, order: 2 },\r\n    lastName: { state: lastName, setState: setLastName, order: 3 },\r\n    email: { state: email, setState: setEmail, order: 4 },\r\n    phone: { state: phone, setState: setPhone, order: 5 },\r\n    cnp: { state: cnp, setState: setCnp, order: 6 },\r\n    shirtType: { state: shirtType, setState: setShirtType, order: 7 },\r\n    shirtSize: { state: shirtSize, setState: setShirtSize, order: 8 },\r\n    username: { state: username, setState: setUsername, order: 9 },\r\n    password: { state: password, setState: setPassword, order: 10 },\r\n    confirmPassword: { state: confirmPassword, setState: setConfirmPassword, order: 11 },\r\n  };\r\n\r\n  validate.validators.cnp = (value) => {\r\n    if (!isValidCNP(value)) {\r\n      return 'Enter a valid CNP.';\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  validate.validators.password = (value) => {\r\n    if (calculatePasswordStrength(value) < 2) {\r\n      return 'The password must contain at least two character categories among the following: uppercase characters, lowercase characters, digits, special characters.';\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  validate.validators.confirmPassword = (value) => {\r\n    if (value !== password.value) {\r\n      return 'Password doesn\\'t match.';\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  validate.validators.selector = (value) => {\r\n    if (!value) {\r\n      return 'This field is required.';\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  const signUpClicked = (event) => {\r\n    event.preventDefault();\r\n    const validation = validate({\r\n      // regCode: regCode.value,\r\n      firstName: firstName.value,\r\n      lastName: lastName.value,\r\n      email: email.value,\r\n      phone: phone.value,\r\n      cnp: cnp.value,\r\n      shirtType: shirtType.selectedId,\r\n      shirtSize: shirtSize.selectedId,\r\n      username: username.value,\r\n      password: password.value,\r\n      confirmPassword: confirmPassword.value,\r\n    }, rules, { fullMessages: false });\r\n\r\n    if (validation) {\r\n      let minOrder = 999,\r\n        minKey = '';\r\n      Object.entries(validation)\r\n        .forEach(([key, value]) => {\r\n          if (fields[key].order < minOrder) {\r\n            minOrder = fields[key].order;\r\n            minKey = key;\r\n          }\r\n          fields[key].setState((rest) => ({ ...rest, error: value[0] }));\r\n        });\r\n      fields[minKey].state.ref.current.scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: 'start',\r\n      });\r\n    } else {\r\n      setBtnDisabled(true);\r\n      const body = {\r\n        // regCode: regCode.value,\r\n        regCode: regKey,\r\n        firstName: firstName.value,\r\n        lastName: lastName.value,\r\n        email: email.value,\r\n        phone: phone.value,\r\n        cnp: cnp.value,\r\n        shirtType: shirtType.selectedId,\r\n        shirtSize: shirtSize.selectedId,\r\n        username: username.value,\r\n        password: password.value,\r\n      };\r\n\r\n      restPut(`${Constants.SERVER_PATH}api/signup?key=${regKey}`, body, dispatch, removeCookie).then(() => {\r\n        // TODO valami zoldet a loginra\r\n        history.push(`${Constants.APP_URL_PATH}login`);\r\n      }).catch((error) => {\r\n        setBtnDisabled(false);\r\n        if (error.inputErrors) {\r\n          let minOrder = 999,\r\n            minKey = '';\r\n          Object.entries(error.inputErrors)\r\n            .forEach(([key, value]) => {\r\n              if (fields[key].order < minOrder) {\r\n                minOrder = fields[key].order;\r\n                minKey = key;\r\n              }\r\n              fields[key].setState((rest) => ({ ...rest, error: value }));\r\n            });\r\n          fields[minKey].state.ref.current.scrollIntoView({\r\n            behavior: 'smooth',\r\n            block: 'start',\r\n          });\r\n        } else {\r\n          // TODO egyeb error\r\n          console.log(error.message);\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    restGet(`${Constants.SERVER_PATH}api/shirtTypes`, dispatch, removeCookie).then((result) => {\r\n      setShirtType((state) => ({ ...state, options: result }));\r\n    }).then(() => restGet(`${Constants.SERVER_PATH}api/shirtSizes`, dispatch, removeCookie)).then((result) => {\r\n      setShirtSize((state) => ({ ...state, options: result }));\r\n    })\r\n      .catch((error) => {\r\n      // TODO load error\r\n        console.log(error.message);\r\n      });\r\n  }, [dispatch, removeCookie]);\r\n\r\n  const loginClicked = () => {\r\n    history.push(`${Constants.APP_URL_PATH}login`);\r\n  };\r\n\r\n  if (pageError.message) {\r\n    return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n  }\r\n\r\n  if (isLoading) {\r\n    return <LoadingPage />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center\">\r\n      <form onSubmit={signUpClicked}>\r\n        <Card title=\"Personal data\">\r\n          <FormRow>\r\n            <FormGroup mdSize=\"6\" na={firstName.ref}>\r\n              <Input type=\"text\" id=\"inputFirstName\" label=\"First name\" state={firstName} setState={setFirstName} constraint={{ value: rules.firstName }} decorators={\r\n                [trimDecorator, capitalizeDecorator]} />\r\n            </FormGroup>\r\n            <FormGroup mdSize=\"6\" na={lastName.ref}>\r\n              <Input type=\"text\" id=\"inputLastName\" label=\"Last name\" state={lastName} setState={setLastName} constraint={{ value: rules.lastName }} decorators={\r\n                [trimDecorator, capitalizeDecorator]} />\r\n            </FormGroup>\r\n          </FormRow>\r\n          <FormRow>\r\n            <FormGroup mdSize=\"6\" na={email.ref}>\r\n              <Input type=\"text\" id=\"inputEmail\" label=\"Email\" state={email} setState={setEmail} constraint={{ value: rules.email }} decorators={\r\n                [trimDecorator, lowerCaseDecorator]} />\r\n            </FormGroup>\r\n            <FormGroup mdSize=\"6\" na={phone.ref}>\r\n              <Input type=\"text\" id=\"inputPhone\" label=\"Phone\" state={phone} setState={setPhone} constraint={{ value: rules.phone }} decorators={[trimAllDecorator]} />\r\n            </FormGroup>\r\n          </FormRow>\r\n          <FormGroup na={cnp.ref}>\r\n            <Input type=\"text\" id=\"inputCNP\" label=\"CNP\" state={cnp} setState={setCnp} constraint={{ value: rules.cnp }} decorators={[trimDecorator]} />\r\n          </FormGroup>\r\n          <FormRow>\r\n            <FormGroup mdSize=\"6\">\r\n              <SelectInput id=\"inputShirtType\" label=\"Shirt type\" state={shirtType} setState={setShirtType} constraint={{ value: rules.shirtType }} />\r\n            </FormGroup>\r\n            <FormGroup mdSize=\"6\">\r\n              <SelectInput id=\"inputShirtSize\" label=\"Shirt size\" state={shirtSize} setState={setShirtSize} constraint={{ value: rules.shirtSize }} />\r\n            </FormGroup>\r\n          </FormRow>\r\n        </Card>\r\n        <Card title=\"User data\">\r\n          <FormGroup na={username.ref}>\r\n            <Input type=\"text\" id=\"inputUsername\" label=\"Username\" state={username} setState={setUsername} constraint={{ value: rules.username }} decorators={[trimDecorator, lowerCaseDecorator]} />\r\n          </FormGroup>\r\n          <FormRow>\r\n            <FormGroup mdSize=\"6\" na={password.ref}>\r\n              <Input type=\"password\" id=\"inputPassword\" label=\"Password\" state={password} setState={setPassword} constraint={{ value: rules.password }} />\r\n            </FormGroup>\r\n            <FormGroup mdSize=\"6\" na={confirmPassword.ref}>\r\n              <Input type=\"password\" id=\"inputConfirmPassword\" label=\"Confirm password\" state={confirmPassword} setState={setConfirmPassword} constraint={{ value: rules.confirmPassword }} />\r\n            </FormGroup>\r\n          </FormRow>\r\n        </Card>\r\n        <Card title=\"Submit\">\r\n          <button type=\"submit\" className=\"btn btn-primary\" disabled={btnDisabled}>\r\n            {btnDisabled && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\" />}\r\n            Sign Up\r\n          </button>\r\n          <button onClick={loginClicked} type=\"button\" className=\"btn btn-outline-secondary ml-2\">Back to log in</button>\r\n        </Card>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Card = (prop) => (\r\n    <div className=\"card border-dark my-2 mx-3\">\r\n      <div className=\"card-body\">\r\n        <h4>{prop.title}</h4>\r\n        {prop.children}\r\n      </div>\r\n    </div>\r\n);\r\n\r\nconst FormRow = (prop) => (\r\n    <div className=\"form-row\">\r\n      {prop.children}\r\n    </div>\r\n);\r\n\r\nconst FormGroup = (prop) => {\r\n  const { children, mdSize, na } = prop;\r\n  const classes = classNames({\r\n    'form-group': true,\r\n    [`col-md-${mdSize}`]: mdSize,\r\n  });\r\n  return (\r\n    <div ref={na} className={classes}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Input = (prop) => {\r\n  const {\r\n    type, id, label, state, setState, decorators, constraint,\r\n  } = prop;\r\n\r\n  const handleInputChange = (event) => {\r\n    const { value } = event.target;\r\n    setState((rest) => ({ ...rest, value, error: '' }));\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    let { value } = state;\r\n    if (decorators) {\r\n      for (let i = 0; i < decorators.length; i += 1) {\r\n        value = decorators[i](value);\r\n      }\r\n      setState((rest) => ({ ...rest, value }));\r\n    }\r\n    const validation = validate({ value }, constraint, { fullMessages: false });\r\n    if (validation) {\r\n      setState((rest) => ({ ...rest, error: validation.value[0] }));\r\n    }\r\n  };\r\n\r\n  const classes = classNames({\r\n    'form-control': true,\r\n    'is-invalid': state.error,\r\n  });\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <label htmlFor={id}>{label}</label>\r\n      <input onChange={handleInputChange} onBlur={handleBlur} type={type}\r\n             className={classes} id={id} placeholder={label} value={state.value} />\r\n      {state.error && <div className=\"invalid-feedback\">{state.error}</div>}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nconst SelectInput = (prop) => {\r\n  const {\r\n    id, label, state, setState, constraint,\r\n  } = prop;\r\n\r\n  const handleInputChange = (event) => {\r\n    const { selectedIndex } = event.target;\r\n    const selectedId = event.target[selectedIndex].id;\r\n    setState((rest) => ({ ...rest, selectedId, error: '' }));\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    const { selectedId } = state;\r\n    const validation = validate({ value: selectedId }, constraint, { fullMessages: false });\r\n    if (validation) {\r\n      setState((rest) => ({ ...rest, error: validation.value[0] }));\r\n    }\r\n  };\r\n\r\n  const classes = classNames({\r\n    'custom-select': true,\r\n    'is-invalid': state.error,\r\n  });\r\n\r\n  return (\r\n    <React.Fragment>\r\n    <label htmlFor={id}>{label}</label>\r\n    <select onChange={handleInputChange} onBlur={handleBlur}\r\n            id={id} className={classes} >\r\n      <option />\r\n      {state.options.map((item) => <option key={item.id} id={item.id}>{item.name}</option>)}\r\n    </select>\r\n      {state.error && <div className=\"invalid-feedback\">{state.error}</div>}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Registration;\r\n","import { actionLoadPosts, actionLoadPersons } from './actionTypes';\r\n\r\nexport const loadPosts = (posts) => ({ type: actionLoadPosts, payload: posts });\r\nexport const loadPersons = (persons) => ({ type: actionLoadPersons, payload: persons });\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport * as Constants from '../../constants';\r\nimport {useSelector} from 'react-redux';\r\n\r\nconst searchInString = (text, searched) => text.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase().search(searched.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase()) >= 0;\r\n\r\nconst StaffList = (input) => {\r\n  const { users, activePostId, searchValue } = input;\r\n  const userId = useSelector((state) => state.user.userData.id);\r\n  const history = useHistory();\r\n  if (users.length > 0) {\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"list-group mt-4 mx-2\">\r\n          {users\r\n            .filter((user) => user.postId === activePostId)\r\n            .filter((user) => !searchValue || searchInString(`${user.lastName} ${user.firstName}`, searchValue))\r\n            .filter((user) => user.id !== userId)\r\n            .map(\r\n              (user) => (\r\n                <div key={user.id} className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center\" >\r\n                  <span>\r\n                    <button onClick={() => history.push(`${Constants.APP_URL_PATH}players/${user.id}`)} className=\"btn btn-link m-0 p-0\">\r\n                      {user.lastName} {user.firstName}\r\n                    </button>\r\n                  </span>\r\n                  <span>\r\n                    <button type=\"button\" className=\"btn btn-sm btn-outline-success dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                        Contact\r\n                      </button>\r\n                      <div className=\"dropdown-menu\">\r\n                        <a className=\"dropdown-item\" href={`tel:${user.phone}`}>Call</a>\r\n                        <a className=\"dropdown-item\" href={`sms:${user.phone}`}>SMS</a>\r\n                        <div className=\"dropdown-divider\" />\r\n                        <a className=\"dropdown-item\" href={`mailto:${user.email}`}>Email</a>\r\n                      </div>\r\n                    </span>\r\n                </div>\r\n              ),\r\n            )}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n  return <p>Nothing to show.</p>;\r\n};\r\n\r\nexport default StaffList;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport * as Constants from '../../constants';\r\nimport { loadPosts, loadPersons } from '../../actions/staffActions';\r\nimport { restGet } from '../../utils/communication';\r\nimport StaffList from './staff_list.jsx';\r\n\r\nconst classNames = require('classnames');\r\n\r\nconst Staff = () => {\r\n  const posts = useSelector((state) => state.staff.posts);\r\n  const persons = useSelector((state) => state.staff.persons);\r\n  const [activePostId, setActivePostId] = useState(0);\r\n  const [selectedPerson, setSelectedPerson] = useState({});\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const dispatch = useDispatch();\r\n\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  useEffect(() => {\r\n    const removeModal = () => {\r\n      window.$('#exampleModal').modal('hide');\r\n      window.$('body').removeClass('modal-open');\r\n      window.$('.modal-backdrop').remove();\r\n    };\r\n    window.onpopstate = removeModal;\r\n    return () => {\r\n      removeModal();\r\n      window.onpopstate = () => {};\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    restGet(`${Constants.SERVER_PATH}api/posts`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadPosts(result));\r\n      if (result.length > 0) {\r\n        setActivePostId(result[0].id);\r\n      }\r\n    }).then(() => restGet(`${Constants.SERVER_PATH}api/users`, dispatch, removeCookie)).then((result) => {\r\n      dispatch(loadPersons(result));\r\n    })\r\n      .catch((error) => {\r\n        // TODO ide is majd valamilyen pageError kell\r\n        console.log(`Error: ${error.message}`);\r\n      });\r\n  }, [dispatch, removeCookie]);\r\n\r\n  const postClicked = (postId) => {\r\n    setActivePostId(postId);\r\n  };\r\n\r\n  const personClicked = (person) => {\r\n    setSelectedPerson(person);\r\n  };\r\n\r\n  const handleSearchValueChanged = (event) => {\r\n    setSearchValue(event.target.value);\r\n  };\r\n\r\n  const searchInString = (text, searched) => text.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase().search(searched.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase()) >= 0;\r\n\r\n  return (\r\n      <div className=\"d-flex justify-content-center mt-4\">\r\n        <div style={{ width: 500 }}>\r\n          <h1 className=\"text-center display-4\">Staff</h1>\r\n          <div className=\"form-group mx-2 mt-4\">\r\n            <input onChange={handleSearchValueChanged} className=\"form-control\" type=\"text\" placeholder=\"Search\" value={searchValue}/>\r\n          </div>\r\n          <div className=\"list-group list-group-horizontal mx-2 mt-2\" id=\"list-tab\" role=\"tablist\">\r\n            {posts.map((post) => {\r\n              const classes = classNames({\r\n                btn: true,\r\n                'shadow-none': true,\r\n                'rounded-0': true,\r\n                'list-group-item': true,\r\n                active: activePostId === post.id,\r\n                'flex-fill': true,\r\n              });\r\n              return (\r\n                <button key={post.id} onClick={() => postClicked(post.id)} className={classes}>\r\n                  {post.name}\r\n                </button>\r\n              );\r\n            })}\r\n            </div>\r\n            <StaffList users={persons} activePostId={activePostId} searchValue={searchValue} />\r\n        </div>\r\n        <div className=\"modal fade\" id=\"exampleModal\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h4>{selectedPerson.lastName} {selectedPerson.firstName}</h4>\r\n                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n              <div className=\"modal-body\">\r\n                <a href={`tel:${selectedPerson.phone}`} className=\"btn btn-lg btn-outline-primary\">Call</a>\r\n                <a href={`sms:${selectedPerson.phone}`} className=\"btn btn-lg btn-outline-primary ml-2\">SMS</a>\r\n                <a href={`mailto:${selectedPerson.email}`} className=\"btn btn-lg btn-outline-primary ml-2\">E-mail</a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default Staff;\r\n","import {\n  actionLoadTeams, actionLoadContacts, actionLoadTeam, actionLoadPlayers,\n} from './actionTypes';\n\nexport const loadTeams = (teams) => ({ type: actionLoadTeams, payload: teams });\nexport const loadContacts = (contacts) => ({ type: actionLoadContacts, payload: contacts });\nexport const loadTeam = (team) => ({ type: actionLoadTeam, payload: team });\nexport const loadPlayers = (players) => ({ type: actionLoadPlayers, payload: players });\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { useHistory, useRouteMatch } from 'react-router-dom';\r\nimport * as Constants from '../../constants';\r\nimport { loadContacts, loadTeams } from '../../actions/teamsActions';\r\nimport { restGet } from '../../utils/communication';\r\nimport ErrorPage from '../error_page.jsx';\r\nimport LoadingPage from '../loading_page.jsx';\r\n\r\nconst Teams = () => {\r\n  const teams = useSelector((state) => state.teams.teams);\r\n  const contacts = useSelector((state) => state.teams.contacts);\r\n  const dispatch = useDispatch();\r\n\r\n  const [pageError, setPageError] = useState({});\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  const history = useHistory();\r\n  const { path } = useRouteMatch();\r\n\r\n  useEffect(() => {\r\n    if (teams.length === 0) {\r\n      setLoading(true);\r\n    }\r\n    restGet(`${Constants.SERVER_PATH}api/teams`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadTeams(result));\r\n    }).then(() => restGet(`${Constants.SERVER_PATH}api/leaderContacts`, dispatch, removeCookie)).then((result) => {\r\n      setLoading(false);\r\n      dispatch(loadContacts(result));\r\n    })\r\n      .catch((error) => {\r\n        setLoading(false);\r\n        setPageError(error);\r\n      });\r\n  }, [dispatch, removeCookie, teams.length]);\r\n\r\n  if (pageError.message) {\r\n    return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n  }\r\n\r\n  if (isLoading) {\r\n    return <LoadingPage />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center mt-4\">\r\n      <div style={{ width: 500 }}>\r\n        <h1 className=\"text-center display-4 \">Teams</h1>\r\n        <div className=\"d-flex justify-content-center mt-4\">\r\n          <a className=\"btn btn-outline-primary ml-2\"\r\n             href={`mailto:${contacts.email ? contacts.email.join(',') : ''}`}>Email to all leaders</a>\r\n          <a className=\"btn btn-outline-primary ml-2\"\r\n             href={`sms:${contacts.email ? contacts.phone.join(',') : ''}`}>SMS\r\n            to all leaders</a>\r\n        </div>\r\n        <div className=\"list-group mt-4 mx-2\">\r\n          {teams.map((team) => (\r\n            <div key={team.id} className=\"list-group-item list-group-item-action\">\r\n              <button onClick={() => history.push(`${path}/${team.id}`)} type=\"button\"\r\n                      className=\"btn btn-link m-0 p-0 stretched-link\">\r\n                {team.name}\r\n              </button>\r\n            </div>))\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Teams;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { getInformation } from '../../utils/cnp';\r\nimport * as Constants from '../../constants';\r\n\r\nconst searchInString = (text, searched) => text.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase().search(searched.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase()) >= 0;\r\n\r\nconst PlayerList = (input) => {\r\n  const {\r\n    players, searchValue, withBadge, withAge,\r\n  } = input;\r\n  const history = useHistory();\r\n  if (players.length > 0) {\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"list-group mt-4 mx-2\">\r\n          {players\r\n            .filter((player) => !searchValue || searchInString(`${player.lastName} ${player.firstName}`, searchValue))\r\n            .map(\r\n              (player) => {\r\n                const cnp = getInformation(player.cnp);\r\n                return (\r\n                  <div key={player.id} className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center\" >\r\n                    <span>\r\n                      <button onClick={() => history.push(`${Constants.APP_URL_PATH}players/${player.id}`)} className=\"btn btn-link m-0 p-0\">\r\n                        {player.lastName} {player.firstName}\r\n                      </button>\r\n                      {(withBadge && player.rankId > 0) && <span className=\"badge badge-info ml-2\">{player.rankId === 2 ? 'Leader' : 'Vice leader' }</span>}\r\n                    </span>\r\n                    <span>\r\n                        {withAge && <span className={`badge badge-pill badge-${cnp.age >= 18 ? 'success' : 'warning'} mr-2`}>{cnp.age}</span>}\r\n                        <button type=\"button\" className=\"btn btn-sm btn-outline-success dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                          Contact\r\n                        </button>\r\n                        <div className=\"dropdown-menu\">\r\n                          <a className=\"dropdown-item\" href={`tel:${player.phone}`}>Call</a>\r\n                          <a className=\"dropdown-item\" href={`sms:${player.phone}`}>SMS</a>\r\n                          {player.email && (\r\n                            <React.Fragment>\r\n                              <div className=\"dropdown-divider\" />\r\n                              <a className=\"dropdown-item\" href={`mailto:${player.email}`}>Email</a>\r\n                            </React.Fragment>\r\n                          )}\r\n                        </div>\r\n                      </span>\r\n                  </div>\r\n                );\r\n              },\r\n            )}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n  return <p>Nothing to show.</p>;\r\n};\r\n\r\nexport default PlayerList;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport * as Constants from '../../constants';\r\nimport { loadTeam } from '../../actions/teamsActions';\r\nimport PlayerList from '../players/player_list.jsx';\r\nimport { restGet } from '../../utils/communication';\r\nimport ErrorPage from '../error_page.jsx';\r\nimport LoadingPage from '../loading_page.jsx';\r\n\r\nconst Team = () => {\r\n  const { id } = useParams();\r\n  const teamsData = useSelector((state) => state.teams.teamsData);\r\n  const dispatch = useDispatch();\r\n  const [pageError, setPageError] = useState({});\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  useEffect(() => {\r\n    if (!teamsData[id]) {\r\n      setLoading(true);\r\n    }\r\n    restGet(`${Constants.SERVER_PATH}api/teams/${id}`, dispatch, removeCookie).then((result) => {\r\n      setLoading(false);\r\n      dispatch(loadTeam(result));\r\n    }).catch((error) => {\r\n      setLoading(false);\r\n      setPageError({ status: error.status, message: error.message });\r\n    });\r\n  }, [dispatch, id, removeCookie]);\r\n\r\n  const renderTeamPage = () => {\r\n    const teamData = teamsData[id];\r\n    const { players } = teamData;\r\n    return (\r\n      <div className=\"d-flex justify-content-center mt-4\">\r\n        <div style={{ width: 500 }}>\r\n          <h2 className=\"text-center\" style={{ color: '#ffbc01' }}>{teamData.team.name}</h2>\r\n          <h6 className=\"text-center text-secondary\">{teamData.team.city}</h6>\r\n          <div className=\"d-flex justify-content-center mt-4\">\r\n            <a className=\"btn btn-outline-primary ml-2\" href={`mailto:${players ? players\r\n              .filter((player) => player.rankId > 0)\r\n              .map((player) => player.email).join(',') : ''}`}>Email to leaders</a>\r\n            <a className=\"btn btn-outline-primary ml-2\" href={`sms:${players ? players\r\n              .filter((player) => player.rankId > 0)\r\n              .map((player) => player.phone).join(',') : ''}`}>SMS to leaders</a>\r\n          </div>\r\n          <PlayerList players={players} withBadge={true} withAge={true}/>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n  if (pageError.message) {\r\n    return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n  }\r\n  if (isLoading || !teamsData[id]) {\r\n    return <LoadingPage />;\r\n  }\r\n  return renderTeamPage();\r\n};\r\n\r\nexport default Team;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { getInformation } from '../../utils/cnp';\r\nimport * as Constants from '../../constants';\r\nimport { restGet } from '../../utils/communication';\r\nimport ErrorPage from '../error_page.jsx';\r\n\r\nconst Player = () => {\r\n  const { id } = useParams();\r\n  const [player, setPlayer] = useState({});\r\n  const [pageError, setPageError] = useState({});\r\n\r\n  const dispatch = useDispatch();\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  useEffect(() => {\r\n    restGet(`${Constants.SERVER_PATH}api/players/${id}`, dispatch, removeCookie).then((result) => {\r\n      setPlayer(result);\r\n    }).catch((error) => {\r\n      setPageError(error);\r\n    });\r\n  }, [dispatch, id, removeCookie]);\r\n\r\n  if (!pageError.message) {\r\n    if (player.id) {\r\n      const cnp = getInformation(player.cnp);\r\n      let teamExtension = '';\r\n      if (player.rankId === 1) {\r\n        teamExtension = ' (Vice leader)';\r\n      }\r\n      if (player.rankId === 2) {\r\n        teamExtension = ' (Leader)';\r\n      }\r\n      return (\r\n        <React.Fragment>\r\n          <div className=\"d-flex justify-content-center mt-4\">\r\n            <div style={{ width: 500 }}>\r\n              <h2 className=\"text-center\" style={{ color: '#ffbc01' }}>{player.lastName} {player.firstName}</h2>\r\n              <h5 className=\"text-center text-secondary\">{player.team}{teamExtension}</h5>\r\n              <div className=\"list-group mt-4 mx-2\">\r\n                <DetailItem label=\"Born date:\" value={cnp.bornDate}/>\r\n                <DetailItem label=\"Age:\" value={cnp.age}/>\r\n                <DetailItem label=\"Sex:\" value={cnp.sex}/>\r\n                <DetailItem label=\"Phone:\" value={player.phone}/>\r\n                {player.email && <DetailItem label=\"Email:\" value={player.email}/>}\r\n                <DetailItem label=\"CNP:\" value={player.cnp}/>\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n        </React.Fragment>\r\n      );\r\n    }\r\n    return <h1>Loading</h1>;\r\n  }\r\n  return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n};\r\n\r\nconst DetailItem = (input) => (\r\n    <div className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center\">\r\n      <p className=\"p-0 m-0\">{input.label}</p>\r\n      <p className=\"p-0 m-0\">{input.value}</p>\r\n    </div>\r\n);\r\n\r\nexport default Player;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport * as Constants from '../../constants';\r\nimport { loadPlayers } from '../../actions/teamsActions';\r\nimport PlayerList from './player_list.jsx';\r\nimport { restGet } from '../../utils/communication';\r\nimport ErrorPage from '../error_page.jsx';\r\n\r\nconst Players = () => {\r\n  const players = useSelector((state) => state.teams.players);\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const [pageError, setPageError] = useState({});\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  useEffect(() => {\r\n    restGet(`${Constants.SERVER_PATH}api/players`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadPlayers(result));\r\n    }).catch((error) => {\r\n      setPageError(error);\r\n    });\r\n  }, [dispatch, removeCookie]);\r\n\r\n  const handleSearchValueChanged = (event) => {\r\n    setSearchValue(event.target.value);\r\n  };\r\n\r\n  if (!pageError.message) {\r\n    return (\r\n      <div className=\"d-flex justify-content-center mt-4\">\r\n        <div style={{ width: 500 }}>\r\n          <h1 className=\"text-center display-4\">Players</h1>\r\n          <div className=\"form-group mx-2 mt-4\">\r\n            <input onChange={handleSearchValueChanged} className=\"form-control\" type=\"text\" placeholder=\"Search\"\r\n                   value={searchValue}/>\r\n          </div>\r\n          <PlayerList\r\n            players={players} withBadge={false} searchValue={searchValue} withAge={true} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n};\r\n\r\nexport default Players;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nconst GameCard = (input) => {\r\n  const { game, reference, clickHandler } = input;\r\n  const [time, setTime] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (game.startTime) {\r\n      const start = game.startTime.split(/[- :]/);\r\n      const end = game.endTime.split(/[- :]/);\r\n      setTime(`${start[3]}:${start[4]} - ${end[3]}:${end[4]}`);\r\n    } else {\r\n      setTime('No time set.');\r\n    }\r\n  }, [game.startTime, game.endTime]);\r\n\r\n  return (\r\n    <div onClick={clickHandler} ref={reference} className=\"card shadow-sm mt-2 clickable\">\r\n      <div className=\"card-header bg-transparent py-1\">{time}</div>\r\n        <div className=\"card-body pb-0\">\r\n          <h5 className=\"card-title\">{game.name}</h5>\r\n          <p className=\"card-text\">{game.description}</p>\r\n          <p className=\"card-text mb-2\">\r\n            <small className=\"text-muted\">\r\n              {game.owner.lastName} {game.owner.firstName}\r\n            </small>\r\n          </p>\r\n\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// TODO az a nem ugy mukodik mint a link/history FONTOSSS\r\n\r\nexport default GameCard;\r\n","import {\n  actionLoadDays, actionLoadAllGames, actionLoadMyGames,\n  actionSetCurrentGameTab, actionLoadGame, actionLoadScores,\n  actionLoadAllScores,\n} from './actionTypes';\n\nexport const loadDays = (days) => ({ type: actionLoadDays, payload: days });\nexport const loadAllGames = (games) => ({ type: actionLoadAllGames, payload: games });\nexport const loadMyGames = (games) => ({ type: actionLoadMyGames, payload: games });\nexport const setCurrentTab = (currentTab) => (\n  { type: actionSetCurrentGameTab, payload: currentTab });\nexport const loadGame = (game) => ({ type: actionLoadGame, payload: game });\nexport const loadScores = (gameId, scores) => (\n  { type: actionLoadScores, payload: { gameId, scores } });\nexport const loadAllScores = (scores) => ({ type: actionLoadAllScores, payload: scores });\n","import { useRef, useLayoutEffect } from 'react';\r\n\r\nfunction getScrollPosition({ element, useWindow }) {\r\n  if (typeof window === 'undefined') return { x: 0, y: 0 };\r\n\r\n  const target = element ? element.current : document.body;\r\n  const position = target.getBoundingClientRect();\r\n\r\n  return useWindow\r\n    ? { x: window.scrollX, y: window.scrollY }\r\n    : { x: position.left, y: position.top };\r\n}\r\n\r\nconst useScrollPosition = (effect, deps, element, useWindow, wait) => {\r\n  const position = useRef(getScrollPosition({ useWindow }));\r\n\r\n  let throttleTimeout = null;\r\n\r\n  const callBack = () => {\r\n    const currPos = getScrollPosition({ element, useWindow });\r\n    effect({ prevPos: position.current, currPos });\r\n    position.current = currPos;\r\n    throttleTimeout = null;\r\n  };\r\n\r\n  useLayoutEffect(() => {\r\n    const handleScroll = () => {\r\n      if (wait) {\r\n        if (throttleTimeout === null) {\r\n          // eslint-disable-next-line react-hooks/exhaustive-deps\r\n          throttleTimeout = setTimeout(callBack, wait);\r\n        }\r\n      } else {\r\n        callBack();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('scroll', handleScroll);\r\n\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, deps);\r\n};\r\n\r\nexport default useScrollPosition;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useCookies } from 'react-cookie';\r\nimport GameCard from './game_card.jsx';\r\nimport { loadDays, loadAllGames, loadMyGames } from '../../actions/eventActions';\r\nimport { restGet } from '../../utils/communication';\r\nimport * as Constants from '../../constants';\r\nimport ErrorPage from '../error_page.jsx';\r\nimport useScrollPosition from '../../utils/scroll';\r\n\r\nconst classNames = require('classnames');\r\n\r\n// eslint-disable-next-line max-lines-per-function\r\nconst GameList = () => {\r\n  const currentTab = useSelector((state) => state.event.currentTab);\r\n  const days = useSelector((state) => state.event.days);\r\n  const games = useSelector((state) => {\r\n    if (currentTab === 'all') {\r\n      return state.event.allGames;\r\n    }\r\n    return state.event.myGames;\r\n  });\r\n  const [buttons, setButtons] = useState({});\r\n  const [uiGames, setUiGames] = useState([]);\r\n\r\n  const dispatch = useDispatch();\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n  const [pageError, setPageError] = useState({});\r\n  const [refs, setRefs] = useState([]);\r\n  const [selectedDay, setSelectedDay] = useState(0);\r\n  const history = useHistory();\r\n\r\n  const navRef = React.createRef();\r\n\r\n  useEffect(() => {\r\n    let gameUrl;\r\n    let loadFunc;\r\n    if (currentTab === 'all') {\r\n      gameUrl = `${Constants.SERVER_PATH}api/games`;\r\n      loadFunc = loadAllGames;\r\n    } else {\r\n      gameUrl = `${Constants.SERVER_PATH}api/games?own=true`;\r\n      loadFunc = loadMyGames;\r\n    }\r\n\r\n    restGet(`${Constants.SERVER_PATH}api/days`, dispatch, removeCookie).then((resultDays) => {\r\n      dispatch(loadDays(resultDays.map((day) => new Date(day))));\r\n    }).then(() => restGet(gameUrl, dispatch, removeCookie))\r\n      .then((resultGames) => {\r\n        dispatch(loadFunc(resultGames));\r\n      })\r\n      .catch((error) => {\r\n        setPageError(error);\r\n      });\r\n  }, [dispatch, currentTab, removeCookie]);\r\n\r\n  const handleScroll = () => {\r\n    if (refs.length > 0) {\r\n      let k = 0;\r\n      refs.forEach((ref, i) => {\r\n        if (i === 0 || ref.ref.current.getBoundingClientRect().bottom\r\n          - navRef.current.getBoundingClientRect().bottom <= 0) {\r\n          k = ref.num;\r\n        }\r\n      });\r\n      setSelectedDay(k);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const tmp = {};\r\n    const daySet = new Set(games.map((game) => (new Date(game.startTime)).getDate()));\r\n    let selected = false;\r\n    days.forEach((day) => {\r\n      const dayNum = day.getDate();\r\n      tmp[dayNum] = { num: dayNum, name: day.toLocaleDateString('en-US', { weekday: 'long' }), active: false };\r\n      tmp[dayNum].disabled = !daySet.has(dayNum);\r\n      if (!tmp[dayNum].disabled) {\r\n        tmp[dayNum].ref = React.createRef();\r\n        if (!selected) {\r\n          setSelectedDay(dayNum);\r\n          selected = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    const nana = [];\r\n    const tmpRefs = [];\r\n    let lastDay = -1;\r\n    games.forEach((game, i) => {\r\n      const currentDay = (new Date(game.startTime)).getDate();\r\n      if (game.startTime && (i === 0 || currentDay !== lastDay)) {\r\n        nana.push({ ...game, ref: tmp[currentDay].ref });\r\n        if (i === 0) {\r\n          tmpRefs.push({ num: currentDay });\r\n        } else {\r\n          const ref = React.createRef();\r\n          nana[i - 1] = { ...nana[i - 1], ref };\r\n          tmpRefs.push({ num: currentDay, ref });\r\n        }\r\n      } else {\r\n        nana.push({ ...game });\r\n      }\r\n      lastDay = currentDay;\r\n    });\r\n\r\n    setButtons(tmp);\r\n    setRefs(tmpRefs);\r\n    setUiGames(nana);\r\n  }, [currentTab, days, games]);\r\n\r\n  useScrollPosition(handleScroll);\r\n\r\n  const handleDayClicked = (button) => {\r\n    const navParams = navRef.current.getBoundingClientRect();\r\n    const offset = button.ref.current.getBoundingClientRect().top\r\n      - navParams.bottom + navParams.top;\r\n    window.scrollBy({ top: offset, behavior: 'smooth' });\r\n  };\r\n\r\n  if (!pageError.message) {\r\n    return (\r\n      <React.Fragment>\r\n        <nav ref={navRef} className=\"navbar navbar-light bg-white sticky-top mt-2 border shadow-sm\">\r\n          <p className=\"navbar-brand my-0\">{currentTab === 'all' ? 'All games' : 'My games'}</p>\r\n          <ul className=\"nav nav-pills\">\r\n            {Object.values(buttons).map((button) => {\r\n              const classes = classNames({\r\n                btn: true,\r\n                'btn-link': true,\r\n                'nav-link': true,\r\n                active: button.num === selectedDay,\r\n              });\r\n              return (\r\n                <li key={button.num} className=\"nav-item\">\r\n                  <button onClick={() => handleDayClicked(button)}\r\n                          className={classes} disabled={button.disabled}>\r\n                    {button.name}\r\n                  </button>\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        </nav>\r\n        <div>\r\n          {uiGames.map((game) => <GameCard reference={game.ref} clickHandler={() => history.push(`${Constants.APP_URL_PATH}games/${game.id}`)} key={game.id} game={game}/>)}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n  return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n};\r\n\r\nexport default GameList;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport GameList from './game_list.jsx';\r\nimport * as Constants from '../../constants';\r\nimport { setCurrentTab } from '../../actions/eventActions';\r\n\r\nconst classNames = require('classnames');\r\n\r\nconst Games = () => {\r\n  const userPermissions = useSelector((state) => state.user.permissions);\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const [permAllGames, setPermAllGames] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (userPermissions.includes(Constants.PERM_ALL_GAME_ACCESS)) {\r\n      setPermAllGames(true);\r\n      dispatch(setCurrentTab('all'));\r\n    } else {\r\n      dispatch(setCurrentTab('own'));\r\n    }\r\n  }, [dispatch, userPermissions]);\r\n\r\n  const addGameClicked = () => {\r\n    history.push(`${Constants.APP_URL_PATH}addgame`);\r\n  };\r\n\r\n  const tabClicked = (e, type) => {\r\n    window.$(`#${e.target.id}`).tab('show');\r\n    dispatch(setCurrentTab(type));\r\n  };\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center mt-4\">\r\n      <div style={{ width: 500 }}>\r\n        <h1 className=\"text-center display-4\">Games</h1>\r\n        {userPermissions.includes(Constants.PERM_ADD_GAME) && (\r\n          <div className=\"d-flex justify-content-center mt-4\">\r\n            <button onClick={addGameClicked} type=\"button\" className=\"btn btn-outline-primary\">Add game</button>\r\n          </div>\r\n        )}\r\n        <ul className=\"nav nav-tabs mt-4\" id=\"myTab\" role=\"tablist\">\r\n          {permAllGames && <TabHeader type=\"all\" label=\"All games\" active={true} click={tabClicked} /> }\r\n          <TabHeader type=\"own\" label=\"My games\" active={!permAllGames} click={tabClicked} />\r\n        </ul>\r\n        <div className=\"tab-content\" id=\"myTabContent\">\r\n          <div className=\"tab-pane fade show active\" id=\"tab-content\">\r\n            <GameList />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst TabHeader = (input) => {\r\n  const {\r\n    type, label, active, click,\r\n  } = input;\r\n\r\n  const classes = classNames({\r\n    'nav-link': true,\r\n    btn: true,\r\n    'btn-link': true,\r\n    'shadow-none': true,\r\n    active,\r\n  });\r\n  return (\r\n    <li className=\"nav-item\">\r\n      <button onClick={(e) => click(e, type)} className={classes} id={`${type}-tab`} data-target=\"#tab-content\">\r\n        {label}\r\n      </button>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Games;\r\n","const moment = require('moment');\r\n\r\nconst splitInput = (date) => date.split(/[- :]/);\r\nconst convertToDateTime = (t) => new Date(Date.UTC(t[0], t[1] - 1, t[2], t[3], t[4], t[5]));\r\nconst convertToDate = (t) => new Date(Date.UTC(t[0], t[1] - 1, t[2], 0, 0, 0));\r\nconst balanceTimeZone = (date) => new Date(date.getTime() + date.getTimezoneOffset() * 60000);\r\n\r\nexport const getTimeByDate = (date) => moment(balanceTimeZone(convertToDateTime(splitInput(date)))).format('HH:mm');\r\nexport const getLongByDate = (date) => (convertToDate(splitInput(date))).getTime();\r\nexport const getWeekdayByDate = (date) => balanceTimeZone(convertToDateTime(splitInput(date))).toLocaleDateString('en-US', { weekday: 'long' });\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { restDelete, restGet, restPost } from '../../utils/communication';\r\nimport * as Constants from '../../constants';\r\nimport { loadGame } from '../../actions/eventActions';\r\nimport { loadPersons } from '../../actions/staffActions';\r\nimport { getTimeByDate, getWeekdayByDate } from '../../utils/mysql_date';\r\nimport ErrorPage from '../error_page.jsx';\r\nimport LoadingPage from '../loading_page.jsx';\r\n\r\nconst classNames = require('classnames');\r\n\r\nconst Game = () => {\r\n  const { id } = useParams();\r\n  const gameData = useSelector((state) => state.event.gamesData);\r\n  const users = useSelector((state) => state.staff.persons);\r\n  const dispatch = useDispatch();\r\n  const cookies = useCookies();\r\n  const history = useHistory();\r\n  const removeCookie = cookies[2];\r\n  const [contributors, setContributors] = useState(new Set());\r\n  const [assignmentsModal, setAssignmentsModal] = useState(true);\r\n  const [newOwner, setNewOwner] = useState({ id: 0, firstName: '', lastName: '' });\r\n  const [dialogLoading, setDialogLoading] = useState(false);\r\n  const [dialogError, setDialogError] = useState('');\r\n\r\n  const [pageError, setPageError] = useState({});\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!gameData[id]) {\r\n      setLoading(true);\r\n    }\r\n    restGet(`${Constants.SERVER_PATH}api/games/${id}`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadGame(result));\r\n    }).then(() => restGet(`${Constants.SERVER_PATH}api/users`, dispatch, removeCookie)).then((persons) => {\r\n      dispatch(loadPersons(persons));\r\n      setLoading(false);\r\n    })\r\n      .catch((error) => {\r\n        setPageError(error);\r\n        setLoading(false);\r\n      });\r\n  }, [dispatch, gameData, id, removeCookie]);\r\n\r\n  useEffect(() => {\r\n    const removeModal = () => {\r\n      window.$('#listModal').modal('hide');\r\n      window.$('#moveOwnerDialog').modal('hide');\r\n      window.$('#deleteGameDialog').modal('hide');\r\n      window.$('body').removeClass('modal-open');\r\n      window.$('.modal-backdrop').remove();\r\n    };\r\n    window.onpopstate = removeModal;\r\n    return () => {\r\n      removeModal();\r\n      window.onpopstate = () => {};\r\n    };\r\n  }, []);\r\n\r\n  const updateContributors = () => {\r\n    setDialogLoading(true);\r\n    restPost(`${Constants.SERVER_PATH}api/games/${id}/assignments`, Array.from(contributors), dispatch, removeCookie).then(() => {\r\n      setDialogLoading(false);\r\n      window.$('#listModal').modal('hide');\r\n      restGet(`${Constants.SERVER_PATH}api/games/${id}`, dispatch, removeCookie).then((res) => {\r\n        dispatch(loadGame(res));\r\n      }).catch((error) => {\r\n        setPageError(error);\r\n      });\r\n    }).catch((error) => {\r\n      setDialogLoading(false);\r\n      setDialogError(error.message);\r\n    });\r\n  };\r\n\r\n  const moveOwner = (userId) => {\r\n    setDialogLoading(true);\r\n    restPost(`${Constants.SERVER_PATH}api/games/${id}/moveOwner`, userId, dispatch, removeCookie).then(() => {\r\n      setDialogLoading(false);\r\n      history.push(`${Constants.APP_URL_PATH}games`);\r\n    }).catch((error) => {\r\n      setDialogLoading(false);\r\n      setDialogError(error.message);\r\n    });\r\n  };\r\n\r\n  const deleteGame = () => {\r\n    setDialogLoading(true);\r\n    restDelete(`${Constants.SERVER_PATH}api/games/${id}`, dispatch, removeCookie).then(() => {\r\n      setDialogLoading(false);\r\n      history.push(`${Constants.APP_URL_PATH}games`);\r\n    }).catch((error) => {\r\n      setDialogLoading(false);\r\n      setDialogError(error.message);\r\n    });\r\n  };\r\n\r\n  const toggleCheckbox = (user) => {\r\n    const tmp = new Set(contributors);\r\n    if (tmp.has(user.id)) {\r\n      tmp.delete(user.id);\r\n    } else {\r\n      tmp.add(user.id);\r\n    }\r\n    setContributors(tmp);\r\n  };\r\n\r\n  const renderUserList = (withCheckbox, click = toggleCheckbox) => (\r\n      <div className=\"list-group\">\r\n        {users\r\n          .filter((user) => user.id !== gameData[id].ownerId)\r\n          .map(\r\n            (user) => (\r\n              <div onClick={() => click(user)} key={user.id} className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center clickable\" >\r\n                <p className=\"m-0 p-0\">{user.lastName} {user.firstName}</p>\r\n                {withCheckbox && (\r\n                  <input onChange={() => toggleCheckbox(user)} className=\"form-check-input-lg\" type=\"checkbox\" id={`ch-${user.id}`} checked={contributors.has(user.id)}/>\r\n                )}\r\n              </div>\r\n            ),\r\n          )}\r\n      </div>\r\n  );\r\n\r\n  const renderModal = (input) => {\r\n    const { errorMessage, isDialogLoading } = input;\r\n    return (\r\n      <div className=\"modal fade\" id=\"listModal\" data-backdrop=\"static\" data-keyboard=\"false\" tabIndex=\"-1\">\r\n        <div className=\"modal-dialog modal-dialog-scrollable\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h5 className=\"modal-title\">{assignmentsModal ? 'Select contributors' : 'Move ownership to:'}</h5>\r\n              <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" disabled={isDialogLoading}>\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              {assignmentsModal ? renderUserList(true) : renderUserList(false, (user) => {\r\n                setDialogError('');\r\n                setNewOwner(user);\r\n                window.$('#listModal').modal('hide');\r\n                window.$('#moveOwnerDialog').modal('show');\r\n              })}\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" disabled={isDialogLoading}>Close</button>\r\n              {assignmentsModal && (\r\n                <button onClick={() => {\r\n                  updateContributors();\r\n                }} type=\"button\" className=\"btn btn-primary\" disabled={isDialogLoading}>\r\n                  {isDialogLoading && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\" />}\r\n                  Save changes\r\n                </button>\r\n              )};\r\n            </div>\r\n            {errorMessage && <div className=\"alert alert-danger mx-2\" role=\"alert\">{errorMessage}</div>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderGamePage = () => {\r\n    const game = gameData[id];\r\n    return (\r\n      <div className=\"d-flex justify-content-center mt-2\">\r\n        <div style={{ width: 500 }}>\r\n          <div className=\"card text-center border-dark my-2 mx-2  px-2 sticky-top\">\r\n            <div className=\"card-body\">\r\n              <h2 className=\"card-title\">{game.name}</h2>\r\n              <div className=\"d-flex justify-content-center mt-2\">\r\n                <button onClick={() => {\r\n                  history.push(`${Constants.APP_URL_PATH}games/${id}/scores`);\r\n                }} className=\"btn btn-primary\">Add score</button>\r\n                {game.permissions.includes('edit') && (\r\n                  <button onClick={() => {\r\n                    history.push(`${Constants.APP_URL_PATH}games/${id}/edit`);\r\n                  }} className=\"btn btn-outline-secondary ml-2\">Edit game</button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {game.description && (\r\n            <Card title=\"Description\">\r\n              <p>{game.description}</p>\r\n            </Card>\r\n          )}\r\n          {game.notes && (\r\n            <Card title=\"Notes\">\r\n              <p>{game.notes}</p>\r\n            </Card>\r\n          )}\r\n          <Card title=\"Details\">\r\n            <div className=\"list-group mt-4 mx-2\">\r\n              <DetailItem label=\"Owner:\" value={`${game.lastName} ${game.firstName}`}/>\r\n              {game.location && (\r\n                <DetailItem label=\"Location:\" value={game.location}/>\r\n              )}\r\n              <DetailItem label=\"Player count:\" value={game.playerCount}/>\r\n              {game.startTime && (\r\n                <React.Fragment>\r\n                  <DetailItem label=\"Day:\" value={getWeekdayByDate(game.startTime)} />\r\n                  <DetailItem label=\"Time:\" value={`${getTimeByDate(game.startTime)} - ${getTimeByDate(game.endTime)}`} />\r\n                </React.Fragment>\r\n              )}\r\n            </div>\r\n          </Card>\r\n          {(game.assignments.length > 0 || game.permissions.includes('admin')) && (\r\n            <Card title=\"Contributors\">\r\n              <div className=\"d-flex flex-wrap\">\r\n                {game.assignments.map((contributor) => (\r\n                  <div key={contributor.id} style={{ background: '#17a2b8', color: 'white', fontSize: 'small' }}\r\n                       className=\"rounded px-2 py-1 mt-1 ml-1\">\r\n                    <b>{contributor.lastName} {contributor.firstName}</b>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              {game.permissions.includes('admin') && (\r\n                <button onClick={() => {\r\n                  setDialogError('');\r\n                  setAssignmentsModal(true);\r\n                  const tmp = new Set();\r\n                  game.assignments.forEach((user) => tmp.add(user.id));\r\n                  setContributors(tmp);\r\n                }} className=\"btn btn-link mt-2\" data-toggle=\"modal\" data-target=\"#listModal\" >Edit contributors</button>\r\n              )}\r\n            </Card>\r\n          )}\r\n          {game.permissions.includes('admin') && (\r\n            <Card title=\"Administration\">\r\n              <button onClick={() => setAssignmentsModal(false)} className=\"btn btn-outline-danger\" data-toggle=\"modal\" data-target=\"#listModal\">Move ownership</button>\r\n              <button onClick={() => {\r\n                setDialogError('');\r\n                window.$('#deleteGameDialog').modal('show');\r\n              }} className=\"btn btn-outline-danger ml-2\">Delete game</button>\r\n            </Card>\r\n          )}\r\n        </div>\r\n        {renderModal({ errorMessage: dialogError, isDialogLoading: dialogLoading })}\r\n\r\n        <ConfirmationDialog errorMessage={dialogError} isDialogLoading={dialogLoading} id=\"moveOwnerDialog\" title=\"Move ownership\" text={\r\n          (\r\n            <React.Fragment>\r\n              {'Do you want to move '}<b>{game.name}</b>{'\\'s ownership to '}<b>{newOwner.lastName} {newOwner.firstName}?</b>\r\n            </React.Fragment>\r\n          )\r\n        } confirmBtnText=\"Move\" btnHandler={() => {\r\n          moveOwner(newOwner.id);\r\n        }} />\r\n\r\n        <ConfirmationDialog errorMessage={dialogError} isDialogLoading={dialogLoading} id=\"deleteGameDialog\" title=\"Delete game\" text={\r\n          (\r\n            <React.Fragment>\r\n              {'Do you want to delete '}<b>{game.name}</b>?\r\n            </React.Fragment>\r\n          )\r\n        } confirmBtnText=\"Delete\" btnType=\"danger\" btnHandler={() => {\r\n          console.log(`Delete game ${game.name}`);\r\n          deleteGame();\r\n        }} />\r\n\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (pageError.message) {\r\n    return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n  }\r\n\r\n  if (isLoading) {\r\n    return <LoadingPage />;\r\n  }\r\n  if (gameData[id]) {\r\n    return renderGamePage();\r\n  }\r\n  return <LoadingPage />;\r\n};\r\n\r\nconst Card = (prop) => (\r\n  <div className=\"card border-gray my-2 mx-2\">\r\n    <div className=\"card-body\">\r\n      <h4>{prop.title}</h4>\r\n      {prop.children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst DetailItem = (input) => (\r\n  <div className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center\">\r\n    <p className=\"p-0 m-0\">{input.label}</p>\r\n    <p className=\"p-0 m-0\">{input.value}</p>\r\n  </div>\r\n);\r\n\r\nconst ConfirmationDialog = (input) => {\r\n  const {\r\n    id, title, text, confirmBtnText, btnHandler, errorMessage, isDialogLoading,\r\n  } = input;\r\n  let { btnType } = input;\r\n  if (!btnType) {\r\n    btnType = 'primary';\r\n  }\r\n  const classes = classNames({\r\n    btn: true,\r\n    [`btn-${btnType}`]: true,\r\n  });\r\n\r\n  return (\r\n    <div className=\"modal fade\" id={id} data-backdrop=\"static\" data-keyboard=\"false\" tabIndex=\"-1\">\r\n      <div className=\"modal-dialog modal-dialog-scrollable\">\r\n        <div className=\"modal-content\">\r\n          <div className=\"modal-header\">\r\n            <h5 className=\"modal-title\">{title}</h5>\r\n            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div className=\"modal-body\">{text}</div>\r\n          <div className=\"modal-footer\">\r\n            <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Cancel</button>\r\n            <button onClick={() => btnHandler()} type=\"button\" className={classes} disabled={isDialogLoading}>\r\n              {isDialogLoading && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\" />}\r\n              {confirmBtnText}\r\n            </button>\r\n          </div>\r\n          {errorMessage && <div className=\"alert alert-danger mx-2\" role=\"alert\">{errorMessage}</div>}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Game;\r\n","const required = { allowEmpty: false, message: 'This field is required.' };\r\nconst area = { length: { maximum: 1024, tooLong: 'Max length of this field is 1024 characters.' } };\r\n\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const gameConstraints = {\r\n  title: {\r\n    presence: required,\r\n    length: {\r\n      minimum: 3,\r\n      maximum: 32,\r\n      tooShort: 'The title must be between 3 and 32 characters.',\r\n      tooLong: 'The title must be between 3 and 32 characters.',\r\n    },\r\n  },\r\n  playerCount: {\r\n    numericality: {\r\n      onlyInteger: true,\r\n      strict: true,\r\n      greaterThanOrEqualTo: 0,\r\n      lessThanOrEqualTo: 16,\r\n      message: 'Player count must be between 0 and 16.',\r\n    },\r\n  },\r\n  description: area,\r\n  notes: area,\r\n  location: {\r\n    length: {\r\n      maximum: 32,\r\n      tooLong: 'The location must be between 3 and 32 characters.',\r\n    },\r\n  },\r\n  day: {\r\n    presence: required,\r\n    selector: true,\r\n  },\r\n  startTime: {\r\n    presence: required,\r\n    format: {\r\n      pattern: '[0-9]{2}:[0-9]{2}',\r\n      message: 'Enter a valid time',\r\n    },\r\n  },\r\n  endTime: {\r\n    presence: required,\r\n    format: {\r\n      pattern: '([0-1]?[0-9]|2[0-3]):[0-5][0-9]',\r\n      message: 'Enter a valid time',\r\n    },\r\n  },\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport { gameConstraints as rules } from '../../constraints/gameConstraints';\r\nimport {restGet, restPost, restPut} from '../../utils/communication';\r\nimport * as Constants from '../../constants';\r\nimport { loadGame } from '../../actions/eventActions';\r\nimport { getTimeByDate, getLongByDate } from '../../utils/mysql_date';\r\n\r\nconst validate = require('validate.js');\r\nconst  classNames = require('classnames');\r\n\r\nconst GameForm = (input) => {\r\n  const { edit } = input;\r\n  const { id } = useParams();\r\n  const gamesData = useSelector((state) => state.event.gamesData);\r\n  const [title, setTitle] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [playerCount, setPlayerCount] = useState({ value: 0, error: '', ref: React.createRef() });\r\n  const [description, setDescription] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [notes, setNotes] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [day, setDay] = useState({ options: [], error: '', ref: React.createRef() });\r\n  const [selectedDayId, setSelectedDayId] = useState(0);\r\n  const [startTime, setStartTime] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [endTime, setEndTime] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [location, setLocation] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [timeDisabled, setTimeDisabled] = useState(false);\r\n  const [btnDisabled, setBtnDisabled] = useState(false);\r\n\r\n  const fields = {\r\n    title: { state: title, setState: setTitle, order: 1 },\r\n    playerCount: { state: playerCount, setState: setPlayerCount, order: 2 },\r\n    description: { state: description, setState: setDescription, order: 3 },\r\n    notes: { state: notes, setState: setNotes, order: 4 },\r\n    location: { state: location, setState: setLocation, order: 5 },\r\n    day: { state: day, setState: setDay, order: 6 },\r\n    startTime: { state: startTime, setState: setStartTime, order: 7 },\r\n    endTime: { state: endTime, setState: setEndTime, order: 8 },\r\n  };\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  validate.validators.selector = (value) => {\r\n    if (!value) {\r\n      return 'This field is required.';\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (edit) {\r\n      restGet(`${Constants.SERVER_PATH}api/games/${id}`, dispatch, removeCookie).then((result) => {\r\n        dispatch(loadGame(result));\r\n      })\r\n        .catch((error) => {\r\n          console.log(error.message);\r\n        });\r\n    }\r\n  }, [edit, dispatch, id, removeCookie]);\r\n\r\n  useEffect(() => {\r\n    if (edit) {\r\n      if (gamesData[id]) {\r\n        setTitle({ ...title, value: gamesData[id].name });\r\n        setPlayerCount({ ...playerCount, value: gamesData[id].playerCount });\r\n\r\n        if (gamesData[id].description) {\r\n          setDescription({ ...title, value: gamesData[id].description });\r\n        }\r\n\r\n        if (gamesData[id].notes) {\r\n          setNotes({ ...notes, value: gamesData[id].notes });\r\n        }\r\n\r\n        if (gamesData[id].location) {\r\n          setLocation({ ...location, value: gamesData[id].location });\r\n        }\r\n\r\n        if (gamesData[id].startTime) {\r\n          setTimeDisabled(false);\r\n          setSelectedDayId(getLongByDate(gamesData[id].startTime));\r\n          setStartTime({ ...startTime, value: getTimeByDate(gamesData[id].startTime) });\r\n          setEndTime({ ...endTime, value: getTimeByDate(gamesData[id].endTime) });\r\n        } else {\r\n          setTimeDisabled(true);\r\n        }\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [edit, gamesData, id]);\r\n\r\n  useEffect(() => {\r\n    restGet(`${Constants.SERVER_PATH}api/days`, dispatch, removeCookie).then((resultDays) => {\r\n      setDay({\r\n        ...day,\r\n        options: resultDays.map((item) => {\r\n          const date = new Date(item);\r\n          const newDate = new Date(date.getTime() + (date.getTimezoneOffset() * 60000));\r\n          return ({ id: date.getTime(), name: newDate.toLocaleDateString('en-US', { weekday: 'long' }) });\r\n        }),\r\n      });\r\n    }).catch((error) => {\r\n      console.log(`Error: ${error.message}`);\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [dispatch, removeCookie]);\r\n\r\n  const simplifyNonRequiredField = (value) => (value.trim().length === 0 ? null : value);\r\n  const dateToSqlFormat = (value) => value.toISOString().slice(0, 16).replace('T', ' ');\r\n\r\n  const saveGameClicked = () => {\r\n    let validationObj = {\r\n      title: title.value,\r\n      playerCount: playerCount.value,\r\n      description: description.value,\r\n      notes: notes.value,\r\n      location: location.value,\r\n    };\r\n\r\n    const currentRules = { ...rules };\r\n    if (!timeDisabled) {\r\n      validationObj = {\r\n        ...validationObj,\r\n        day: selectedDayId,\r\n        startTime: startTime.value,\r\n        endTime: endTime.value,\r\n      };\r\n    } else {\r\n      delete currentRules.day;\r\n      delete currentRules.startTime;\r\n      delete currentRules.endTime;\r\n    }\r\n\r\n    console.log(validationObj);\r\n\r\n    const validation = validate(validationObj, currentRules, { fullMessages: false });\r\n    if (validation) {\r\n      console.log(validation);\r\n      let minOrder = 999,\r\n        minKey = '';\r\n      Object.entries(validation)\r\n        .forEach(([key, value]) => {\r\n          if (fields[key].order < minOrder) {\r\n            minOrder = fields[key].order;\r\n            minKey = key;\r\n          }\r\n          fields[key].setState((rest) => ({ ...rest, error: value[0] }));\r\n        });\r\n      fields[minKey].state.ref.current.scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: 'start',\r\n      });\r\n    } else {\r\n      console.log('Adding game');\r\n      const data = {\r\n        title: title.value,\r\n        playerCount: playerCount.value,\r\n        description: simplifyNonRequiredField(description.value),\r\n        notes: simplifyNonRequiredField(notes.value),\r\n        location: simplifyNonRequiredField(location.value),\r\n      };\r\n\r\n      if (!timeDisabled) {\r\n        const selectedDay = selectedDayId;\r\n        const t1 = startTime.value.split(':');\r\n        const t2 = endTime.value.split(':');\r\n        const start = (Number.parseInt(t1[0], 10) * 3600000) + (Number.parseInt(t1[1], 10) * 60000);\r\n        const end = (Number.parseInt(t2[0], 10) * 3600000) + (Number.parseInt(t2[1], 10) * 60000);\r\n\r\n        const ss = new Date(selectedDay + start);\r\n        const ee = new Date(end > start ? selectedDay + end : selectedDay + 86400000 + end);\r\n\r\n        data.startTime = dateToSqlFormat(ss);\r\n        data.endTime = dateToSqlFormat(ee);\r\n      } else {\r\n        data.startTime = null;\r\n        data.endTime = null;\r\n      }\r\n\r\n      const url = edit ? `${Constants.SERVER_PATH}api/games/${id}` : `${Constants.SERVER_PATH}api/games`;\r\n\r\n      setBtnDisabled(true);\r\n      (edit ? restPost : restPut)(url, data, dispatch, removeCookie).then(() => {\r\n        setBtnDisabled(false);\r\n        history.replace(edit ? `${Constants.APP_URL_PATH}games/${id}` : `${Constants.APP_URL_PATH}games`);\r\n      }).catch((error) => {\r\n        setBtnDisabled(false);\r\n        if (error.inputErrors) {\r\n          let minOrder = 999,\r\n            minKey = '';\r\n          Object.entries(error.inputErrors)\r\n            .forEach(([key, value]) => {\r\n              if (fields[key].order < minOrder) {\r\n                minOrder = fields[key].order;\r\n                minKey = key;\r\n              }\r\n              fields[key].setState((rest) => ({ ...rest, error: value }));\r\n            });\r\n          fields[minKey].state.ref.current.scrollIntoView({\r\n            behavior: 'smooth',\r\n            block: 'start',\r\n          });\r\n        } else {\r\n          // TODO egyeb error\r\n          console.log(error.message);\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center\">\r\n      <div style={{ width: 500 }}>\r\n        <form>\r\n          <Card title=\"Game data\">\r\n            <FormGroup na={title.ref}>\r\n              <Input type=\"text\" id=\"inputTitle\" label=\"Title\" state={title} setState={setTitle} constraint={{ value: rules.title }} />\r\n            </FormGroup>\r\n            <FormGroup na={playerCount.ref}>\r\n              <RangeInput id=\"inputPlayerCount\" label=\"Player count\" state={playerCount} setState={setPlayerCount} constraint={{ value: rules.playerCount }} min={0} max={16}/>\r\n            </FormGroup>\r\n            <FormGroup na={description.ref}>\r\n              <Input rows=\"4\" id=\"inputDescription\" label=\"Description\" state={description} setState={setDescription} constraint={{ value: rules.description }} />\r\n            </FormGroup>\r\n            <FormGroup na={notes.ref}>\r\n              <Input rows=\"4\" id=\"inputNotes\" label=\"Notes\" state={notes} setState={setNotes} constraint={{ value: rules.notes }} />\r\n            </FormGroup>\r\n            <FormGroup na={location.ref}>\r\n              <Input type=\"text\" id=\"inputLocation\" label=\"Location\" state={location} setState={setLocation} constraint={{ value: rules.location }} />\r\n            </FormGroup>\r\n          </Card>\r\n          <Card title=\"Game time\">\r\n            <FormRow>\r\n              <FormGroup mdSize=\"4\" na={day.ref}>\r\n                <SelectInput id=\"inputDay\" label=\"Day\" state={day} setState={setDay} selected={selectedDayId} setSelected={setSelectedDayId} constraint={{ value: rules.day }} disabled={timeDisabled}/>\r\n              </FormGroup>\r\n              <FormGroup mdSize=\"4\" na={startTime.ref}>\r\n                <Input type=\"time\" id=\"inputStartTime\" label=\"Start time\" state={startTime} setState={setStartTime} constraint={{ value: rules.time }} disabled={timeDisabled} />\r\n              </FormGroup>\r\n              <FormGroup mdSize=\"4\" na={endTime.ref}>\r\n                <Input type=\"time\" id=\"inputEndTime\" label=\"End time\" state={endTime} setState={setEndTime} constraint={{ value: rules.time }} disabled={timeDisabled} />\r\n              </FormGroup>\r\n            </FormRow>\r\n            <div className=\"form-check\">\r\n              <input onChange={(e) => {\r\n                setTimeDisabled(e.target.checked);\r\n              }} className=\"form-check-input\" type=\"checkbox\" id=\"inputTimeLater\" checked={timeDisabled}/>\r\n              <label className=\"form-check-label\" htmlFor=\"inputTimeLater\">Add later</label>\r\n            </div>\r\n          </Card>\r\n          <Card title=\"Submit\">\r\n            <button onClick={() => saveGameClicked()} type=\"button\" className=\"btn btn-primary\" disabled={btnDisabled}>\r\n              {btnDisabled && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\" />}\r\n              {edit ? 'Edit game' : 'Save game'}\r\n            </button>\r\n          </Card>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Card = (prop) => (\r\n  <div className=\"card border-dark my-2 mx-3\">\r\n    <div className=\"card-body\">\r\n      <h4>{prop.title}</h4>\r\n      {prop.children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst FormRow = (prop) => (\r\n  <div className=\"form-row\">\r\n    {prop.children}\r\n  </div>\r\n);\r\n\r\nconst FormGroup = (prop) => {\r\n  const { children, mdSize, na } = prop;\r\n  const classes = classNames({\r\n    'form-group': true,\r\n    [`col-md-${mdSize}`]: mdSize,\r\n  });\r\n  return (\r\n    <div ref={na} className={classes}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Input = (prop) => {\r\n  const {\r\n    type, id, label, state, setState, decorators, rows, constraint, disabled,\r\n  } = prop;\r\n\r\n  const handleInputChange = (event) => {\r\n    const { value } = event.target;\r\n    setState((rest) => ({ ...rest, value, error: '' }));\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    let { value } = state;\r\n    if (decorators) {\r\n      for (let i = 0; i < decorators.length; i += 1) {\r\n        value = decorators[i](value);\r\n      }\r\n      setState((rest) => ({ ...rest, value }));\r\n    }\r\n    const validation = validate({ value }, constraint, { fullMessages: false });\r\n    if (validation) {\r\n      setState((rest) => ({ ...rest, error: validation.value[0] }));\r\n    }\r\n  };\r\n\r\n  const classes = classNames({\r\n    'form-control': true,\r\n    'is-invalid': !disabled && state.error,\r\n  });\r\n\r\n  const getInput = () => (rows ? (\r\n      <textarea\r\n        onChange={handleInputChange}\r\n        onBlur={handleBlur} rows={rows}\r\n        className={classes}\r\n        id={id}\r\n        placeholder={label}\r\n        value={state.value}\r\n        disabled={disabled}/>\r\n  ) : (\r\n      <input\r\n        onChange={handleInputChange}\r\n        onBlur={handleBlur} type={type}\r\n        className={classes}\r\n        id={id}\r\n        placeholder={label}\r\n        value={state.value}\r\n        disabled={disabled}/>\r\n  ));\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <label htmlFor={id}>{label}</label>\r\n      {getInput()}\r\n      { !disabled && state.error && <div className=\"invalid-feedback\">{state.error}</div>}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nconst SelectInput = (prop) => {\r\n  const {\r\n    id, label, state, setState, selected, setSelected, constraint, disabled,\r\n  } = prop;\r\n\r\n  const handleInputChange = (event) => {\r\n    const { selectedIndex } = event.target;\r\n    const selectedId = event.target[selectedIndex].id;\r\n    setSelected(Number.parseInt(selectedId, 10));\r\n    setState((rest) => ({ ...rest, error: '' }));\r\n    // setState((rest) => ({ ...rest, selectedId, error: '' }));\r\n    // console.log(new Date(Number.parseInt(selectedId, 10)));\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    // const { selectedId } = state;\r\n    const validation = validate({ value: selected }, constraint, { fullMessages: false });\r\n    if (validation) {\r\n      setState((rest) => ({ ...rest, error: validation.value[0] }));\r\n    }\r\n  };\r\n\r\n  const classes = classNames({\r\n    'custom-select': true,\r\n    'is-invalid': !disabled && state.error,\r\n  });\r\n\r\n  const findValue = () => {\r\n    if (selected === 0) {\r\n      return '';\r\n    }\r\n    for (let i = 0; i < state.options.length; i += 1) {\r\n      if (state.options[i].id === selected) {\r\n        console.log(state.options[i].name);\r\n        return state.options[i].name;\r\n      }\r\n    }\r\n    return '';\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <label htmlFor={id}>{label}</label>\r\n      <select\r\n        onChange={handleInputChange}\r\n        onBlur={handleBlur}\r\n        id={id}\r\n        className={classes}\r\n        disabled={disabled}\r\n        value={findValue()}>\r\n        <option value=\"\"/>\r\n        {state.options.map((item) => <option key={item.id} id={item.id}>{item.name}</option>)}\r\n      </select>\r\n      { !disabled && state.error && <div className=\"invalid-feedback\">{state.error}</div>}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nconst RangeInput = (input) => {\r\n  const {\r\n    id, label, state, setState, constraint, min, max,\r\n  } = input;\r\n\r\n  const handleInputChange = (event) => {\r\n    const { value } = event.target;\r\n    setState((rest) => ({ ...rest, value, error: '' }));\r\n\r\n    const validation = validate({ value }, constraint, { fullMessages: false });\r\n    if (validation) {\r\n      setState((rest) => ({ ...rest, error: validation.value[0] }));\r\n    }\r\n  };\r\n\r\n  const classes = classNames({\r\n    'form-control-range': true,\r\n    'is-invalid': state.error,\r\n  });\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <label htmlFor={id}>{label}: <b>{state.value}</b></label>\r\n      <input onChange={handleInputChange} min={min} max={max} type=\"range\" className={classes} id={id} value={state.value} />\r\n      {state.error && <div className=\"invalid-feedback\">{state.error}</div>}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default GameForm;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport {\r\n  restDelete, restGet, restPost, restPut,\r\n} from '../../utils/communication';\r\nimport * as Constants from '../../constants';\r\nimport { loadTeams } from '../../actions/teamsActions';\r\nimport { loadGame, loadScores } from '../../actions/eventActions';\r\nimport ErrorPage from '../error_page.jsx';\r\nimport LoadingPage from '../loading_page.jsx';\r\n\r\nconst classNames = require('classnames');\r\n\r\nconst Scores = () => {\r\n  const { id } = useParams();\r\n  const game = useSelector((state) => state.event.gamesData[id]);\r\n  const teams = useSelector((state) => state.teams.teams);\r\n  const scores = useSelector((state) => state.event.scores);\r\n  const [uiScores, setUiScores] = useState([]);\r\n  const [scoreCounter, setScoreCounter] = useState('');\r\n  const dispatch = useDispatch();\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  const [currentTeamId, setCurrentTeamId] = useState(null);\r\n  const [currentScore, setCurrentScore] = useState('');\r\n  const [currentFairplay, setCurrentFairplay] = useState(false);\r\n  const [editing, setEditing] = useState(false);\r\n\r\n  const [pageError, setPageError] = useState({});\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  const [dialogLoading, setDialogLoading] = useState(false);\r\n  const [dialogError, setDialogError] = useState('');\r\n  const [inputError, setInputError] = useState('');\r\n\r\n  const scoreSorter = (a, b) => {\r\n    const x1 = a.score || a.score === 0,\r\n      x2 = b.score || b.score === 0;\r\n    if (x1) {\r\n      if (x2) {\r\n        if (a.score > b.score) {\r\n          return -1;\r\n        }\r\n        if (a.score < b.score) {\r\n          return 1;\r\n        }\r\n        if (a.fairplay) {\r\n          return b.fairplay ? 0 : -1;\r\n        }\r\n        return b.fairplay ? 1 : 0;\r\n      }\r\n      return 1;\r\n    }\r\n    return x2 ? -1 : 0;\r\n  };\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    restGet(`${Constants.SERVER_PATH}api/games/${id}`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadGame(result));\r\n    }).then(() => restGet(`${Constants.SERVER_PATH}api/teams`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadTeams(result));\r\n    }).then(() => restGet(`${Constants.SERVER_PATH}api/games/${id}/scores`, dispatch, removeCookie).then((mScores) => {\r\n      dispatch(loadScores(id, mScores));\r\n      setLoading(false);\r\n    }))).catch((error) => {\r\n      setPageError(error);\r\n      setLoading(false);\r\n    });\r\n  }, [dispatch, id, removeCookie]);\r\n\r\n  useEffect(() => {\r\n    const scoreList = scores[id],\r\n      output = [];\r\n    if (teams.length > 0 && scoreList) {\r\n      const obj = {};\r\n      scoreList.forEach((item) => {\r\n        obj[item.teamId] = { score: item.score, fairplay: item.fairplay };\r\n      });\r\n\r\n      teams.forEach((item) => {\r\n        const scoreData = obj[item.id];\r\n        if (scoreData) {\r\n          output.push({ ...item, score: scoreData.score, fairplay: scoreData.fairplay });\r\n        } else {\r\n          output.push({ ...item });\r\n        }\r\n      });\r\n      setScoreCounter(`${scoreList.length}/${teams.length} scored`);\r\n      setUiScores(output.sort(scoreSorter));\r\n    }\r\n  }, [id, scores, teams]);\r\n\r\n  useEffect(() => {\r\n    const removeModal = () => {\r\n      window.$('#scoreModal').modal('hide');\r\n      window.$('body').removeClass('modal-open');\r\n      window.$('.modal-backdrop').remove();\r\n    };\r\n    window.onpopstate = removeModal;\r\n    return () => {\r\n      removeModal();\r\n      window.onpopstate = () => {};\r\n    };\r\n  }, []);\r\n\r\n  const updateScore = () => {\r\n    const checkInt = (str) => {\r\n      const s = String(str);\r\n      const n = Math.floor(Number(s));\r\n      return n !== Infinity && String(n) === s && n >= 0;\r\n    };\r\n\r\n    if (checkInt(currentScore)) {\r\n      setDialogLoading(true);\r\n      const body = {\r\n        teamId: currentTeamId,\r\n        score: Number(currentScore),\r\n        fairplay: currentFairplay,\r\n      };\r\n      (editing ? restPost : restPut)(`${Constants.SERVER_PATH}api/games/${id}/scores`, body, dispatch, removeCookie).then(() => {\r\n        window.$('#scoreModal').modal('hide');\r\n        setDialogLoading(false);\r\n        restGet(`${Constants.SERVER_PATH}api/games/${id}/scores`, dispatch, removeCookie).then((mScores) => {\r\n          dispatch(loadScores(id, mScores));\r\n        }).catch((error) => {\r\n          setPageError(error);\r\n        });\r\n      }).catch((error) => {\r\n        setDialogError(error.message);\r\n        setDialogLoading(false);\r\n      });\r\n    } else {\r\n      setInputError('Enter a number greater than or equal to 0.');\r\n    }\r\n  };\r\n\r\n  const deleteScore = () => {\r\n    setDialogLoading(true);\r\n    restDelete(`${Constants.SERVER_PATH}api/games/${id}/scores/${currentTeamId}`, dispatch, removeCookie).then(() => {\r\n      window.$('#scoreModal').modal('hide');\r\n      setDialogLoading(false);\r\n      restGet(`${Constants.SERVER_PATH}api/games/${id}/scores`, dispatch, removeCookie).then((mScores) => {\r\n        dispatch(loadScores(id, mScores));\r\n      }).catch((error) => {\r\n        setPageError(error);\r\n      });\r\n    }).catch((error) => {\r\n      setDialogError(error.message);\r\n      setDialogLoading(false);\r\n    });\r\n  };\r\n\r\n  const renderScoreModal = () => {\r\n    const renderScoreInput = () => {\r\n      const classes = classNames({\r\n        'form-control': true,\r\n        'is-invalid': inputError,\r\n      });\r\n\r\n      return (\r\n        <React.Fragment>\r\n          <input autoComplete=\"off\" onChange={(e) => {\r\n            setInputError('');\r\n            setCurrentScore(e.target.value);\r\n          }} type=\"number\" min=\"0\" className={classes} id=\"input_score\" placeholder=\"Score\" value={currentScore} disabled={dialogLoading}/>\r\n          {inputError && <div className=\"invalid-feedback\">{inputError}</div>}\r\n        </React.Fragment>\r\n      );\r\n    };\r\n\r\n    return (\r\n      <div className=\"modal fade\" id=\"scoreModal\" data-backdrop=\"static\" data-keyboard=\"false\" tabIndex=\"-1\">\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h5 className=\"modal-title\">Score</h5>\r\n              <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" disabled={dialogLoading}>\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <div className=\"form-row\">\r\n                <div className=\"form-group col-md-6\">\r\n                  {renderScoreInput()}\r\n                </div>\r\n                <div className=\"form-group col-md-6 align-self-center\">\r\n                  <div className=\"form-check\">\r\n                    <input onChange={(e) => {\r\n                      setCurrentFairplay(e.target.checked);\r\n                    }} autoComplete=\"off\" type=\"checkbox\" className=\"form-check-input\" id=\"input_fairplay\"\r\n                           checked={currentFairplay} disabled={dialogLoading}/>\r\n                    <label className=\"form-check-label\" htmlFor=\"input_fairplay\">Fair play</label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" disabled={dialogLoading}>Close\r\n              </button>\r\n              {editing && (\r\n                <button onClick={deleteScore} type=\"button\" className=\"btn btn-danger\" disabled={dialogLoading}>\r\n                  {dialogLoading\r\n                  && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\"/>}\r\n                  Delete score\r\n                </button>\r\n              )}\r\n              <button onClick={updateScore} type=\"button\" className=\"btn btn-primary\" disabled={dialogLoading}>\r\n                {dialogLoading\r\n                && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\"/>}\r\n                {editing ? 'Edit score' : 'Save score'}\r\n              </button>\r\n            </div>\r\n            {dialogError && <div className=\"alert alert-danger mx-2\" role=\"alert\">{dialogError}</div>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (pageError.message) {\r\n    return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n  }\r\n\r\n  if (isLoading) {\r\n    return <LoadingPage />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center mt-4\">\r\n      <div style={{ width: 500 }}>\r\n        {game && <h2 className=\"text-center\">{game.name}</h2>}\r\n        <h5 className=\"text-center\">{scoreCounter}</h5>\r\n        <div className=\"list-group mt-4 mx-2\">\r\n          {uiScores.length > 0 && uiScores.map((scoreItem) => (\r\n            <div key={scoreItem.id} className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center clickable\"\r\n            onClick={() => {\r\n              setDialogLoading(false);\r\n              setDialogError('');\r\n              setCurrentTeamId(scoreItem.id);\r\n              if (scoreItem.score || scoreItem.score === 0) {\r\n                setEditing(true);\r\n                setCurrentScore(scoreItem.score);\r\n                setCurrentFairplay(Boolean(scoreItem.fairplay));\r\n              } else {\r\n                setEditing(false);\r\n                setCurrentScore('');\r\n                setCurrentFairplay(false);\r\n              }\r\n              window.$('#scoreModal').modal('show');\r\n            }}>\r\n              <span>\r\n                <p className=\"m-0 p-0\">\r\n                  {scoreItem.name}\r\n                </p>\r\n              </span>\r\n              <span>\r\n                {scoreItem.fairplay === 1 && <span className=\"badge badge-pill badge-success mr-2\">fair</span>}\r\n                {(scoreItem.score || scoreItem.score === 0)\r\n                  && <span><b>{scoreItem.score}</b></span>\r\n                }\r\n              </span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      {renderScoreModal()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Scores;\r\n","import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport * as Constants from '../constants';\r\nimport { restGet } from '../utils/communication';\r\nimport { loadTeams } from '../actions/teamsActions';\r\nimport { loadAllScores } from '../actions/eventActions';\r\n\r\nconst ScoreTable = () => {\r\n  const teams = useSelector((state) => state.teams.teams);\r\n  const scores = useSelector((state) => state.event.allScores);\r\n\r\n  const dispatch = useDispatch();\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  useEffect(() => {\r\n    restGet(`${Constants.SERVER_PATH}api/teams`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadTeams(result));\r\n    }).then(() => restGet(`${Constants.SERVER_PATH}api/scores`, dispatch, removeCookie)).then((result) => {\r\n      dispatch(loadAllScores(result));\r\n    })\r\n      .catch((error) => {\r\n        console.log(error.message);\r\n      });\r\n  }, [dispatch, removeCookie]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"table-responsive\">\r\n    <table className=\"table table-sm table-dark table-striped sticky-header\">\r\n      <thead>\r\n        <tr>\r\n          <th scope=\"col\">Games</th>\r\n          {teams.map((team) => <th key={team.id} scope=\"col\" className=\"text-center\">{team.name}</th>)}\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n      {scores.map((game) => (\r\n          <tr key={game.id}>\r\n            <th scope=\"row\">{game.name}</th>\r\n            {teams.map((team) => {\r\n              if (game.scores[team.id]) {\r\n                return <td key={team.id} className=\"text-center\">{game.scores[team.id].score}</td>;\r\n              }\r\n              return <td key={team.id} className=\"text-center\">-</td>;\r\n            })}\r\n          </tr>\r\n      ))}\r\n      </tbody>\r\n    </table>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default ScoreTable;\r\n","import { actionLoadInvitations, actionLoadEvents } from './actionTypes';\r\n\r\nexport const loadInvitations = (invitations) => ({\r\n  type: actionLoadInvitations, payload: invitations,\r\n});\r\n\r\nexport const loadEvents = (events) => ({ type: actionLoadEvents, payload: events });\r\n","const required = { allowEmpty: false, message: 'This field is required.' };\r\nconst inputSelect = { presence: required, selector: true };\r\n\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const invitationConstraints = {\r\n  name: {\r\n    presence: required,\r\n    length: {\r\n      minimum: 3,\r\n      maximum: 16,\r\n      tooShort: 'The title must be between 3 and 16 characters.',\r\n      tooLong: 'The title must be between 3 and 16 characters.',\r\n    },\r\n  },\r\n  event: inputSelect,\r\n  post: inputSelect,\r\n  role: inputSelect,\r\n};\r\n","import produce from 'immer';\r\nimport React from 'react';\r\nimport {invitationConstraints as rules} from '../constraints/invitationConstraints';\r\n\r\nconst validate = require('validate.js');\r\nconst classNames = require('classnames');\r\n\r\nexport const FormRow = (input) => (\r\n  <div className=\"form-row\">\r\n    {input.children}\r\n  </div>\r\n);\r\n\r\nexport const FormGroup = (input) => {\r\n  const { children, size, na } = input;\r\n  const classes = classNames({\r\n    'form-group': true,\r\n    [`col-md-${size}`]: size,\r\n  });\r\n  return (\r\n    <div ref={na} className={classes}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const TextInput = (input) => {\r\n  const {\r\n    contextual, id, label, inputKey, decorators, constraint,\r\n  } = input;\r\n  let { type } = input;\r\n  const { inputs, setInputs, isLoading } = contextual;\r\n  const { value, error } = inputs[inputKey];\r\n  if (!type) {\r\n    type = 'text';\r\n  }\r\n  const classes = classNames({\r\n    'form-control': true,\r\n    'is-invalid': error,\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    setInputs(produce(inputs, (draft) => {\r\n      draft[inputKey].error = '';\r\n      draft[inputKey].value = e.target.value;\r\n    }));\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    let tmp = value;\r\n    if (decorators) {\r\n      decorators.forEach((decorator) => {\r\n        tmp = decorator(tmp);\r\n      });\r\n    }\r\n    if (constraint) {\r\n      const validation = validate({ value: tmp }, constraint,\r\n        { fullMessages: false });\r\n      const newError = validation ? validation.value[0] : '';\r\n      if (tmp !== value || newError) {\r\n        setInputs(produce(inputs, (draft) => {\r\n          draft[inputKey].value = tmp;\r\n          draft[inputKey].error = newError;\r\n        }));\r\n      }\r\n    }\r\n    console.log(inputs[inputKey].value);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <label htmlFor={id}>{label}</label>\r\n      <input autoComplete=\"off\" onChange={handleChange} onBlur={handleBlur} type={type} className={classes}\r\n             id={id} placeholder={label} value={value} disabled={isLoading}/>\r\n      {error && <div className=\"invalid-feedback\">{error}</div>}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport const SelectInput = (input) => {\r\n  const {\r\n    contextual, id, label, inputKey, constraint,\r\n  } = input;\r\n  const { inputs, setInputs, isLoading } = contextual;\r\n  const { value, error } = inputs[inputKey];\r\n  const classes = classNames({\r\n    'custom-select': true,\r\n    'is-invalid': error,\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { selectedIndex } = e.target;\r\n    const selected = e.target[selectedIndex].id;\r\n    setInputs(produce(inputs, (draft) => {\r\n      draft[inputKey].error = '';\r\n      draft[inputKey].value = selected;\r\n    }));\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    const validation = validate({ value }, constraint, { fullMessages: false });\r\n    if (validation) {\r\n      setInputs(produce(inputs, (draft) => {\r\n        [draft[inputKey].error] = validation.value;\r\n      }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <label htmlFor={id}>{label}</label>\r\n      <select onChange={handleChange} onBlur={handleBlur}\r\n              id={id} className={classes} disabled={isLoading}>\r\n        <option value=\"\"/>\r\n        {inputs[inputKey].options.map((item) => <option key={item.id} id={item.id}>\r\n          {item.name}\r\n        </option>)}\r\n      </select>\r\n      {error && <div className=\"invalid-feedback\">{error}</div>}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport const Modal = (input) => {\r\n  const {\r\n    id, title, body, footer, isLoading, error,\r\n  } = input;\r\n\r\n  return (\r\n    <div className=\"modal fade\" id={id} data-backdrop=\"static\" data-keyboard=\"false\" tabIndex=\"-1\">\r\n      <div className=\"modal-dialog\">\r\n        <div className=\"modal-content\">\r\n          <div className=\"modal-header\">\r\n            <h5 className=\"modal-title\">{title}</h5>\r\n            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" disabled={isLoading}>\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            {body}\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            {footer}\r\n          </div>\r\n          {error && <div className=\"alert alert-danger mx-2\" role=\"alert\">{error}</div>}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport produce from 'immer';\r\nimport { restGet, restPut } from '../utils/communication';\r\nimport * as Constants from '../constants';\r\nimport { loadInvitations } from '../actions/systemActions';\r\nimport { invitationConstraints as rules } from '../constraints/invitationConstraints';\r\nimport ErrorPage from './error_page.jsx';\r\nimport LoadingPage from './loading_page.jsx';\r\nimport {\r\n  TextInput, SelectInput, FormRow, FormGroup, Modal,\r\n} from '../utils/formElements.jsx';\r\n\r\nconst validate = require('validate.js');\r\n\r\nconst inputDefaults = {\r\n  name: { value: '', error: '' },\r\n  event: { value: 0, options: [], error: '' },\r\n  post: { value: 0, options: [], error: '' },\r\n  role: { value: 0, options: [], error: '' },\r\n  singleUse: true,\r\n};\r\n\r\nconst Invitations = () => {\r\n  const invitations = useSelector((state) => state.system.invitations);\r\n  const [inputs, setInputs] = useState(inputDefaults);\r\n\r\n  const [dialogLoading, setDialogLoading] = useState(false);\r\n  const [dialogError, setDialogError] = useState('');\r\n\r\n  const [pageError, setPageError] = useState({});\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  const dispatch = useDispatch();\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  const trimDecorator = (value) => value.trim();\r\n\r\n  validate.validators.selector = (value) => {\r\n    if (!value) {\r\n      return 'This field is required.';\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const removeModal = () => {\r\n      window.$('#addInvModal').modal('hide');\r\n      window.$('body').removeClass('modal-open');\r\n      window.$('.modal-backdrop').remove();\r\n    };\r\n    window.onpopstate = removeModal;\r\n    return () => {\r\n      removeModal();\r\n      window.onpopstate = () => {};\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    restGet(`${Constants.SERVER_PATH}api/invitations`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadInvitations(result));\r\n      setLoading(false);\r\n    }).catch((error) => {\r\n      setPageError(error);\r\n      setLoading(false);\r\n    });\r\n  }, [dispatch, removeCookie]);\r\n\r\n  useEffect(() => {\r\n    let events,\r\n      posts;\r\n    restGet(`${Constants.SERVER_PATH}api/events`, dispatch, removeCookie).then((result) => {\r\n      events = result;\r\n    }).then(() => restGet(`${Constants.SERVER_PATH}api/posts`, dispatch, removeCookie)).then((result) => {\r\n      posts = result;\r\n    })\r\n      .then(() => restGet(`${Constants.SERVER_PATH}api/roles`, dispatch, removeCookie))\r\n      .then((result) => {\r\n        setInputs(produce(inputs, (draft) => {\r\n          draft.event.options = events;\r\n          draft.post.options = posts;\r\n          draft.role.options = result;\r\n        }));\r\n      })\r\n      .catch((error) => {\r\n        setPageError(error);\r\n        setLoading(false);\r\n      });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [dispatch, removeCookie]);\r\n\r\n  const addInvitation = () => {\r\n    setDialogError('');\r\n    const validationObj = {};\r\n    Object.keys(rules).forEach((rule) => {\r\n      validationObj[rule] = inputs[rule].value;\r\n    });\r\n\r\n    const validation = validate(validationObj, rules, { fullMessages: false });\r\n    if (validation) {\r\n      setInputs(produce(inputs, (draft) => {\r\n        Object.entries(validation).forEach(([key, value]) => {\r\n          [draft[key].error] = value;\r\n        });\r\n      }));\r\n    } else {\r\n      setDialogLoading(true);\r\n      restPut(`${Constants.SERVER_PATH}api/invitations`, ({ ...validationObj, singleUse: inputs.singleUse }), dispatch, removeCookie)\r\n        .then(() => {\r\n          window.$('#addInvModal').modal('hide');\r\n          setDialogLoading(false);\r\n          restGet(`${Constants.SERVER_PATH}api/invitations`, dispatch, removeCookie).then((result) => {\r\n            dispatch(loadInvitations(result));\r\n          }).catch((error) => {\r\n            setPageError(error);\r\n          });\r\n        }).catch((error) => {\r\n          setDialogLoading(false);\r\n          if (error.inputErrors) {\r\n            setDialogError('');\r\n            setInputs(produce(inputs, (draft) => {\r\n              Object.entries(error.inputErrors).forEach(([key, value]) => {\r\n                draft[key].error = value;\r\n              });\r\n            }));\r\n          } else {\r\n            setDialogError(error.message);\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  const copyShit = (key) => {\r\n    navigator.clipboard.writeText(`${window.location.host}/registration?key=${key}`);\r\n  };\r\n\r\n  const renderAddInvModal = () => {\r\n    const radioChange = (e) => {\r\n      const singleUse = e.target.value === 'single';\r\n      setInputs(produce(inputs, (draft) => {\r\n        draft.singleUse = singleUse;\r\n      }));\r\n    };\r\n\r\n    const contextual = { inputs, setInputs, isLoading: dialogLoading };\r\n\r\n    const modalBody = (\r\n      <React.Fragment>\r\n        <FormRow>\r\n          <FormGroup size=\"6\">\r\n            <TextInput\r\n              contextual={contextual}\r\n              id=\"inputName\"\r\n              label=\"Name\"\r\n              inputKey=\"name\"\r\n              constraint={{ value: rules.name }}\r\n              decorators={[trimDecorator]}\r\n            />\r\n          </FormGroup>\r\n          <FormGroup size=\"6\">\r\n            <SelectInput\r\n              contextual={contextual}\r\n              id=\"inputEvent\"\r\n              label=\"Event\"\r\n              inputKey=\"event\"\r\n              constraint={{ value: rules.event }}\r\n            />\r\n          </FormGroup>\r\n        </FormRow>\r\n        <FormRow>\r\n          <FormGroup size=\"6\">\r\n            <SelectInput\r\n              contextual={contextual}\r\n              id=\"inputPost\"\r\n              label=\"Post\"\r\n              inputKey=\"post\"\r\n              constraint={{ value: rules.post }}\r\n            />\r\n          </FormGroup>\r\n          <FormGroup size=\"6\">\r\n            <SelectInput\r\n              contextual={contextual}\r\n              id=\"inputRole\"\r\n              label=\"Role\"\r\n              inputKey=\"role\"\r\n              constraint={{ value: rules.role }}\r\n            />\r\n          </FormGroup>\r\n        </FormRow>\r\n        <div className=\"form-check form-check-inline\">\r\n          <input onChange={radioChange} className=\"form-check-input\" type=\"radio\" name=\"inputSingleUse\" id=\"inputSingleUse\" value=\"single\" checked={inputs.singleUse}/>\r\n          <label className=\"form-check-label\" htmlFor=\"inlineRadio1\">Single use</label>\r\n        </div>\r\n        <div className=\"form-check form-check-inline\">\r\n          <input onChange={radioChange} className=\"form-check-input\" type=\"radio\" name=\"inputSingleUse\" id=\"inputSingleUse\" value=\"multiple\" checked={!inputs.singleUse}/>\r\n          <label className=\"form-check-label\" htmlFor=\"inlineRadio2\">Multiple use</label>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n\r\n    const modalFooter = (\r\n      <React.Fragment>\r\n        <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" disabled={dialogLoading}>Close</button>\r\n        <button onClick={addInvitation} type=\"button\" className=\"btn btn-primary\" disabled={dialogLoading}>\r\n          {dialogLoading\r\n          && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\"/>}\r\n          Add invitation\r\n        </button>\r\n      </React.Fragment>\r\n    );\r\n\r\n    return <Modal id=\"addInvModal\" title=\"Add invitation\" body={modalBody} footer={modalFooter} isLoading={dialogLoading} error={dialogError}/>;\r\n  };\r\n\r\n  if (pageError.message) {\r\n    return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n  }\r\n\r\n  if (isLoading) {\r\n    return <LoadingPage />;\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"d-flex justify-content-center mt-4 mx-2\">\r\n        <div style={{ width: 800 }}>\r\n          <h1 className=\"text-center display-4\">Invitations</h1>\r\n          <div className=\"d-flex justify-content-center mt-4\">\r\n            <button onClick={() => {\r\n              setInputs(produce(inputDefaults, (draft) => {\r\n                setDialogError('');\r\n                draft.event.options = inputs.event.options;\r\n                draft.post.options = inputs.post.options;\r\n                draft.role.options = inputs.role.options;\r\n                document.getElementById('inputEvent').value = '';\r\n                document.getElementById('inputPost').value = '';\r\n                document.getElementById('inputRole').value = '';\r\n              }));\r\n            }} className=\"btn btn-outline-primary ml-2\" data-toggle=\"modal\" data-target=\"#addInvModal\">Add invitation</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"table-responsive mt-4\">\r\n        <table className=\"table\">\r\n          <thead>\r\n          <tr>\r\n            <th className=\"text-center\">Name</th>\r\n            <th className=\"text-center\">Event</th>\r\n            <th className=\"text-center\">Post</th>\r\n            <th className=\"text-center\">Role</th>\r\n            <th className=\"text-center\">Used</th>\r\n            <th className=\"text-center\">Link</th>\r\n          </tr>\r\n          </thead>\r\n          <tbody>\r\n          {invitations.map((inv) => (\r\n            <tr key={inv.id}>\r\n              <td className=\"text-center\">{inv.name}</td>\r\n              <td className=\"text-center\">{inv.event}</td>\r\n              <td className=\"text-center\">{inv.post}</td>\r\n              <td className=\"text-center\">{inv.role}</td>\r\n              <td className=\"text-center\">{inv.used}/{inv.singleUse ? '1' : '∞'}</td>\r\n              <td className=\"text-center\"><button onClick={() => copyShit(inv.regKey)} className=\"btn btn-link m-0 p-0\">Copy link</button></td>\r\n            </tr>\r\n          ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      {renderAddInvModal()}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Invitations;\r\n","const required = { allowEmpty: false, message: 'This field is required.' };\r\n\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const eventConstraints = {\r\n  name: {\r\n    presence: required,\r\n    length: {\r\n      minimum: 3,\r\n      maximum: 16,\r\n      tooShort: 'The title must be between 3 and 16 characters.',\r\n      tooLong: 'The title must be between 3 and 16 characters.',\r\n    },\r\n  },\r\n  startDate: {\r\n    presence: required,\r\n  },\r\n  endDate: {\r\n    presence: required,\r\n  },\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport produce from 'immer';\r\nimport {restGet, restPut} from '../utils/communication';\r\nimport * as Constants from '../constants';\r\nimport { loadEvents } from '../actions/systemActions';\r\nimport ErrorPage from './error_page.jsx';\r\nimport LoadingPage from './loading_page.jsx';\r\nimport {\r\n  FormGroup, FormRow, Modal, TextInput,\r\n} from '../utils/formElements.jsx';\r\nimport { eventConstraints as rules } from '../constraints/eventConstraints';\r\n\r\nconst validate = require('validate.js');\r\n\r\nconst inputDefaults = {\r\n  name: { value: '', error: '' },\r\n  startDate: { value: '', error: '' },\r\n  endDate: { value: '', error: '' },\r\n};\r\n\r\nconst Events = () => {\r\n  const events = useSelector((state) => state.system.events);\r\n  const [inputs, setInputs] = useState(inputDefaults);\r\n  const [dialogLoading, setDialogLoading] = useState(false);\r\n  const [dialogError, setDialogError] = useState('');\r\n\r\n  const [pageError, setPageError] = useState({});\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  const dispatch = useDispatch();\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  useEffect(() => {\r\n    const removeModal = () => {\r\n      window.$('#addEventModal').modal('hide');\r\n      window.$('body').removeClass('modal-open');\r\n      window.$('.modal-backdrop').remove();\r\n    };\r\n    window.onpopstate = removeModal;\r\n    return () => {\r\n      removeModal();\r\n      window.onpopstate = () => {};\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    restGet(`${Constants.SERVER_PATH}api/events`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadEvents(result));\r\n      setLoading(false);\r\n    }).catch((error) => {\r\n      setPageError(error);\r\n      setLoading(false);\r\n    });\r\n  }, [dispatch, removeCookie]);\r\n\r\n  const trimDecorator = (value) => value.trim();\r\n\r\n  const addEvent = () => {\r\n    setDialogError('');\r\n    const validationObj = {};\r\n    Object.keys(rules).forEach((rule) => {\r\n      validationObj[rule] = inputs[rule].value;\r\n    });\r\n\r\n    const validation = validate(validationObj, rules, { fullMessages: false });\r\n    if (validation) {\r\n      setInputs(produce(inputs, (draft) => {\r\n        Object.entries(validation).forEach(([key, value]) => {\r\n          [draft[key].error] = value;\r\n        });\r\n      }));\r\n    } else {\r\n      setDialogLoading(true);\r\n      restPut(`${Constants.SERVER_PATH}api/events`, validationObj, dispatch, removeCookie).then(() => {\r\n        window.$('#addEventModal').modal('hide');\r\n        setDialogLoading(false);\r\n        restGet(`${Constants.SERVER_PATH}api/events`, dispatch, removeCookie).then((result) => {\r\n          dispatch(loadEvents(result));\r\n        }).catch((error) => {\r\n          setPageError(error);\r\n        });\r\n      }).catch((error) => {\r\n        setDialogLoading(false);\r\n        if (error.inputErrors) {\r\n          setDialogError('');\r\n          setInputs(produce(inputs, (draft) => {\r\n            Object.entries(error.inputErrors).forEach(([key, value]) => {\r\n              draft[key].error = value;\r\n            });\r\n          }));\r\n        } else {\r\n          setDialogError(error.message);\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const renderAddEventModal = () => {\r\n    const contextual = { inputs, setInputs, isLoading: dialogLoading };\r\n\r\n    const modalBody = (\r\n      <React.Fragment>\r\n        <FormRow>\r\n          <FormGroup size=\"12\">\r\n            <TextInput\r\n              contextual={contextual}\r\n              id=\"inputName\"\r\n              label=\"Name\"\r\n              inputKey=\"name\"\r\n              constraint={{ value: rules.name }}\r\n              decorators={[trimDecorator]}\r\n            />\r\n          </FormGroup>\r\n        </FormRow>\r\n        <FormRow>\r\n          <FormGroup size=\"6\">\r\n            <TextInput\r\n              contextual={contextual}\r\n              id=\"inputStartDate\"\r\n              label=\"Start date\"\r\n              type=\"date\"\r\n              inputKey=\"startDate\"\r\n              constraint={{ value: rules.name }}\r\n            />\r\n          </FormGroup>\r\n          <FormGroup size=\"6\">\r\n            <TextInput\r\n              contextual={contextual}\r\n              id=\"inputEndDate\"\r\n              label=\"End date\"\r\n              type=\"date\"\r\n              inputKey=\"endDate\"\r\n              constraint={{ value: rules.name }}\r\n            />\r\n          </FormGroup>\r\n        </FormRow>\r\n      </React.Fragment>\r\n    );\r\n\r\n    const modalFooter = (\r\n      <React.Fragment>\r\n        <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\" disabled={dialogLoading}>Close</button>\r\n        <button onClick={addEvent} type=\"button\" className=\"btn btn-primary\" disabled={dialogLoading}>\r\n          {dialogLoading\r\n          && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\"/>}\r\n          Add event\r\n        </button>\r\n      </React.Fragment>\r\n    );\r\n\r\n    return <Modal id=\"addEventModal\" title=\"Add event\" body={modalBody} footer={modalFooter} isLoading={dialogLoading} error={dialogError}/>;\r\n  };\r\n\r\n  if (pageError.message) {\r\n    return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n  }\r\n\r\n  if (isLoading) {\r\n    return <LoadingPage />;\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"d-flex justify-content-center mt-4 mx-2\">\r\n        <div style={{ width: 500 }}>\r\n          <h1 className=\"text-center display-4\">Events</h1>\r\n          <div className=\"d-flex justify-content-center mt-4\">\r\n            <button onClick={() => {\r\n              setInputs(inputDefaults);\r\n            }} className=\"btn btn-outline-primary ml-2\" data-toggle=\"modal\" data-target=\"#addEventModal\">Add event</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"table-responsive mt-4\">\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th className=\"text-center\">Name</th>\r\n              <th className=\"text-center\">Start date</th>\r\n              <th className=\"text-center\">End date</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n          {events.map((event) => (\r\n            <tr key={event.id}>\r\n              <td className=\"text-center\">{event.name}</td>\r\n              <td className=\"text-center\">{event.firstDay}</td>\r\n              <td className=\"text-center\">{event.lastDay}</td>\r\n            </tr>\r\n          ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      {renderAddEventModal()}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Events;\r\n","import React, { useEffect } from 'react';\r\nimport {\r\n  BrowserRouter as Router, Route, Switch, useRouteMatch, Link,\r\n} from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { logOut, loadUserData, loadPermissions } from '../actions/userActions';\r\nimport * as Constants from '../constants';\r\nimport Staff from './staff/staff.jsx';\r\nimport Teams from './teams/teams.jsx';\r\nimport Team from './teams/team.jsx';\r\nimport Player from './players/player.jsx';\r\nimport Players from './players/players.jsx';\r\nimport Games from './games/games.jsx';\r\nimport Game from './games/game.jsx';\r\nimport GameForm from './games/game_form.jsx';\r\nimport { restGet } from '../utils/communication';\r\nimport Scores from './games/scores.jsx';\r\nimport ScoreTable from './score_table.jsx';\r\nimport Invitations from './invitations.jsx';\r\nimport Events from './events.jsx';\r\n\r\nconst Main = () => {\r\n  const userData = useSelector((state) => state.user.userData);\r\n  const userPermissions = useSelector((state) => state.user.permissions);\r\n  const loggedIn = useSelector((state) => state.user.loggedIn);\r\n  const { path, url } = useRouteMatch();\r\n  const dispatch = useDispatch();\r\n\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  useEffect(() => {\r\n    restGet(`${Constants.SERVER_PATH}api/userData`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadUserData(result));\r\n    }).then(() => restGet(`${Constants.SERVER_PATH}api/userPermissions`, dispatch, removeCookie))\r\n      .then((result) => {\r\n        dispatch(loadPermissions(result));\r\n      })\r\n      .catch((error) => {\r\n        console.log(`Error: ${error.message}`);\r\n      });\r\n  }, [dispatch, removeCookie, loggedIn]);\r\n\r\n  const logoutClicked = () => {\r\n    restGet(`${Constants.SERVER_PATH}api/logout`, dispatch, removeCookie).then(() => {\r\n      removeCookie('loggedin', { path: '/' });\r\n      dispatch(logOut());\r\n    }).catch((error) => {\r\n      console.log(`Error: ${error.message}`);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Router>\r\n      <nav className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\r\n        <Link to={`${url}`} className=\"navbar-brand\">\r\n          <img src=\"logo.svg\" width=\"30\" height=\"30\" className=\"d-inline-block align-top mr-3\" alt=\"\" />\r\n          HDN\r\n        </Link>\r\n        <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarTogglerDemo02\"\r\n                aria-controls=\"navbarTogglerDemo02\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n          <span className=\"navbar-toggler-icon\" />\r\n        </button>\r\n        <div className=\"collapse navbar-collapse\" id=\"navbarTogglerDemo02\">\r\n          <ul className=\"navbar-nav mr-auto mt-2 mt-lg-0\">\r\n            <NavbarItem to={`${url}`} title=\"Home\" />\r\n            <NavbarItem to={`${Constants.APP_URL_PATH}games`} title=\"Games\" />\r\n            <NavbarItem to={`${Constants.APP_URL_PATH}staff`} title=\"Staff\" />\r\n            {userPermissions.includes(Constants.PERM_TEAMS_DATA_ACCESS) && (\r\n              <React.Fragment>\r\n                <NavbarItem to={`${Constants.APP_URL_PATH}teams`} title=\"Teams\" />\r\n                <NavbarItem to={`${Constants.APP_URL_PATH}players`} title=\"Players\" />\r\n              </React.Fragment>\r\n            )}\r\n            {(userPermissions.includes(Constants.PERM_CONTENT_ADMIN)\r\n              || userPermissions.includes(Constants.PERM_SYSTEM_ADMIN)) && (\r\n              <li className=\"nav-item dropdown\">\r\n                <button className=\"btn btn-link nav-link dropdown-toggle shadow-none\" data-toggle=\"dropdown\">\r\n                  Admin tools\r\n                </button>\r\n                <div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdownMenuLink\">\r\n                  <Link to={`${Constants.APP_URL_PATH}scores`} className=\"btn shadow-none dropdown-item\">Score table</Link>\r\n                  {userPermissions.includes(Constants.PERM_SYSTEM_ADMIN) && (\r\n                    <React.Fragment>\r\n                      <Link to={`${Constants.APP_URL_PATH}users`} className=\"btn shadow-none dropdown-item\">Users</Link>\r\n                      <Link to={`${Constants.APP_URL_PATH}roles`} className=\"btn shadow-none dropdown-item\">Roles</Link>\r\n                      <Link to={`${Constants.APP_URL_PATH}events`} className=\"btn shadow-none dropdown-item\">Events</Link>\r\n                      <Link to={`${Constants.APP_URL_PATH}invitations`} className=\"btn shadow-none dropdown-item\">Invitations</Link>\r\n                    </React.Fragment>\r\n                  )}\r\n                </div>\r\n              </li>\r\n            )}\r\n          </ul>\r\n          <ul className=\"navbar-nav mt-2 mt-lg-0\">\r\n          <li className=\"nav-item dropdown\">\r\n            <Link to={`${Constants.APP_URL_PATH}account`} className=\"nav-link dropdown-toggle\" role=\"button\" data-toggle=\"dropdown\"\r\n                  aria-haspopup=\"true\" aria-expanded=\"false\">\r\n              {`${userData.lastName} ${userData.firstName}`}\r\n            </Link>\r\n            <div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdownMenuLink\">\r\n              <Link to={`${url}/account`} className=\"btn shadow-none dropdown-item\">Account</Link>\r\n              <button onClick={logoutClicked} className=\"btn shadow-none rounded-0 dropdown-item\">Log Out</button>\r\n            </div>\r\n          </li>\r\n          </ul>\r\n        </div>\r\n      </nav>\r\n        <Switch>\r\n          <Route exact path={`${path}`}>\r\n            <h1>Home</h1>\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}staff`}>\r\n            <Staff />\r\n          </Route>\r\n          <Route exact path={`${Constants.APP_URL_PATH}games`}>\r\n            <Games />\r\n          </Route>\r\n          <Route exact path={`${Constants.APP_URL_PATH}games/:id`}>\r\n            <Game />\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}games/:id/edit`}>\r\n            <GameForm edit={true}/>\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}games/:id/scores`}>\r\n            <Scores />\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}addGame`}>\r\n            <GameForm />\r\n          </Route>\r\n          <Route exact path={`${Constants.APP_URL_PATH}teams`}>\r\n            <Teams />\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}teams/:id`}>\r\n            <Team />\r\n          </Route>\r\n          <Route exact path={`${Constants.APP_URL_PATH}players`}>\r\n            <Players />\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}scores`}>\r\n            <ScoreTable />\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}players/:id`}>\r\n            <Player />\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}invitations`}>\r\n            <Invitations />\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}events`}>\r\n            <Events />\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}account`}>\r\n            <h1>Account</h1>\r\n          </Route>\r\n          <Route path=\"*\">\r\n            <h3>Main error.</h3>\r\n          </Route>\r\n        </Switch>\r\n      </Router>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nconst NavbarItem = (input) => (\r\n    <li className=\"nav-item\">\r\n      <Link to={input.to} className=\"nav-link\">{input.title}</Link>\r\n    </li>\r\n);\r\n\r\nexport default Main;\r\n","import React from 'react';\nimport './App.css';\nimport {\n  BrowserRouter as Router, Route, Switch, Redirect,\n} from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { useCookies } from 'react-cookie';\nimport Login from './components/login.jsx';\nimport Registration from './components/registration.jsx';\nimport * as Constants from './constants';\nimport Main from './components/main.jsx';\n\nfunction App() {\n  const loggedIn = useSelector((state) => state.user.loggedIn);\n\n  return (\n    <React.Fragment>\n      <Router>\n        <Switch>\n          <PublicRoute path={`${Constants.APP_URL_PATH}login`}>\n            <Login />\n          </PublicRoute>\n          <PublicRoute exact path={`${Constants.APP_URL_PATH}registration`}>\n            <Registration />\n          </PublicRoute>\n          <PrivateRoute path={`${Constants.APP_URL_PATH}`}>\n            <Main />\n          </PrivateRoute>\n          <Route exact path=\"/\">\n            <Redirect to={`${Constants.APP_URL_PATH}`} />\n          </Route>\n          <PublicRoute path=\"*\">\n            <Redirect to={`${Constants.APP_URL_PATH}`} />\n          </PublicRoute>\n        </Switch>\n      </Router>\n    </React.Fragment>\n  );\n\n  function PrivateRoute({ children, ...rest }) {\n    const [cookies] = useCookies(['loggedin']);\n    return <Route {...rest} render={() => ((cookies.loggedin === '1' || loggedIn) ? (children) : (<Redirect to={{ pathname: `${Constants.APP_URL_PATH}login` }} />))} />;\n  }\n\n  function PublicRoute({ children, ...rest }) {\n    return <Route {...rest} render={() => (loggedIn ? (<Redirect to={{ pathname: `${Constants.APP_URL_PATH}` }} />) : (children))} />;\n  }\n}\n\nApp.propTypes = {\n  children: PropTypes.any,\n};\n\nexport default App;\n\n// TODO signupnal hibak, visszajelzesek\n","import produce from 'immer';\r\nimport {\r\n  actionLogIn, actionLoadUserData, actionLogOut, actionLoadPermissions,\r\n} from '../actions/actionTypes';\r\n\r\nconst defaultState = {\r\n  loggedIn: false,\r\n  userData: {\r\n    firstName: '',\r\n    lastName: '',\r\n  },\r\n  permissions: [],\r\n};\r\n\r\nconst userReducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionLogIn:\r\n      return produce(state, (draft) => {\r\n        draft.loggedIn = true;\r\n      });\r\n    case actionLoadUserData:\r\n      return produce(state, (draft) => {\r\n        draft.userData = action.payload;\r\n      });\r\n    case actionLogOut:\r\n      return defaultState;\r\n    case actionLoadPermissions:\r\n      return produce(state, (draft) => {\r\n        draft.permissions = action.payload;\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default userReducer;\r\n","import produce from 'immer';\r\nimport { actionLoadPosts, actionLoadPersons, actionLogOut } from '../actions/actionTypes';\r\n\r\nconst defaultState = {\r\n  posts: [],\r\n  persons: [],\r\n};\r\n\r\nconst staffReducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionLoadPosts:\r\n      return produce(state, (draft) => {\r\n        draft.posts = action.payload;\r\n      });\r\n    case actionLoadPersons:\r\n      return produce(state, (draft) => {\r\n        draft.persons = action.payload;\r\n      });\r\n    case actionLogOut:\r\n      return produce(state, (draft) => {\r\n        draft.persons = [];\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default staffReducer;\r\n","import produce from 'immer';\r\nimport {\r\n  actionLoadTeams, actionLoadContacts, actionLoadTeam, actionLoadPlayers, actionLogOut,\r\n} from '../actions/actionTypes';\r\n\r\nconst defaultState = {\r\n  teams: [],\r\n  contacts: {},\r\n  teamsData: {},\r\n  players: [],\r\n};\r\n\r\nconst teamsReducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionLoadTeams:\r\n      return produce(state, (draft) => {\r\n        draft.teams = action.payload;\r\n      });\r\n    case actionLoadContacts:\r\n      return produce(state, (draft) => {\r\n        draft.contacts = action.payload;\r\n      });\r\n    case actionLoadTeam:\r\n      return produce(state, (draft) => {\r\n        draft.teamsData[action.payload.team.id] = action.payload;\r\n      });\r\n    case actionLoadPlayers:\r\n      return produce(state, (draft) => {\r\n        draft.players = action.payload;\r\n      });\r\n    case actionLogOut:\r\n      return defaultState;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default  teamsReducer;\r\n","import produce from 'immer';\r\nimport {\r\n  actionLoadDays, actionLoadAllGames, actionLoadMyGames,\r\n  actionLogOut, actionSetCurrentGameTab, actionLoadGame,\r\n  actionLoadScores, actionLoadAllScores,\r\n} from '../actions/actionTypes';\r\n\r\nconst defaultState = {\r\n  days: [],\r\n  allGames: [],\r\n  myGames: [],\r\n  currentTab: '',\r\n  gamesData: {},\r\n  scores: {},\r\n  allScores: [],\r\n};\r\n\r\nconst eventReducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionLoadDays:\r\n      return produce(state, (draft) => {\r\n        draft.days = action.payload;\r\n      });\r\n    case actionLoadAllGames:\r\n      return produce(state, (draft) => {\r\n        draft.allGames = action.payload;\r\n      });\r\n    case actionLoadMyGames:\r\n      return produce(state, (draft) => {\r\n        draft.myGames = action.payload;\r\n      });\r\n    case actionSetCurrentGameTab:\r\n      return produce(state, (draft) => {\r\n        draft.currentTab = action.payload;\r\n      });\r\n    case actionLoadGame:\r\n      return produce(state, (draft) => {\r\n        draft.gamesData[action.payload.id] = action.payload;\r\n      });\r\n    case actionLoadScores:\r\n      return produce(state, (draft) => {\r\n        draft.scores[action.payload.gameId] = action.payload.scores;\r\n      });\r\n    case actionLoadAllScores:\r\n      return produce(state, (draft) => {\r\n        draft.allScores = action.payload;\r\n      });\r\n    case actionLogOut:\r\n      return defaultState;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default eventReducer;\r\n","import produce from 'immer';\r\nimport { actionLoadInvitations, actionLoadEvents } from '../actions/actionTypes';\r\n\r\nconst defaultState = {\r\n  invitations: [],\r\n  events: [],\r\n};\r\n\r\nconst systemReducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionLoadInvitations:\r\n      return produce(state, (draft) => {\r\n        draft.invitations = action.payload;\r\n      });\r\n    case actionLoadEvents:\r\n      return produce(state, (draft) => {\r\n        draft.events = action.payload;\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default systemReducer;\r\n","import { combineReducers } from 'redux';\r\nimport userReducer from './userReducer';\r\nimport staffReducer from './staffRedurer';\r\nimport teamsReducer from './teamsReducer';\r\nimport eventReducer from './eventReducer';\r\nimport systemReducer from './systemReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  user: userReducer,\r\n  staff: staffReducer,\r\n  teams: teamsReducer,\r\n  event: eventReducer,\r\n  system: systemReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore } from 'redux';\r\nimport { CookiesProvider } from 'react-cookie';\r\nimport App from './App';\r\nimport rootReducer from './reducers';\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  // eslint-disable-next-line no-underscore-dangle\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\r\n);\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <CookiesProvider>\r\n        <App />\r\n      </CookiesProvider>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}