{"version":3,"sources":["actions/userActions.js","actions/actionTypes.js","constants.js","components/login.jsx","constraints/signupConstraints.js","utils/cnp.js","utils/password.js","components/registration.jsx","actions/staffActions.js","utils/communication.js","components/staff/staff_list.jsx","components/staff/staff.jsx","components/error_page.jsx","components/loading_page.jsx","components/teams/teams.jsx","actions/teamsActions.js","components/players/player_list.jsx","components/teams/team.jsx","components/players/player.jsx","components/players/players.jsx","components/games/game_card.jsx","actions/eventActions.js","utils/scroll.js","components/games/game_list.jsx","components/games/games.jsx","components/games/game.jsx","constraints/gameConstraints.js","components/games/game_form.jsx","components/main.jsx","App.js","reducers/userReducer.js","reducers/staffRedurer.js","reducers/teamsReducer.js","reducers/eventReducer.js","reducers/index.js","index.js"],"names":["logIn","payload","type","APP_URL_PATH","Login","useState","username","setUsername","password","setPassword","btnDisabled","setBtnDisabled","errorMessage","setErrorMessage","useCookies","cookies","setCookie","dispatch","useDispatch","history","useHistory","useEffect","fetch","method","credentials","then","result","json","succeed","console","log","catch","error","message","className","onSubmit","event","preventDefault","body","JSON","stringify","path","userData","htmlFor","onChange","target","value","id","placeholder","disabled","role","aria-hidden","onClick","push","Constants","required","allowEmpty","nameConstraint","presence","length","minimum","maximum","tooShort","tooLong","format","pattern","flags","signupConstraints","regCode","is","wrongLength","firstName","lastName","email","phone","cnp","shirtType","selector","shirtSize","confirmPassword","control","getInformation","input","i","parseInt","sex","year","month","day","bornDate","moment","now","duration","diff","age","Math","floor","asYears","calculatePasswordStrength","strength","match","classNames","require","validate","trimDecorator","trim","lowerCaseDecorator","toLowerCase","upperCaseDecorator","toUpperCase","capitalizeDecorator","slice","trimAllDecorator","replace","Card","prop","title","children","FormRow","FormGroup","mdSize","na","classes","ref","Input","label","state","setState","decorators","constraint","Fragment","rest","onBlur","validation","fullMessages","SelectInput","selectedIndex","selectedId","options","map","item","key","name","Registration","React","createRef","setRegCode","setFirstName","setLastName","setEmail","setPhone","setCnp","setShirtType","setShirtSize","setConfirmPassword","fields","order","validators","hashResult","Number","isNaN","isValid","isValidCNP","rules","minOrder","minKey","Object","entries","forEach","current","scrollIntoView","behavior","block","inputErrors","loadPersons","persons","restFetch","url","onSucces","errorSetter","removeCookie","Promise","resolve","status","authenticated","restFetch2","reject","StaffList","users","activePostId","searchValue","userId","useSelector","user","filter","postId","text","searched","normalize","search","data-toggle","aria-haspopup","aria-expanded","href","Staff","posts","staff","setActivePostId","selectedPerson","setSearchValue","removeModal","window","$","modal","removeClass","remove","onpopstate","loadPosts","style","width","post","btn","active","tabIndex","aria-labelledby","data-dismiss","aria-label","ErrorPage","LoadingPage","Teams","teams","contacts","pageError","setPageError","isLoading","setLoading","useRouteMatch","loadTeams","loadContacts","join","team","PlayerList","players","withBadge","withAge","player","rankId","Team","useParams","teamsData","teamData","color","city","renderTeamPage","DetailItem","Player","setPlayer","teamExtension","Players","loadPlayers","GameCard","game","reference","clickHandler","time","setTime","startTime","start","split","end","endTime","description","owner","loadAllGames","games","loadMyGames","setCurrentTab","currentTab","loadGame","getScrollPosition","element","useWindow","x","y","position","document","getBoundingClientRect","scrollX","scrollY","left","top","useScrollPosition","effect","deps","wait","useRef","throttleTimeout","callBack","currPos","prevPos","useLayoutEffect","handleScroll","setTimeout","addEventListener","removeEventListener","GameList","days","allGames","myGames","buttons","setButtons","uiGames","setUiGames","refs","setRefs","selectedDay","setSelectedDay","navRef","gameUrl","loadFunc","resultDays","loadDays","Date","resultGames","tmp","daySet","Set","getDate","selected","dayNum","num","toLocaleDateString","weekday","has","nana","tmpRefs","lastDay","currentDay","k","bottom","values","button","navParams","offset","scrollBy","handleDayClicked","TabHeader","click","e","data-target","Games","userPermissions","permissions","permAllGames","setPermAllGames","includes","tabClicked","tab","ConfirmationDialog","confirmBtnText","btnHandler","btnType","data-backdrop","data-keyboard","Game","gameData","gamesData","contributors","setContributors","assignmentsModal","setAssignmentsModal","newOwner","setNewOwner","dialogLoading","setDialogLoading","dialogError","setDialogError","toggleCheckbox","delete","add","renderUserList","withCheckbox","ownerId","checked","renderModal","Array","from","res","messageg","notes","location","playerCount","assignments","contributor","background","fontSize","renderGamePage","gameConstraints","area","numericality","onlyInteger","strict","greaterThanOrEqualTo","lessThanOrEqualTo","rows","handleInputChange","handleBlur","setSelected","findValue","RangeInput","min","max","GameForm","edit","setTitle","setPlayerCount","setDescription","setNotes","setDay","selectedDayId","setSelectedDayId","setStartTime","setEndTime","setLocation","timeDisabled","setTimeDisabled","t1","t2","dayId","UTC","getTime","startDate","endDate","getTimezoneOffset","date","newDate","simplifyNonRequiredField","dateToSqlFormat","toISOString","validationObj","currentRules","data","ss","ee","saveGameClicked","NavbarItem","to","Main","src","height","alt","aria-controls","exact","App","loggedIn","PublicRoute","PrivateRoute","render","loggedin","pathname","defaultState","userReducer","action","produce","draft","staffReducer","teamsReducer","eventReducer","rootReducer","combineReducers","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","StrictMode","CookiesProvider","getElementById"],"mappings":"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","file":"static/js/main.c875787d.chunk.js","sourcesContent":["import {\n  actionLogIn, actionLogOut, actionLoadUserData, actionLoadPermissions,\n} from './actionTypes';\n\nexport const logIn = (payload) => ({ type: actionLogIn, payload });\nexport const logOut = () => ({ type: actionLogOut });\nexport const loadUserData = (payload) => ({ type: actionLoadUserData, payload });\nexport const loadPermissions = (payload) => ({ type: actionLoadPermissions, payload });\n","export const actionLogIn = 'LOG_IN';\r\nexport const actionLogOut = 'LOG_OUT';\r\nexport const actionLoadUserData = 'LOAD_USER_DATA';\r\nexport const actionLoadPermissions = 'LOAD_PERMISSIONS';\r\n\r\nexport const actionLoadPosts = 'LOAD_POSTS';\r\nexport const actionLoadPersons = 'LOAD_PERSONS';\r\n\r\nexport const actionLoadTeams = 'LOAD_TEAMS';\r\nexport const actionLoadContacts = 'LOAD_CONTACTS';\r\nexport const actionLoadTeam = 'LOAD_TEAM';\r\nexport const actionLoadPlayers = 'LOAD_PLAYERS';\r\n\r\nexport const actionLoadDays = 'LOAD_DAYS';\r\nexport const actionLoadAllGames = 'LOAD_ALL_GAMES';\r\nexport const actionLoadMyGames = 'LOAD_MY_GAMES';\r\nexport const actionSetCurrentGameTab = 'SET_CURRENT_GAME_TAB';\r\nexport const actionLoadGame = 'LOAD_GAME';\r\n","// export const APP_URL_PATH = '/';\r\n// export const SERVER_PATH = 'http://localhost/';\r\n\r\nexport const APP_URL_PATH = '/organizer/';\r\nexport const SERVER_PATH = '../';\r\n\r\nexport const PERM_TEAMS_DATA_ACCESS = 1;\r\nexport const PERM_ADD_GAME = 2;\r\nexport const PERM_ALL_GAME_ACCESS = 3;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { logIn } from '../actions/userActions';\r\nimport * as Constants from '../constants';\r\n\r\nconst Login = () => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [btnDisabled, setBtnDisabled] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  const [cookies, setCookie] = useCookies();\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    fetch(`${Constants.SERVER_PATH}api/userData`, {\r\n      method: 'GET',\r\n      credentials: 'include',\r\n    }).then((result) => result.json()).then((result) => {\r\n      if (result.succeed) {\r\n        console.log('Login succeed.');\r\n        dispatch(logIn(result.payload));\r\n      }\r\n    }).catch((error) => {\r\n      console.log(`Error: ${error.message}`);\r\n    });\r\n  }, [dispatch]);\r\n\r\n  const handleUsernameChange = (event) => {\r\n    setUsername(event.target.value);\r\n  };\r\n\r\n  const handlePasswordChange = (event) => {\r\n    setPassword(event.target.value);\r\n  };\r\n\r\n  const loginClicked = (event) => {\r\n    event.preventDefault();\r\n    console.log(`Username: ${username}\\nPassword: ${password}`);\r\n    console.log('Login clicked.');\r\n\r\n    setBtnDisabled(true);\r\n\r\n    fetch(`${Constants.SERVER_PATH}api/login`, {\r\n      method: 'POST',\r\n      credentials: 'include',\r\n      body: JSON.stringify({ username, password }),\r\n    }).then((result) => result.json()).then((result) => {\r\n      if (result.succeed) {\r\n        setCookie('loggedin', '1', { path: '/' });\r\n        console.log(cookies);\r\n        dispatch(logIn(result.userData));\r\n      } else {\r\n        console.log('Login failed.');\r\n        setErrorMessage(result.message);\r\n        setBtnDisabled(false);\r\n      }\r\n    }).catch((error) => {\r\n      console.log(`Error: ${error.message}`);\r\n      setBtnDisabled(false);\r\n      setErrorMessage('Network error.');\r\n    });\r\n  };\r\n\r\n  const registerClicked = () => {\r\n    history.push(`${Constants.APP_URL_PATH}registration`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container col-sm-4\">\r\n      <form onSubmit={loginClicked}>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"exampleInputEmail1\">Username</label>\r\n          <input onChange={handleUsernameChange} value={username} type=\"text\" className=\"form-control\" id=\"exampleInputEmail1\" placeholder=\"Username\" />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"exampleInputPassword1\">Password</label>\r\n          <input onChange={handlePasswordChange} value={password} type=\"password\" className=\"form-control\" id=\"exampleInputPassword1\" placeholder=\"Password\" />\r\n        </div>\r\n        <button type=\"submit\" className=\"btn btn-primary\" disabled={btnDisabled}>\r\n          {btnDisabled && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\" />}\r\n          Log In\r\n        </button>\r\n        <button onClick={registerClicked} type=\"button\" className=\"btn btn-link\">Sign Up</button>\r\n      </form>\r\n      {errorMessage && <div className=\"alert alert-danger mt-5\" role=\"alert\">{errorMessage}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","const required = { allowEmpty: false, message: 'This field is required.' };\r\nconst nameConstraint = {\r\n  presence: required,\r\n  length: {\r\n    minimum: 3,\r\n    maximum: 32,\r\n    tooShort: 'The name must be between 3 and 32 characters.',\r\n    tooLong: 'The name must be between 3 and 32 characters.',\r\n  },\r\n  format: {\r\n    pattern: '\\\\p{L}+',\r\n    flags: 'u',\r\n    message: 'The name must only contain alphabetical characters.',\r\n  },\r\n};\r\n\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const signupConstraints = {\r\n  regCode: {\r\n    presence: required,\r\n    length: {\r\n      is: 10,\r\n      wrongLength: 'Enter a valid registration code.',\r\n    },\r\n    format: {\r\n      pattern: '[A-Z|0-9]+',\r\n      message: 'Enter a valid registration code.',\r\n    },\r\n  },\r\n  firstName: nameConstraint,\r\n  lastName: nameConstraint,\r\n  email: {\r\n    presence: required,\r\n    email: {\r\n      message: 'Enter a valid email address.',\r\n    },\r\n  },\r\n  phone: {\r\n    presence: required,\r\n    length: {\r\n      is: 10,\r\n      wrongLength: 'Enter a valid phone number.',\r\n    },\r\n    format: {\r\n      pattern: '[0-9]+',\r\n      message: 'Enter a valid phone number.',\r\n    },\r\n  },\r\n  cnp: {\r\n    presence: required,\r\n    length: {\r\n      is: 13,\r\n      wrongLength: 'Enter a valid CNP.',\r\n    },\r\n    cnp: true,\r\n  },\r\n  shirtType: {\r\n    presence: required,\r\n    selector: true,\r\n  },\r\n  shirtSize: {\r\n    presence: required,\r\n    selector: true,\r\n  },\r\n  username: {\r\n    presence: required,\r\n    length: {\r\n      minimum: 3,\r\n      maximum: 25,\r\n      tooShort: 'The username must be between 4 and 32 characters.',\r\n      tooLong: 'The username must be between 4 and 32 characters.',\r\n    },\r\n    format: {\r\n      pattern: '[a-z|0-9|\\\\.|_]+',\r\n      message: 'The usernames must only contain lowercase alphanumeric characters.',\r\n    },\r\n  },\r\n  password: {\r\n    presence: required,\r\n    length: {\r\n      minimum: 8,\r\n      maximum: 128,\r\n      tooShort: 'The password must be between 8 and 128 characters.',\r\n      tooLong: 'The password must be between 8 and 128 characters.',\r\n    },\r\n    password: true,\r\n  },\r\n  confirmPassword: {\r\n    presence: required,\r\n    confirmPassword: true,\r\n  },\r\n};\r\n","import moment from 'moment';\r\n\r\nconst isNumber = (value) => !Number.isNaN(Number(value));\r\nconst control = [2, 7, 9, 1, 4, 6, 3, 5, 8, 2, 7, 9];\r\n\r\nexport const isValidCNP = (input) => {\r\n  let hashResult = 0;\r\n  const cnp = [];\r\n\r\n  if (input.length !== 13) {\r\n    return false;\r\n  }\r\n  for (let i = 0; i < 13; i += 1) {\r\n    cnp[i] = parseInt(input[i], 10);\r\n    if (!isNumber(cnp[i])) {\r\n      return false;\r\n    }\r\n    if (i < 12) {\r\n      hashResult += cnp[i] * control[i];\r\n    }\r\n  }\r\n  hashResult %= 11;\r\n  if (hashResult === 10) {\r\n    hashResult = 1;\r\n  }\r\n\r\n  let year = cnp[1] * 10 + cnp[2];\r\n  switch (cnp[0]) {\r\n    case 1: case 2:\r\n      year += 1900;\r\n      break;\r\n    case 3: case 4:\r\n      year += 1800;\r\n      break;\r\n    case 5: case 6:\r\n      year += 2000;\r\n      break;\r\n    default:\r\n      return false;\r\n  }\r\n\r\n  const month = cnp[3] * 10 + cnp[4];\r\n  const day = cnp[5] * 10 + cnp[6];\r\n  return cnp[12] === hashResult && moment(`${year}/${month}/${day}`, 'YYYY/M/D', true).isValid();\r\n};\r\n\r\nexport const getInformation = (input) => {\r\n  const cnp = [];\r\n  for (let i = 0; i < 13; i += 1) {\r\n    cnp[i] = parseInt(input[i], 10);\r\n  }\r\n\r\n  let year = cnp[1] * 10 + cnp[2];\r\n  switch (cnp[0]) {\r\n    case 1: case 2:\r\n      year += 1900;\r\n      break;\r\n    case 3: case 4:\r\n      year += 1800;\r\n      break;\r\n    case 5: case 6:\r\n      year += 2000;\r\n      break;\r\n    default:\r\n      return false;\r\n  }\r\n  let sex;\r\n  switch (cnp[0]) {\r\n    case 1: case 3: case 5:\r\n      sex = 'Male';\r\n      break;\r\n    default:\r\n      sex = 'Female';\r\n  }\r\n\r\n  const month = cnp[3] * 10 + cnp[4];\r\n  const day = cnp[5] * 10 + cnp[6];\r\n\r\n  const bornDate = moment(`${year}/${month}/${day}`, 'YYYY/M/D', true);\r\n  const now = moment();\r\n\r\n  const duration = moment.duration(now.diff(bornDate));\r\n  const age = Math.floor(duration.asYears());\r\n\r\n  return ({ bornDate: bornDate.format('YYYY-MMM-DD'), age, sex });\r\n};\r\n","const calculatePasswordStrength = (value) => {\r\n  console.log(`Pwd check with value: ${value}`);\r\n  console.log(value);\r\n  let strength = 0;\r\n  if (value.match(/[\\p{Ll}]+/u)) {\r\n    strength += 1;\r\n  }\r\n  if (value.match(/\\p{Lu}/u)) {\r\n    strength += 1;\r\n  }\r\n  if (value.match(/[0-9]/)) {\r\n    strength += 1;\r\n  }\r\n  if (value.match(/[`~!@#$%^&*()\\-_=+{}[\\]\\\\|;:'\",<.>/?]+/)) {\r\n    strength += 1;\r\n  }\r\n  return strength;\r\n};\r\n\r\nexport default calculatePasswordStrength;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { signupConstraints as rules } from '../constraints/signupConstraints';\r\nimport { isValidCNP } from '../utils/cnp';\r\nimport calculatePasswordStrength from '../utils/password';\r\nimport * as Constants from '../constants';\r\n\r\nconst  classNames = require('classnames');\r\nconst validate = require('validate.js');\r\n\r\nconst trimDecorator = (value) => value.trim();\r\nconst lowerCaseDecorator = (value) => value.toLowerCase();\r\nconst upperCaseDecorator = (value) => value.toUpperCase();\r\nconst capitalizeDecorator = (value) => (\r\n  value ? value[0].toUpperCase() + value.slice(1).toLowerCase() : value\r\n);\r\nconst trimAllDecorator = (value) => value.replace(/\\s/g, '');\r\n\r\n// eslint-disable-next-line max-lines-per-function\r\nconst Registration = () => {\r\n  const [regCode, setRegCode] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [firstName, setFirstName] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [lastName, setLastName] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [email, setEmail] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [phone, setPhone] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [cnp, setCnp] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [shirtType, setShirtType] = useState({\r\n    selectedId: 0, error: '', options: [], ref: React.createRef(),\r\n  });\r\n  const [shirtSize, setShirtSize] = useState({\r\n    selectedId: 0, error: '', options: [], ref: React.createRef(),\r\n  });\r\n  const [username, setUsername] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [password, setPassword] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [confirmPassword, setConfirmPassword] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [btnDisabled, setBtnDisabled] = useState(false);\r\n  const history = useHistory();\r\n\r\n  const fields = {\r\n    regCode: { state: regCode, setState: setRegCode, order: 1 },\r\n    firstName: { state: firstName, setState: setFirstName, order: 2 },\r\n    lastName: { state: lastName, setState: setLastName, order: 3 },\r\n    email: { state: email, setState: setEmail, order: 4 },\r\n    phone: { state: phone, setState: setPhone, order: 5 },\r\n    cnp: { state: cnp, setState: setCnp, order: 6 },\r\n    shirtType: { state: shirtType, setState: setShirtType, order: 7 },\r\n    shirtSize: { state: shirtSize, setState: setShirtSize, order: 8 },\r\n    username: { state: username, setState: setUsername, order: 9 },\r\n    password: { state: password, setState: setPassword, order: 10 },\r\n    confirmPassword: { state: confirmPassword, setState: setConfirmPassword, order: 11 },\r\n  };\r\n\r\n  validate.validators.cnp = (value) => {\r\n    if (!isValidCNP(value)) {\r\n      return 'Enter a valid CNP.';\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  validate.validators.password = (value) => {\r\n    if (calculatePasswordStrength(value) < 2) {\r\n      return 'The password must contain at least two character categories among the following: uppercase characters, lowercase characters, digits, special characters.';\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  validate.validators.confirmPassword = (value) => {\r\n    if (value !== password.value) {\r\n      return 'Password doesn\\'t match.';\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  validate.validators.selector = (value) => {\r\n    if (!value) {\r\n      return 'This field is required.';\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  const signUpClicked = (event) => {\r\n    event.preventDefault();\r\n    const validation = validate({\r\n      regCode: regCode.value,\r\n      firstName: firstName.value,\r\n      lastName: lastName.value,\r\n      email: email.value,\r\n      phone: phone.value,\r\n      cnp: cnp.value,\r\n      shirtType: shirtType.selectedId,\r\n      shirtSize: shirtSize.selectedId,\r\n      username: username.value,\r\n      password: password.value,\r\n      confirmPassword: confirmPassword.value,\r\n    }, rules, { fullMessages: false });\r\n\r\n    if (validation) {\r\n      let minOrder = 999,\r\n        minKey = '';\r\n      Object.entries(validation)\r\n        .forEach(([key, value]) => {\r\n          if (fields[key].order < minOrder) {\r\n            minOrder = fields[key].order;\r\n            minKey = key;\r\n          }\r\n          fields[key].setState((rest) => ({ ...rest, error: value[0] }));\r\n        });\r\n      fields[minKey].state.ref.current.scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: 'start',\r\n      });\r\n    } else {\r\n      setBtnDisabled(true);\r\n      fetch(`${Constants.SERVER_PATH}api/signup`, {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        body: JSON.stringify({\r\n          regCode: regCode.value,\r\n          firstName: firstName.value,\r\n          lastName: lastName.value,\r\n          email: email.value,\r\n          phone: phone.value,\r\n          cnp: cnp.value,\r\n          shirtType: shirtType.selectedId,\r\n          shirtSize: shirtSize.selectedId,\r\n          username: username.value,\r\n          password: password.value,\r\n        }),\r\n      }).then((result) => result.json()).then((result) => {\r\n        if (result.succeed) {\r\n          console.log('WIN');\r\n          // TODO valami zoldet a loginra\r\n          history.push(`${Constants.APP_URL_PATH}login`);\r\n        } else {\r\n          setBtnDisabled(false);\r\n          if (result.message) {\r\n            console.log(result.message);\r\n            // TODO hibauzenet\r\n          } else {\r\n            let minOrder = 999,\r\n              minKey = '';\r\n            Object.entries(result.inputErrors)\r\n              .forEach(([key, value]) => {\r\n                if (fields[key].order < minOrder) {\r\n                  minOrder = fields[key].order;\r\n                  minKey = key;\r\n                }\r\n                fields[key].setState((rest) => ({ ...rest, error: value }));\r\n              });\r\n            fields[minKey].state.ref.current.scrollIntoView({\r\n              behavior: 'smooth',\r\n              block: 'start',\r\n            });\r\n          }\r\n        }\r\n      }).catch((error) => {\r\n        setBtnDisabled(false);\r\n        console.log(`Error: ${error.message}`);\r\n        // TODO netw error\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetch(`${Constants.SERVER_PATH}api/shirtTypes`, {\r\n      method: 'GET',\r\n      credentials: 'include',\r\n    }).then((result) => result.json()).then((result) => {\r\n      if (result.succeed) {\r\n        setShirtType((state) => ({ ...state, options: result.payload }));\r\n      } else {\r\n        // TODO ha nem tudjuk betolteni\r\n      }\r\n    });\r\n    fetch(`${Constants.SERVER_PATH}api/shirtSizes`, {\r\n      method: 'GET',\r\n      credentials: 'include',\r\n    }).then((result) => result.json()).then((result) => {\r\n      if (result.succeed) {\r\n        setShirtSize((state) => ({ ...state, options: result.payload }));\r\n      } else {\r\n        // TODO ha nem tudjuk betolteni\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const loginClicked = () => {\r\n    history.push(`${Constants.APP_URL_PATH}login`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center\">\r\n      <form onSubmit={signUpClicked}>\r\n        <Card title=\"Validation\">\r\n          <FormGroup na={regCode.ref}>\r\n            <Input type=\"text\" id=\"inputRegistrationCode\" label=\"Registration code\" state={regCode} setState={setRegCode} constraint={{ value: rules.regCode }} decorators={\r\n              [trimDecorator, upperCaseDecorator]} />\r\n          </FormGroup>\r\n        </Card>\r\n        <Card title=\"Personal data\">\r\n          <FormRow>\r\n            <FormGroup mdSize=\"6\" na={firstName.ref}>\r\n              <Input type=\"text\" id=\"inputFirstName\" label=\"First name\" state={firstName} setState={setFirstName} constraint={{ value: rules.firstName }} decorators={\r\n                [trimDecorator, capitalizeDecorator]} />\r\n            </FormGroup>\r\n            <FormGroup mdSize=\"6\" na={lastName.ref}>\r\n              <Input type=\"text\" id=\"inputLastName\" label=\"Last name\" state={lastName} setState={setLastName} constraint={{ value: rules.lastName }} decorators={\r\n                [trimDecorator, capitalizeDecorator]} />\r\n            </FormGroup>\r\n          </FormRow>\r\n          <FormRow>\r\n            <FormGroup mdSize=\"6\" na={email.ref}>\r\n              <Input type=\"text\" id=\"inputEmail\" label=\"Email\" state={email} setState={setEmail} constraint={{ value: rules.email }} decorators={\r\n                [trimDecorator, lowerCaseDecorator]} />\r\n            </FormGroup>\r\n            <FormGroup mdSize=\"6\" na={phone.ref}>\r\n              <Input type=\"text\" id=\"inputPhone\" label=\"Phone\" state={phone} setState={setPhone} constraint={{ value: rules.phone }} decorators={[trimAllDecorator]} />\r\n            </FormGroup>\r\n          </FormRow>\r\n          <FormGroup na={cnp.ref}>\r\n            <Input type=\"text\" id=\"inputCNP\" label=\"CNP\" state={cnp} setState={setCnp} constraint={{ value: rules.cnp }} decorators={[trimDecorator]} />\r\n          </FormGroup>\r\n          <FormRow>\r\n            <FormGroup mdSize=\"6\">\r\n              <SelectInput id=\"inputShirtType\" label=\"Shirt type\" state={shirtType} setState={setShirtType} constraint={{ value: rules.shirtType }} />\r\n            </FormGroup>\r\n            <FormGroup mdSize=\"6\">\r\n              <SelectInput id=\"inputShirtSize\" label=\"Shirt size\" state={shirtSize} setState={setShirtSize} constraint={{ value: rules.shirtSize }} />\r\n            </FormGroup>\r\n          </FormRow>\r\n        </Card>\r\n        <Card title=\"User data\">\r\n          <FormGroup na={username.ref}>\r\n            <Input type=\"text\" id=\"inputUsername\" label=\"Username\" state={username} setState={setUsername} constraint={{ value: rules.username }} decorators={[trimDecorator, lowerCaseDecorator]} />\r\n          </FormGroup>\r\n          <FormRow>\r\n            <FormGroup mdSize=\"6\" na={password.ref}>\r\n              <Input type=\"password\" id=\"inputPassword\" label=\"Password\" state={password} setState={setPassword} constraint={{ value: rules.password }} />\r\n            </FormGroup>\r\n            <FormGroup mdSize=\"6\" na={confirmPassword.ref}>\r\n              <Input type=\"password\" id=\"inputConfirmPassword\" label=\"Confirm password\" state={confirmPassword} setState={setConfirmPassword} constraint={{ value: rules.confirmPassword }} />\r\n            </FormGroup>\r\n          </FormRow>\r\n        </Card>\r\n        <Card title=\"Submit\">\r\n          <button type=\"submit\" className=\"btn btn-primary\" disabled={btnDisabled}>\r\n            {btnDisabled && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\" />}\r\n            Sign Up\r\n          </button>\r\n          <button onClick={loginClicked} type=\"button\" className=\"btn btn-outline-secondary ml-2\">Back to log in</button>\r\n        </Card>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Card = (prop) => (\r\n    <div className=\"card border-dark my-2 mx-3\">\r\n      <div className=\"card-body\">\r\n        <h4>{prop.title}</h4>\r\n        {prop.children}\r\n      </div>\r\n    </div>\r\n);\r\n\r\nconst FormRow = (prop) => (\r\n    <div className=\"form-row\">\r\n      {prop.children}\r\n    </div>\r\n);\r\n\r\nconst FormGroup = (prop) => {\r\n  const { children, mdSize, na } = prop;\r\n  const classes = classNames({\r\n    'form-group': true,\r\n    [`col-md-${mdSize}`]: mdSize,\r\n  });\r\n  return (\r\n    <div ref={na} className={classes}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Input = (prop) => {\r\n  const {\r\n    type, id, label, state, setState, decorators, constraint,\r\n  } = prop;\r\n\r\n  const handleInputChange = (event) => {\r\n    const { value } = event.target;\r\n    setState((rest) => ({ ...rest, value, error: '' }));\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    let { value } = state;\r\n    if (decorators) {\r\n      for (let i = 0; i < decorators.length; i += 1) {\r\n        value = decorators[i](value);\r\n      }\r\n      setState((rest) => ({ ...rest, value }));\r\n    }\r\n    const validation = validate({ value }, constraint, { fullMessages: false });\r\n    if (validation) {\r\n      setState((rest) => ({ ...rest, error: validation.value[0] }));\r\n    }\r\n  };\r\n\r\n  const classes = classNames({\r\n    'form-control': true,\r\n    'is-invalid': state.error,\r\n  });\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <label htmlFor={id}>{label}</label>\r\n      <input onChange={handleInputChange} onBlur={handleBlur} type={type}\r\n             className={classes} id={id} placeholder={label} value={state.value} />\r\n      {state.error && <div className=\"invalid-feedback\">{state.error}</div>}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nconst SelectInput = (prop) => {\r\n  const {\r\n    id, label, state, setState, constraint,\r\n  } = prop;\r\n\r\n  const handleInputChange = (event) => {\r\n    const { selectedIndex } = event.target;\r\n    const selectedId = event.target[selectedIndex].id;\r\n    setState((rest) => ({ ...rest, selectedId, error: '' }));\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    const { selectedId } = state;\r\n    const validation = validate({ value: selectedId }, constraint, { fullMessages: false });\r\n    if (validation) {\r\n      setState((rest) => ({ ...rest, error: validation.value[0] }));\r\n    }\r\n  };\r\n\r\n  const classes = classNames({\r\n    'custom-select': true,\r\n    'is-invalid': state.error,\r\n  });\r\n\r\n  return (\r\n    <React.Fragment>\r\n    <label htmlFor={id}>{label}</label>\r\n    <select onChange={handleInputChange} onBlur={handleBlur}\r\n            id={id} className={classes} >\r\n      <option />\r\n      {state.options.map((item) => <option key={item.id} id={item.id}>{item.name}</option>)}\r\n    </select>\r\n      {state.error && <div className=\"invalid-feedback\">{state.error}</div>}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Registration;\r\n","import { actionLoadPosts, actionLoadPersons } from './actionTypes';\r\n\r\nexport const loadPosts = (posts) => ({ type: actionLoadPosts, payload: posts });\r\nexport const loadPersons = (persons) => ({ type: actionLoadPersons, payload: persons });\r\n","import { logOut } from '../actions/userActions';\r\n\r\nexport const restFetch = (url, onSucces, errorSetter, dispatch, removeCookie) => new Promise((resolve) => {\r\n  const payload = {};\r\n  fetch(url, {\r\n    method: 'GET',\r\n    credentials: 'include',\r\n  }).then((result) => {\r\n    payload.status = result.status;\r\n    return result.json();\r\n  }).then((result) => {\r\n    if (result.succeed) {\r\n      errorSetter({});\r\n      onSucces(result.payload);\r\n      resolve();\r\n    } else if (!result.authenticated) {\r\n      removeCookie('loggedin', { path: '/' });\r\n      dispatch(logOut());\r\n      resolve();\r\n    } else {\r\n      payload.message = result.message;\r\n      console.log(payload);\r\n      errorSetter(payload);\r\n      resolve();\r\n    }\r\n  }).catch((error) => {\r\n    errorSetter({ message: 'Failed to connect to the server.' });\r\n    console.log(`Error: ${error.message}`);\r\n    resolve();\r\n  });\r\n});\r\n\r\nexport const restFetch2 = (url, dispatch, removeCookie) => new Promise(\r\n  (resolve, reject) => {\r\n    const payload = {};\r\n    fetch(url, {\r\n      method: 'GET',\r\n      credentials: 'include',\r\n    }).then((result) => {\r\n      payload.status = result.status;\r\n      return result.json();\r\n    }).then((result) => {\r\n      if (result.succeed) {\r\n      // errorSetter({});\r\n        // onSucces(result.payload);\r\n        resolve(result.payload);\r\n      } else if (!result.authenticated) {\r\n        removeCookie('loggedin', { path: '/' });\r\n        dispatch(logOut());\r\n        payload.message = 'Unauthenticated.';\r\n        reject(payload);\r\n      } else {\r\n        payload.message = result.message;\r\n        console.log(payload);\r\n        // errorSetter(payload);\r\n        // onError(payload);\r\n        reject(payload);\r\n      }\r\n    }).catch((error) => {\r\n    // errorSetter({ message: 'Failed to connect to the server.' });\r\n      console.log(`Error: ${error.message}`);\r\n      payload.message = 'Failed to connect to the server.';\r\n      reject(payload);\r\n    });\r\n  },\r\n);\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport * as Constants from '../../constants';\r\nimport {useSelector} from 'react-redux';\r\n\r\nconst searchInString = (text, searched) => text.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase().search(searched.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase()) >= 0;\r\n\r\nconst StaffList = (input) => {\r\n  const { users, activePostId, searchValue } = input;\r\n  const userId = useSelector((state) => state.user.userData.id);\r\n  const history = useHistory();\r\n  if (users.length > 0) {\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"list-group mt-4 mx-2\">\r\n          {users\r\n            .filter((user) => user.postId === activePostId)\r\n            .filter((user) => !searchValue || searchInString(`${user.lastName} ${user.firstName}`, searchValue))\r\n            .filter((user) => user.id !== userId)\r\n            .map(\r\n              (user) => (\r\n                <div key={user.id} className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center\" >\r\n                  <span>\r\n                    <button onClick={() => history.push(`${Constants.APP_URL_PATH}players/${user.id}`)} className=\"btn btn-link m-0 p-0\">\r\n                      {user.lastName} {user.firstName}\r\n                    </button>\r\n                  </span>\r\n                  <span>\r\n                    <button type=\"button\" className=\"btn btn-sm btn-outline-success dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                        Contact\r\n                      </button>\r\n                      <div className=\"dropdown-menu\">\r\n                        <a className=\"dropdown-item\" href={`tel:${user.phone}`}>Call</a>\r\n                        <a className=\"dropdown-item\" href={`sms:${user.phone}`}>SMS</a>\r\n                        <div className=\"dropdown-divider\" />\r\n                        <a className=\"dropdown-item\" href={`mailto:${user.email}`}>Email</a>\r\n                      </div>\r\n                    </span>\r\n                </div>\r\n              ),\r\n            )}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n  return <p>Nothing to show.</p>;\r\n};\r\n\r\nexport default StaffList;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport * as Constants from '../../constants';\r\nimport { loadPosts, loadPersons } from '../../actions/staffActions';\r\nimport { restFetch2 } from '../../utils/communication';\r\nimport StaffList from './staff_list.jsx';\r\n\r\nconst classNames = require('classnames');\r\n\r\nconst Staff = () => {\r\n  const posts = useSelector((state) => state.staff.posts);\r\n  const persons = useSelector((state) => state.staff.persons);\r\n  const [activePostId, setActivePostId] = useState(0);\r\n  const [selectedPerson, setSelectedPerson] = useState({});\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const dispatch = useDispatch();\r\n\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  useEffect(() => {\r\n    const removeModal = () => {\r\n      window.$('#exampleModal').modal('hide');\r\n      window.$('body').removeClass('modal-open');\r\n      window.$('.modal-backdrop').remove();\r\n    };\r\n    window.onpopstate = removeModal;\r\n    return () => {\r\n      removeModal();\r\n      window.onpopstate = () => {};\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    restFetch2(`${Constants.SERVER_PATH}api/posts`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadPosts(result));\r\n      if (result.length > 0) {\r\n        setActivePostId(result[0].id);\r\n      }\r\n    }).then(() => restFetch2(`${Constants.SERVER_PATH}api/users`, dispatch, removeCookie)).then((result) => {\r\n      dispatch(loadPersons(result));\r\n    })\r\n      .catch((error) => {\r\n        // TODO ide is majd valamilyen pageError kell\r\n        console.log(`Error: ${error.message}`);\r\n      });\r\n  }, [dispatch, removeCookie]);\r\n\r\n  const postClicked = (postId) => {\r\n    setActivePostId(postId);\r\n  };\r\n\r\n  const personClicked = (person) => {\r\n    setSelectedPerson(person);\r\n  };\r\n\r\n  const handleSearchValueChanged = (event) => {\r\n    setSearchValue(event.target.value);\r\n  };\r\n\r\n  const searchInString = (text, searched) => text.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase().search(searched.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase()) >= 0;\r\n\r\n  return (\r\n      <div className=\"d-flex justify-content-center mt-4\">\r\n        <div style={{ width: 500 }}>\r\n          <h1 className=\"text-center display-4\">Staff</h1>\r\n          <div className=\"form-group mx-2 mt-4\">\r\n            <input onChange={handleSearchValueChanged} className=\"form-control\" type=\"text\" placeholder=\"Search\" value={searchValue}/>\r\n          </div>\r\n          <div className=\"list-group list-group-horizontal mx-2 mt-2\" id=\"list-tab\" role=\"tablist\">\r\n            {posts.map((post) => {\r\n              const classes = classNames({\r\n                btn: true,\r\n                'shadow-none': true,\r\n                'rounded-0': true,\r\n                'list-group-item': true,\r\n                active: activePostId === post.id,\r\n                'flex-fill': true,\r\n              });\r\n              return (\r\n                <button key={post.id} onClick={() => postClicked(post.id)} className={classes}>\r\n                  {post.name}\r\n                </button>\r\n              );\r\n            })}\r\n            </div>\r\n            <StaffList users={persons} activePostId={activePostId} searchValue={searchValue} />\r\n        </div>\r\n        <div className=\"modal fade\" id=\"exampleModal\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n          <div className=\"modal-dialog\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h4>{selectedPerson.lastName} {selectedPerson.firstName}</h4>\r\n                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n              <div className=\"modal-body\">\r\n                <a href={`tel:${selectedPerson.phone}`} className=\"btn btn-lg btn-outline-primary\">Call</a>\r\n                <a href={`sms:${selectedPerson.phone}`} className=\"btn btn-lg btn-outline-primary ml-2\">SMS</a>\r\n                <a href={`mailto:${selectedPerson.email}`} className=\"btn btn-lg btn-outline-primary ml-2\">E-mail</a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default Staff;\r\n","import React from 'react';\r\n\r\nconst ErrorPage = (input) => {\r\n  const { status, message } = input;\r\n  return (\r\n    <div className=\"d-flex justify-content-center mt-4\">\r\n      <div>\r\n      <h1 className=\"text-center text-danger display-4\">ERROR{status && ` ${status}`}</h1>\r\n      <h4 className=\"text-center text-danger\">{message}</h4>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorPage;\r\n","import React from 'react';\r\n\r\nconst LoadingPage = () => (\r\n    <div className=\"d-flex justify-content-center mt-4\">\r\n      <div className=\"spinner-border text-primary\" role=\"status\">\r\n        <span className=\"sr-only\">Loading...</span>\r\n      </div>\r\n    </div>\r\n);\r\n\r\nexport default LoadingPage;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { useHistory, useRouteMatch } from 'react-router-dom';\r\nimport * as Constants from '../../constants';\r\nimport { loadContacts, loadTeams } from '../../actions/teamsActions';\r\nimport { restFetch } from '../../utils/communication';\r\nimport ErrorPage from '../error_page.jsx';\r\nimport LoadingPage from '../loading_page.jsx';\r\n\r\nconst Teams = () => {\r\n  const teams = useSelector((state) => state.teams.teams);\r\n  const contacts = useSelector((state) => state.teams.contacts);\r\n  const dispatch = useDispatch();\r\n\r\n  const [pageError, setPageError] = useState({});\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  const history = useHistory();\r\n  const { path } = useRouteMatch();\r\n\r\n  useEffect(() => {\r\n    if (teams.length === 0) {\r\n      console.log('Loading on');\r\n      setLoading(true);\r\n    }\r\n    restFetch(`${Constants.SERVER_PATH}api/teams`, (payload) => {\r\n      console.log('futaszar');\r\n      dispatch(loadTeams(payload));\r\n    }, setPageError, dispatch, removeCookie).then(() => restFetch(`${Constants.SERVER_PATH}api/leaderContacts`, (payload) => {\r\n      dispatch(loadContacts(payload));\r\n    }, setPageError, dispatch, removeCookie).then(() => {\r\n      setLoading(false);\r\n    }));\r\n  }, [dispatch, removeCookie, teams.length]);\r\n\r\n  if (pageError.message) {\r\n    return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n  }\r\n\r\n  if (isLoading) {\r\n    return <LoadingPage />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center mt-4\">\r\n      <div style={{ width: 500 }}>\r\n        <h1 className=\"text-center display-4 \">Teams</h1>\r\n        <div className=\"d-flex justify-content-center mt-4\">\r\n          <a className=\"btn btn-outline-primary ml-2\"\r\n             href={`mailto:${contacts.email ? contacts.email.join(',') : ''}`}>Email to all leaders</a>\r\n          <a className=\"btn btn-outline-primary ml-2\"\r\n             href={`sms:${contacts.email ? contacts.phone.join(',') : ''}`}>SMS\r\n            to all leaders</a>\r\n        </div>\r\n        <div className=\"list-group mt-4 mx-2\">\r\n          {teams.map((team) => (\r\n            <div key={team.id} className=\"list-group-item list-group-item-action\">\r\n              <button onClick={() => history.push(`${path}/${team.id}`)} type=\"button\"\r\n                      className=\"btn btn-link m-0 p-0 stretched-link\">\r\n                {team.name}\r\n              </button>\r\n            </div>))\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Teams;\r\n","import {\n  actionLoadTeams, actionLoadContacts, actionLoadTeam, actionLoadPlayers,\n} from './actionTypes';\n\nexport const loadTeams = (teams) => ({ type: actionLoadTeams, payload: teams });\nexport const loadContacts = (contacts) => ({ type: actionLoadContacts, payload: contacts });\nexport const loadTeam = (team) => ({ type: actionLoadTeam, payload: team });\nexport const loadPlayers = (players) => ({ type: actionLoadPlayers, payload: players });\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { getInformation } from '../../utils/cnp';\r\nimport * as Constants from '../../constants';\r\n\r\nconst searchInString = (text, searched) => text.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase().search(searched.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase()) >= 0;\r\n\r\nconst PlayerList = (input) => {\r\n  const {\r\n    players, searchValue, withBadge, withAge,\r\n  } = input;\r\n  const history = useHistory();\r\n  if (players.length > 0) {\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"list-group mt-4 mx-2\">\r\n          {players\r\n            .filter((player) => !searchValue || searchInString(`${player.lastName} ${player.firstName}`, searchValue))\r\n            .map(\r\n              (player) => {\r\n                const cnp = getInformation(player.cnp);\r\n                return (\r\n                  <div key={player.id} className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center\" >\r\n                    <span>\r\n                      <button onClick={() => history.push(`${Constants.APP_URL_PATH}players/${player.id}`)} className=\"btn btn-link m-0 p-0\">\r\n                        {player.lastName} {player.firstName}\r\n                      </button>\r\n                      {(withBadge && player.rankId > 0) && <span className=\"badge badge-info ml-2\">{player.rankId === 2 ? 'Leader' : 'Vice leader' }</span>}\r\n                    </span>\r\n                    <span>\r\n                        {withAge && <span className={`badge badge-pill badge-${cnp.age >= 18 ? 'success' : 'warning'} mr-2`}>{cnp.age}</span>}\r\n                        <button type=\"button\" className=\"btn btn-sm btn-outline-success dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                          Contact\r\n                        </button>\r\n                        <div className=\"dropdown-menu\">\r\n                          <a className=\"dropdown-item\" href={`tel:${player.phone}`}>Call</a>\r\n                          <a className=\"dropdown-item\" href={`sms:${player.phone}`}>SMS</a>\r\n                          {player.email && (\r\n                            <React.Fragment>\r\n                              <div className=\"dropdown-divider\" />\r\n                              <a className=\"dropdown-item\" href={`mailto:${player.email}`}>Email</a>\r\n                            </React.Fragment>\r\n                          )}\r\n                        </div>\r\n                      </span>\r\n                  </div>\r\n                );\r\n              },\r\n            )}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n  return <p>Nothing to show.</p>;\r\n};\r\n\r\nexport default PlayerList;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport * as Constants from '../../constants';\r\nimport { loadTeam } from '../../actions/teamsActions';\r\nimport PlayerList from '../players/player_list.jsx';\r\nimport { restFetch } from '../../utils/communication';\r\nimport ErrorPage from '../error_page.jsx';\r\nimport LoadingPage from '../loading_page.jsx';\r\n\r\nconst Team = () => {\r\n  const { id } = useParams();\r\n  const teamsData = useSelector((state) => state.teams.teamsData);\r\n  const dispatch = useDispatch();\r\n  const [pageError, setPageError] = useState({});\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  useEffect(() => {\r\n    if (!teamsData[id]) {\r\n      setLoading(true);\r\n    }\r\n    restFetch(`${Constants.SERVER_PATH}api/teams/${id}`, (payload) => {\r\n      dispatch(loadTeam(payload));\r\n    }, setPageError, dispatch, removeCookie).then(() => {\r\n      setLoading(false);\r\n    });\r\n  }, [dispatch, id, removeCookie]);\r\n\r\n  const renderTeamPage = () => {\r\n    const teamData = teamsData[id];\r\n    const { players } = teamData;\r\n    return (\r\n      <div className=\"d-flex justify-content-center mt-4\">\r\n        <div style={{ width: 500 }}>\r\n          <h2 className=\"text-center\" style={{ color: '#ffbc01' }}>{teamData.team.name}</h2>\r\n          <h6 className=\"text-center text-secondary\">{teamData.team.city}</h6>\r\n          <div className=\"d-flex justify-content-center mt-4\">\r\n            <a className=\"btn btn-outline-primary ml-2\" href={`mailto:${players ? players\r\n              .filter((player) => player.rankId > 0)\r\n              .map((player) => player.email).join(',') : ''}`}>Email to leaders</a>\r\n            <a className=\"btn btn-outline-primary ml-2\" href={`sms:${players ? players\r\n              .filter((player) => player.rankId > 0)\r\n              .map((player) => player.phone).join(',') : ''}`}>SMS to leaders</a>\r\n          </div>\r\n          <PlayerList players={players} withBadge={true} withAge={true}/>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n  if (pageError.message) {\r\n    return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n  }\r\n  if (isLoading || !teamsData[id]) {\r\n    return <LoadingPage />;\r\n  }\r\n  return renderTeamPage();\r\n};\r\n\r\nexport default Team;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { getInformation } from '../../utils/cnp';\r\nimport * as Constants from '../../constants';\r\nimport { restFetch } from '../../utils/communication';\r\nimport ErrorPage from '../error_page.jsx';\r\n\r\nconst Player = () => {\r\n  const { id } = useParams();\r\n  const [player, setPlayer] = useState({});\r\n  const [pageError, setPageError] = useState({});\r\n\r\n  const dispatch = useDispatch();\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  useEffect(() => {\r\n    restFetch(`${Constants.SERVER_PATH}api/players/${id}`, (payload) => {\r\n      setPlayer(payload);\r\n    }, setPageError, dispatch, removeCookie);\r\n  }, [dispatch, id, removeCookie]);\r\n\r\n  if (!pageError.message) {\r\n    if (player.id) {\r\n      const cnp = getInformation(player.cnp);\r\n      let teamExtension = '';\r\n      if (player.rankId === 1) {\r\n        teamExtension = ' (Vice leader)';\r\n      }\r\n      if (player.rankId === 2) {\r\n        teamExtension = ' (Leader)';\r\n      }\r\n      return (\r\n        <React.Fragment>\r\n          <div className=\"d-flex justify-content-center mt-4\">\r\n            <div style={{ width: 500 }}>\r\n              <h2 className=\"text-center\" style={{ color: '#ffbc01' }}>{player.lastName} {player.firstName}</h2>\r\n              <h5 className=\"text-center text-secondary\">{player.team}{teamExtension}</h5>\r\n              <div className=\"list-group mt-4 mx-2\">\r\n                <DetailItem label=\"Born date:\" value={cnp.bornDate}/>\r\n                <DetailItem label=\"Age:\" value={cnp.age}/>\r\n                <DetailItem label=\"Sex:\" value={cnp.sex}/>\r\n                <DetailItem label=\"Phone:\" value={player.phone}/>\r\n                {player.email && <DetailItem label=\"Email:\" value={player.email}/>}\r\n                <DetailItem label=\"CNP:\" value={player.cnp}/>\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n        </React.Fragment>\r\n      );\r\n    }\r\n    return <h1>Loading</h1>;\r\n  }\r\n  return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n};\r\n\r\nconst DetailItem = (input) => (\r\n    <div className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center\">\r\n      <p className=\"p-0 m-0\">{input.label}</p>\r\n      <p className=\"p-0 m-0\">{input.value}</p>\r\n    </div>\r\n);\r\n\r\nexport default Player;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport * as Constants from '../../constants';\r\nimport { loadPlayers } from '../../actions/teamsActions';\r\nimport PlayerList from './player_list.jsx';\r\nimport { restFetch2 } from '../../utils/communication';\r\nimport ErrorPage from '../error_page.jsx';\r\n\r\nconst Players = () => {\r\n  const players = useSelector((state) => state.teams.players);\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const [pageError, setPageError] = useState({});\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  useEffect(() => {\r\n    restFetch2(`${Constants.SERVER_PATH}api/players`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadPlayers(result));\r\n    }).catch((error) => {\r\n      setPageError(error);\r\n    });\r\n  }, [dispatch, removeCookie]);\r\n\r\n  const handleSearchValueChanged = (event) => {\r\n    setSearchValue(event.target.value);\r\n  };\r\n\r\n  if (!pageError.message) {\r\n    return (\r\n      <div className=\"d-flex justify-content-center mt-4\">\r\n        <div style={{ width: 500 }}>\r\n          <h1 className=\"text-center display-4\">Players</h1>\r\n          <div className=\"form-group mx-2 mt-4\">\r\n            <input onChange={handleSearchValueChanged} className=\"form-control\" type=\"text\" placeholder=\"Search\"\r\n                   value={searchValue}/>\r\n          </div>\r\n          <PlayerList\r\n            players={players} withBadge={false} searchValue={searchValue} withAge={true} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n};\r\n\r\nexport default Players;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nconst GameCard = (input) => {\r\n  const { game, reference, clickHandler } = input;\r\n  const [time, setTime] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (game.startTime) {\r\n      const start = game.startTime.split(/[- :]/);\r\n      const end = game.endTime.split(/[- :]/);\r\n      setTime(`${start[3]}:${start[4]} - ${end[3]}:${end[4]}`);\r\n    } else {\r\n      setTime('No time set.');\r\n    }\r\n  }, [game.startTime, game.endTime]);\r\n\r\n  return (\r\n    <div onClick={clickHandler} ref={reference} className=\"card shadow-sm mt-2 clickable\">\r\n      <div className=\"card-header bg-transparent py-1\">{time}</div>\r\n        <div className=\"card-body pb-0\">\r\n          <h5 className=\"card-title\">{game.name}</h5>\r\n          <p className=\"card-text\">{game.description}</p>\r\n          <p className=\"card-text mb-2\">\r\n            <small className=\"text-muted\">\r\n              {game.owner.lastName} {game.owner.firstName}\r\n            </small>\r\n          </p>\r\n\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// TODO az a nem ugy mukodik mint a link/history FONTOSSS\r\n\r\nexport default GameCard;\r\n","import {\n  actionLoadDays, actionLoadAllGames, actionLoadMyGames, actionSetCurrentGameTab, actionLoadGame\n} from './actionTypes';\n\nexport const loadDays = (days) => ({ type: actionLoadDays, payload: days });\nexport const loadAllGames = (games) => ({ type: actionLoadAllGames, payload: games });\nexport const loadMyGames = (games) => ({ type: actionLoadMyGames, payload: games });\nexport const setCurrentTab = (currentTab) => ({ type: actionSetCurrentGameTab, payload: currentTab });\nexport const loadGame = (game) => ({ type: actionLoadGame, payload: game });\n","import { useRef, useLayoutEffect } from 'react';\r\n\r\nfunction getScrollPosition({ element, useWindow }) {\r\n  if (typeof window === 'undefined') return { x: 0, y: 0 };\r\n\r\n  const target = element ? element.current : document.body;\r\n  const position = target.getBoundingClientRect();\r\n\r\n  return useWindow\r\n    ? { x: window.scrollX, y: window.scrollY }\r\n    : { x: position.left, y: position.top };\r\n}\r\n\r\nconst useScrollPosition = (effect, deps, element, useWindow, wait) => {\r\n  const position = useRef(getScrollPosition({ useWindow }));\r\n\r\n  let throttleTimeout = null;\r\n\r\n  const callBack = () => {\r\n    const currPos = getScrollPosition({ element, useWindow });\r\n    effect({ prevPos: position.current, currPos });\r\n    position.current = currPos;\r\n    throttleTimeout = null;\r\n  };\r\n\r\n  useLayoutEffect(() => {\r\n    const handleScroll = () => {\r\n      if (wait) {\r\n        if (throttleTimeout === null) {\r\n          // eslint-disable-next-line react-hooks/exhaustive-deps\r\n          throttleTimeout = setTimeout(callBack, wait);\r\n        }\r\n      } else {\r\n        callBack();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('scroll', handleScroll);\r\n\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, deps);\r\n};\r\n\r\nexport default useScrollPosition;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useCookies } from 'react-cookie';\r\nimport GameCard from './game_card.jsx';\r\nimport { loadDays, loadAllGames, loadMyGames } from '../../actions/eventActions';\r\nimport { restFetch2 } from '../../utils/communication';\r\nimport * as Constants from '../../constants';\r\nimport ErrorPage from '../error_page.jsx';\r\nimport useScrollPosition from '../../utils/scroll';\r\n\r\nconst classNames = require('classnames');\r\n\r\n// eslint-disable-next-line max-lines-per-function\r\nconst GameList = () => {\r\n  const currentTab = useSelector((state) => state.event.currentTab);\r\n  const days = useSelector((state) => state.event.days);\r\n  const games = useSelector((state) => {\r\n    if (currentTab === 'all') {\r\n      return state.event.allGames;\r\n    }\r\n    return state.event.myGames;\r\n  });\r\n  const [buttons, setButtons] = useState({});\r\n  const [uiGames, setUiGames] = useState([]);\r\n\r\n  const dispatch = useDispatch();\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n  const [pageError, setPageError] = useState({});\r\n  const [refs, setRefs] = useState([]);\r\n  const [selectedDay, setSelectedDay] = useState(0);\r\n  const history = useHistory();\r\n\r\n  const navRef = React.createRef();\r\n\r\n  useEffect(() => {\r\n    let gameUrl;\r\n    let loadFunc;\r\n    if (currentTab === 'all') {\r\n      gameUrl = `${Constants.SERVER_PATH}api/games`;\r\n      loadFunc = loadAllGames;\r\n    } else {\r\n      gameUrl = `${Constants.SERVER_PATH}api/games?own=true`;\r\n      loadFunc = loadMyGames;\r\n    }\r\n\r\n    restFetch2(`${Constants.SERVER_PATH}api/days`, dispatch, removeCookie).then((resultDays) => {\r\n      dispatch(loadDays(resultDays.map((day) => new Date(day))));\r\n    }).then(() => restFetch2(gameUrl, dispatch, removeCookie))\r\n      .then((resultGames) => {\r\n        dispatch(loadFunc(resultGames));\r\n      })\r\n      .catch((error) => {\r\n        setPageError(error);\r\n      });\r\n  }, [dispatch, currentTab, removeCookie]);\r\n\r\n  const handleScroll = () => {\r\n    if (refs.length > 0) {\r\n      let k = 0;\r\n      refs.forEach((ref, i) => {\r\n        if (i === 0 || ref.ref.current.getBoundingClientRect().bottom\r\n          - navRef.current.getBoundingClientRect().bottom <= 0) {\r\n          k = ref.num;\r\n        }\r\n      });\r\n      setSelectedDay(k);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const tmp = {};\r\n    const daySet = new Set(games.map((game) => (new Date(game.startTime)).getDate()));\r\n    let selected = false;\r\n    days.forEach((day) => {\r\n      const dayNum = day.getDate();\r\n      tmp[dayNum] = { num: dayNum, name: day.toLocaleDateString('en-US', { weekday: 'long' }), active: false };\r\n      tmp[dayNum].disabled = !daySet.has(dayNum);\r\n      if (!tmp[dayNum].disabled) {\r\n        tmp[dayNum].ref = React.createRef();\r\n        if (!selected) {\r\n          setSelectedDay(dayNum);\r\n          selected = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    const nana = [];\r\n    const tmpRefs = [];\r\n    let lastDay = -1;\r\n    games.forEach((game, i) => {\r\n      const currentDay = (new Date(game.startTime)).getDate();\r\n      if (game.startTime && (i === 0 || currentDay !== lastDay)) {\r\n        nana.push({ ...game, ref: tmp[currentDay].ref });\r\n        if (i === 0) {\r\n          tmpRefs.push({ num: currentDay });\r\n        } else {\r\n          const ref = React.createRef();\r\n          nana[i - 1] = { ...nana[i - 1], ref };\r\n          tmpRefs.push({ num: currentDay, ref });\r\n        }\r\n      } else {\r\n        nana.push({ ...game });\r\n      }\r\n      lastDay = currentDay;\r\n    });\r\n\r\n    setButtons(tmp);\r\n    setRefs(tmpRefs);\r\n    setUiGames(nana);\r\n  }, [currentTab, days, games]);\r\n\r\n  useScrollPosition(handleScroll);\r\n\r\n  const handleDayClicked = (button) => {\r\n    const navParams = navRef.current.getBoundingClientRect();\r\n    const offset = button.ref.current.getBoundingClientRect().top\r\n      - navParams.bottom + navParams.top;\r\n    window.scrollBy({ top: offset, behavior: 'smooth' });\r\n  };\r\n\r\n  if (!pageError.message) {\r\n    return (\r\n      <React.Fragment>\r\n        <nav ref={navRef} className=\"navbar navbar-light bg-white sticky-top mt-2 border shadow-sm\">\r\n          <p className=\"navbar-brand my-0\">{currentTab === 'all' ? 'All games' : 'My games'}</p>\r\n          <ul className=\"nav nav-pills\">\r\n            {Object.values(buttons).map((button) => {\r\n              const classes = classNames({\r\n                btn: true,\r\n                'btn-link': true,\r\n                'nav-link': true,\r\n                active: button.num === selectedDay,\r\n              });\r\n              return (\r\n                <li key={button.num} className=\"nav-item\">\r\n                  <button onClick={() => handleDayClicked(button)}\r\n                          className={classes} disabled={button.disabled}>\r\n                    {button.name}\r\n                  </button>\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        </nav>\r\n        <div>\r\n          {uiGames.map((game) => <GameCard reference={game.ref} clickHandler={() => history.push(`${Constants.APP_URL_PATH}games/${game.id}`)} key={game.id} game={game}/>)}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n  return <ErrorPage status={pageError.status} message={pageError.message} />;\r\n};\r\n\r\nexport default GameList;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport GameList from './game_list.jsx';\r\nimport * as Constants from '../../constants';\r\nimport { setCurrentTab } from '../../actions/eventActions';\r\n\r\nconst classNames = require('classnames');\r\n\r\nconst Games = () => {\r\n  const userPermissions = useSelector((state) => state.user.permissions);\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const [permAllGames, setPermAllGames] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (userPermissions.includes(Constants.PERM_ALL_GAME_ACCESS)) {\r\n      setPermAllGames(true);\r\n      dispatch(setCurrentTab('all'));\r\n    } else {\r\n      dispatch(setCurrentTab('own'));\r\n    }\r\n  }, [dispatch, userPermissions]);\r\n\r\n  const addGameClicked = () => {\r\n    history.push(`${Constants.APP_URL_PATH}addgame`);\r\n  };\r\n\r\n  const tabClicked = (e, type) => {\r\n    window.$(`#${e.target.id}`).tab('show');\r\n    dispatch(setCurrentTab(type));\r\n  };\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center mt-4\">\r\n      <div style={{ width: 500 }}>\r\n        <h1 className=\"text-center display-4\">Games</h1>\r\n        {userPermissions.includes(Constants.PERM_ADD_GAME) && (\r\n          <div className=\"d-flex justify-content-center mt-4\">\r\n            <button onClick={addGameClicked} type=\"button\" className=\"btn btn-outline-primary\">Add game</button>\r\n          </div>\r\n        )}\r\n        <ul className=\"nav nav-tabs mt-4\" id=\"myTab\" role=\"tablist\">\r\n          {permAllGames && <TabHeader type=\"all\" label=\"All games\" active={true} click={tabClicked} /> }\r\n          <TabHeader type=\"own\" label=\"My games\" active={!permAllGames} click={tabClicked} />\r\n        </ul>\r\n        <div className=\"tab-content\" id=\"myTabContent\">\r\n          <div className=\"tab-pane fade show active\" id=\"tab-content\">\r\n            <GameList />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst TabHeader = (input) => {\r\n  const {\r\n    type, label, active, click,\r\n  } = input;\r\n\r\n  const classes = classNames({\r\n    'nav-link': true,\r\n    btn: true,\r\n    'btn-link': true,\r\n    'shadow-none': true,\r\n    active,\r\n  });\r\n  return (\r\n    <li className=\"nav-item\">\r\n      <button onClick={(e) => click(e, type)} className={classes} id={`${type}-tab`} data-target=\"#tab-content\">\r\n        {label}\r\n      </button>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Games;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { restFetch2 } from '../../utils/communication';\r\nimport * as Constants from '../../constants';\r\nimport { loadGame } from '../../actions/eventActions';\r\nimport { loadPersons } from '../../actions/staffActions';\r\n\r\nconst classNames = require('classnames');\r\n\r\nconst Game = () => {\r\n  const { id } = useParams();\r\n  const gameData = useSelector((state) => state.event.gamesData);\r\n  const users = useSelector((state) => state.staff.persons);\r\n  const dispatch = useDispatch();\r\n  const cookies = useCookies();\r\n  const history = useHistory();\r\n  const removeCookie = cookies[2];\r\n  const [contributors, setContributors] = useState(new Set());\r\n  const [assignmentsModal, setAssignmentsModal] = useState(true);\r\n  const [newOwner, setNewOwner] = useState({ id: 0, firstName: '', lastName: '' });\r\n  const [dialogLoading, setDialogLoading] = useState(false);\r\n  const [dialogError, setDialogError] = useState('');\r\n\r\n  useEffect(() => {\r\n    restFetch2(`${Constants.SERVER_PATH}api/games/${id}`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadGame(result));\r\n    }).then(() => restFetch2(`${Constants.SERVER_PATH}api/users`, dispatch, removeCookie)).then((persons) => {\r\n      dispatch(loadPersons(persons));\r\n    })\r\n      .catch((error) => {\r\n        console.log(error.message);\r\n      });\r\n  }, [dispatch, id, removeCookie]);\r\n\r\n  useEffect(() => {\r\n    const removeModal = () => {\r\n      window.$('#listModal').modal('hide');\r\n      window.$('#moveOwnerDialog').modal('hide');\r\n      window.$('#deleteGameDialog').modal('hide');\r\n      window.$('body').removeClass('modal-open');\r\n      window.$('.modal-backdrop').remove();\r\n    };\r\n    window.onpopstate = removeModal;\r\n    return () => {\r\n      removeModal();\r\n      window.onpopstate = () => {};\r\n    };\r\n  }, []);\r\n\r\n  const updateContributors = () => {\r\n    setDialogLoading(true);\r\n    fetch(`${Constants.SERVER_PATH}api/games/${id}/assignments`, {\r\n      method: 'POST',\r\n      credentials: 'include',\r\n      body: JSON.stringify(Array.from(contributors)),\r\n    }).then((result) => result.json()).then((result) => {\r\n      setDialogLoading(false);\r\n      if (result.succeed) {\r\n        window.$('#listModal').modal('hide');\r\n        restFetch2(`${Constants.SERVER_PATH}api/games/${id}`, dispatch, removeCookie).then((res) => {\r\n          dispatch(loadGame(res));\r\n        }).catch((error) => {\r\n          console.log(error.message);\r\n        });\r\n      } else {\r\n        setDialogError(result.message);\r\n      }\r\n    }).catch((error) => {\r\n      setDialogLoading(false);\r\n      setDialogError('Network error.');\r\n      console.log(`Network error: ${error.messageg}`);\r\n    });\r\n  };\r\n\r\n  const moveOwner = (userId) => {\r\n    setDialogLoading(true);\r\n    fetch(`${Constants.SERVER_PATH}api/games/${id}/moveOwner`, {\r\n      method: 'POST',\r\n      credentials: 'include',\r\n      body: JSON.stringify(userId),\r\n    }).then((result) => result.json()).then((result) => {\r\n      setDialogLoading(false);\r\n      if (result.succeed) {\r\n        history.push(`${Constants.APP_URL_PATH}games`);\r\n      } else {\r\n        setDialogError(result.message);\r\n      }\r\n    }).catch((error) => {\r\n      setDialogLoading(false);\r\n      setDialogError('Network error.');\r\n      console.log(error.message);\r\n    });\r\n  };\r\n\r\n  const deleteGame = () => {\r\n    setDialogLoading(true);\r\n    fetch(`${Constants.SERVER_PATH}api/games/${id}`, {\r\n      method: 'DELETE',\r\n      credentials: 'include',\r\n    }).then((result) => result.json()).then((result) => {\r\n      setDialogLoading(false);\r\n      if (result.succeed) {\r\n        history.push(`${Constants.APP_URL_PATH}games`);\r\n      } else {\r\n        setDialogError(result.message);\r\n      }\r\n    }).catch((error) => {\r\n      setDialogLoading(false);\r\n      setDialogError('Network error.');\r\n      console.log(error.message);\r\n    });\r\n  };\r\n\r\n  const toggleCheckbox = (user) => {\r\n    const tmp = new Set(contributors);\r\n    if (tmp.has(user.id)) {\r\n      tmp.delete(user.id);\r\n    } else {\r\n      tmp.add(user.id);\r\n    }\r\n    setContributors(tmp);\r\n  };\r\n\r\n  const renderUserList = (withCheckbox, click = toggleCheckbox) => (\r\n      <div className=\"list-group\">\r\n        {users\r\n          .filter((user) => user.id !== gameData[id].ownerId)\r\n          .map(\r\n            (user) => (\r\n              <div onClick={() => click(user)} key={user.id} className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center clickable\" >\r\n                <p className=\"m-0 p-0\">{user.lastName} {user.firstName}</p>\r\n                {withCheckbox && (\r\n                  <input onChange={() => toggleCheckbox(user)} className=\"form-check-input-lg\" type=\"checkbox\" id={`ch-${user.id}`} checked={contributors.has(user.id)}/>\r\n                )}\r\n              </div>\r\n            ),\r\n          )}\r\n      </div>\r\n  );\r\n\r\n  const renderModal = (input) => {\r\n    const { errorMessage, isLoading } = input;\r\n    return (\r\n      <div className=\"modal fade\" id=\"listModal\" data-backdrop=\"static\" data-keyboard=\"false\" tabIndex=\"-1\">\r\n        <div className=\"modal-dialog modal-dialog-scrollable\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h5 className=\"modal-title\">{assignmentsModal ? 'Select contributors' : 'Move ownership to:'}</h5>\r\n              <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              {assignmentsModal ? renderUserList(true) : renderUserList(false, (user) => {\r\n                setDialogError('');\r\n                setNewOwner(user);\r\n                window.$('#listModal').modal('hide');\r\n                window.$('#moveOwnerDialog').modal('show');\r\n              })}\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n              {assignmentsModal && (\r\n                <button onClick={() => {\r\n                  updateContributors();\r\n                }} type=\"button\" className=\"btn btn-primary\" disabled={isLoading}>\r\n                  {isLoading && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\" />}\r\n                  Save changes\r\n                </button>\r\n              )};\r\n            </div>\r\n            {errorMessage && <div className=\"alert alert-danger mx-2\" role=\"alert\">{errorMessage}</div>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderGamePage = () => {\r\n    const game = gameData[id];\r\n    return (\r\n      <div className=\"d-flex justify-content-center mt-2\">\r\n        <div style={{ width: 500 }}>\r\n          <div className=\"card text-center border-dark my-2 mx-2  px-2 sticky-top\">\r\n            <div className=\"card-body\">\r\n              <h2 className=\"card-title\">{game.name}</h2>\r\n              <div className=\"d-flex justify-content-center mt-2\">\r\n                <button className=\"btn btn-primary\">Add score</button>\r\n                {game.permissions.includes('edit') && (\r\n                  <button onClick={() => {\r\n                    history.push(`${Constants.APP_URL_PATH}games/${id}/edit`);\r\n                  }} className=\"btn btn-outline-secondary ml-2\">Edit game</button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {game.description && (\r\n            <Card title=\"Description\">\r\n              <p>{game.description}</p>\r\n            </Card>\r\n          )}\r\n          {game.notes && (\r\n            <Card title=\"Notes\">\r\n              <p>{game.notes}</p>\r\n            </Card>\r\n          )}\r\n          <Card title=\"Details\">\r\n            <div className=\"list-group mt-4 mx-2\">\r\n              <DetailItem label=\"Owner:\" value={`${game.lastName} ${game.firstName}`}/>\r\n              {game.location && (\r\n                <DetailItem label=\"Location:\" value={game.location}/>\r\n              )}\r\n              <DetailItem label=\"Player count:\" value={game.playerCount}/>\r\n              {game.startTime && (\r\n                <React.Fragment>\r\n                  <DetailItem label=\"Start time:\" value={game.startTime}/>\r\n                  <DetailItem label=\"End time:\" value={game.endTime}/>\r\n                </React.Fragment>\r\n              )}\r\n            </div>\r\n          </Card>\r\n          {(game.assignments.length > 0 || game.permissions.includes('admin')) && (\r\n            <Card title=\"Contributors\">\r\n              <div className=\"d-flex flex-wrap\">\r\n                {game.assignments.map((contributor) => (\r\n                  <div key={contributor.id} style={{ background: '#17a2b8', color: 'white', fontSize: 'small' }}\r\n                       className=\"rounded px-2 py-1 mt-1 ml-1\">\r\n                    <b>{contributor.lastName} {contributor.firstName}</b>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              {game.permissions.includes('admin') && (\r\n                <button onClick={() => {\r\n                  setDialogError('');\r\n                  setAssignmentsModal(true);\r\n                  const tmp = new Set();\r\n                  game.assignments.forEach((user) => tmp.add(user.id));\r\n                  setContributors(tmp);\r\n                }} className=\"btn btn-link mt-2\" data-toggle=\"modal\" data-target=\"#listModal\" >Edit contributors</button>\r\n              )}\r\n            </Card>\r\n          )}\r\n          {game.permissions.includes('admin') && (\r\n            <Card title=\"Administration\">\r\n              <button onClick={() => setAssignmentsModal(false)} className=\"btn btn-outline-danger\" data-toggle=\"modal\" data-target=\"#listModal\">Move ownership</button>\r\n              <button onClick={() => {\r\n                setDialogError('');\r\n                window.$('#deleteGameDialog').modal('show');\r\n              }} className=\"btn btn-outline-danger ml-2\">Delete game</button>\r\n            </Card>\r\n          )}\r\n        </div>\r\n        {renderModal({ errorMessage: dialogError, isLoading: dialogLoading })}\r\n\r\n        <ConfirmationDialog errorMessage={dialogError} isLoading={dialogLoading} id=\"moveOwnerDialog\" title=\"Move ownership\" text={\r\n          (\r\n            <React.Fragment>\r\n              {'Do you want to move '}<b>{game.name}</b>{'\\'s ownership to '}<b>{newOwner.lastName} {newOwner.firstName}?</b>\r\n            </React.Fragment>\r\n          )\r\n        } confirmBtnText=\"Move\" btnHandler={() => {\r\n          moveOwner(newOwner.id);\r\n        }} />\r\n\r\n        <ConfirmationDialog errorMessage={dialogError} isLoading={dialogLoading} id=\"deleteGameDialog\" title=\"Delete game\" text={\r\n          (\r\n            <React.Fragment>\r\n              {'Do you want to delete '}<b>{game.name}</b>?\r\n            </React.Fragment>\r\n          )\r\n        } confirmBtnText=\"Delete\" btnType=\"danger\" btnHandler={() => {\r\n          console.log(`Delete game ${game.name}`);\r\n          deleteGame();\r\n        }} />\r\n\r\n      </div>\r\n    );\r\n  };\r\n  if (gameData[id]) {\r\n    return renderGamePage();\r\n  }\r\n  return <h4>Loading</h4>;\r\n};\r\n\r\nconst Card = (prop) => (\r\n  <div className=\"card border-gray my-2 mx-2\">\r\n    <div className=\"card-body\">\r\n      <h4>{prop.title}</h4>\r\n      {prop.children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst DetailItem = (input) => (\r\n  <div className=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center\">\r\n    <p className=\"p-0 m-0\">{input.label}</p>\r\n    <p className=\"p-0 m-0\">{input.value}</p>\r\n  </div>\r\n);\r\n\r\nconst ConfirmationDialog = (input) => {\r\n  const {\r\n    id, title, text, confirmBtnText, btnHandler, errorMessage, isLoading,\r\n  } = input;\r\n  let { btnType } = input;\r\n  if (!btnType) {\r\n    btnType = 'primary';\r\n  }\r\n  const classes = classNames({\r\n    btn: true,\r\n    [`btn-${btnType}`]: true,\r\n  });\r\n\r\n  return (\r\n    <div className=\"modal fade\" id={id} data-backdrop=\"static\" data-keyboard=\"false\" tabIndex=\"-1\">\r\n      <div className=\"modal-dialog modal-dialog-scrollable\">\r\n        <div className=\"modal-content\">\r\n          <div className=\"modal-header\">\r\n            <h5 className=\"modal-title\">{title}</h5>\r\n            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div className=\"modal-body\">{text}</div>\r\n          <div className=\"modal-footer\">\r\n            <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Cancel</button>\r\n            <button onClick={() => btnHandler()} type=\"button\" className={classes} disabled={isLoading}>\r\n              {isLoading && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\" />}\r\n              {confirmBtnText}\r\n            </button>\r\n          </div>\r\n          {errorMessage && <div className=\"alert alert-danger mx-2\" role=\"alert\">{errorMessage}</div>}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Game;\r\n","const required = { allowEmpty: false, message: 'This field is required.' };\r\n\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const gameConstraints = {\r\n  title: {\r\n    presence: required,\r\n    length: {\r\n      minimum: 3,\r\n      maximum: 32,\r\n      tooShort: 'The title must be between 3 and 32 characters.',\r\n      tooLong: 'The title must be between 3 and 32 characters.',\r\n    },\r\n  },\r\n  day: {\r\n    presence: required,\r\n    selector: true,\r\n  },\r\n  startTime: {\r\n    presence: required,\r\n    format: {\r\n      pattern: '[0-9]{2}:[0-9]{2}',\r\n      message: 'Enter a valid time',\r\n    },\r\n  },\r\n  endTime: {\r\n    presence: required,\r\n    format: {\r\n      pattern: '([0-1]?[0-9]|2[0-3]):[0-5][0-9]',\r\n      message: 'Enter a valid time',\r\n    },\r\n  },\r\n  area: {\r\n    length: {\r\n      maximum: 1024,\r\n      tooLong: 'Max length of this field is 1024 characters.',\r\n    },\r\n  },\r\n  location: {\r\n    length: {\r\n      maximum: 32,\r\n      tooLong: 'The location must be between 3 and 32 characters.',\r\n    },\r\n  },\r\n  playerCount: {\r\n    numericality: {\r\n      onlyInteger: true,\r\n      strict: true,\r\n      greaterThanOrEqualTo: 0,\r\n      lessThanOrEqualTo: 16,\r\n      message: 'Player count must be between 0 and 16.',\r\n    },\r\n  },\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport { gameConstraints as rules } from '../../constraints/gameConstraints';\r\nimport { restFetch2 } from '../../utils/communication';\r\nimport * as Constants from '../../constants';\r\nimport { loadGame } from '../../actions/eventActions';\r\n\r\nconst validate = require('validate.js');\r\nconst moment = require('moment');\r\nconst  classNames = require('classnames');\r\n\r\nconst GameForm = (input) => {\r\n  const { edit } = input;\r\n  const { id } = useParams();\r\n  const gamesData = useSelector((state) => state.event.gamesData);\r\n  const [title, setTitle] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [playerCount, setPlayerCount] = useState({ value: 0, error: '', ref: React.createRef() });\r\n  const [description, setDescription] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [notes, setNotes] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [day, setDay] = useState({ options: [], error: '', ref: React.createRef() });\r\n  const [selectedDayId, setSelectedDayId] = useState(0);\r\n  const [startTime, setStartTime] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [endTime, setEndTime] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [location, setLocation] = useState({ value: '', error: '', ref: React.createRef() });\r\n  const [timeDisabled, setTimeDisabled] = useState(false);\r\n  const [btnDisabled, setBtnDisabled] = useState(false);\r\n\r\n  const fields = {\r\n    title: { state: title, setState: setTitle, order: 1 },\r\n    playerCount: { state: playerCount, setState: setPlayerCount, order: 2 },\r\n    description: { state: description, setState: setDescription, order: 3 },\r\n    notes: { state: notes, setState: setNotes, order: 4 },\r\n    location: { state: location, setState: setLocation, order: 5 },\r\n    day: { state: day, setState: setDay, order: 6 },\r\n    startTime: { state: startTime, setState: setStartTime, order: 7 },\r\n    endTime: { state: endTime, setState: setEndTime, order: 8 },\r\n  };\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  validate.validators.selector = (value) => {\r\n    console.log('Day:');\r\n    console.log(value);\r\n    if (!value) {\r\n      return 'This field is required.';\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (edit) {\r\n      restFetch2(`${Constants.SERVER_PATH}api/games/${id}`, dispatch, removeCookie).then((result) => {\r\n        dispatch(loadGame(result));\r\n      })\r\n        .catch((error) => {\r\n          console.log(error.message);\r\n        });\r\n    }\r\n  }, [edit, dispatch, id, removeCookie]);\r\n\r\n  useEffect(() => {\r\n    if (edit) {\r\n      if (gamesData[id]) {\r\n        setTitle({ ...title, value: gamesData[id].name });\r\n        setPlayerCount({ ...playerCount, value: gamesData[id].playerCount });\r\n\r\n        if (gamesData[id].description) {\r\n          setDescription({ ...title, value: gamesData[id].description });\r\n        }\r\n\r\n        if (gamesData[id].notes) {\r\n          setNotes({ ...notes, value: gamesData[id].notes });\r\n        }\r\n\r\n        if (gamesData[id].location) {\r\n          setLocation({ ...location, value: gamesData[id].location });\r\n        }\r\n\r\n        if (gamesData[id].startTime) {\r\n          setTimeDisabled(false);\r\n          const t1 = gamesData[id].startTime.split(/[- :]/);\r\n          const t2 = gamesData[id].endTime.split(/[- :]/);\r\n\r\n          const dayId = (new Date(Date.UTC(t1[0], t1[1] - 1, t1[2], 0, 0, 0))).getTime();\r\n\r\n          let startDate = new Date(Date.UTC(t1[0], t1[1] - 1, t1[2], t1[3], t1[4], t1[5]));\r\n          let endDate = new Date(Date.UTC(t2[0], t2[1] - 1, t2[2], t2[3], t2[4], t2[5]));\r\n\r\n          startDate = new Date(startDate.getTime() + startDate.getTimezoneOffset() * 60000);\r\n          endDate = new Date(endDate.getTime() + endDate.getTimezoneOffset() * 60000);\r\n\r\n          setSelectedDayId(dayId);\r\n          setStartTime({ ...startTime, value: moment(startDate).format('HH:mm') });\r\n          setEndTime({ ...endTime, value: moment(endDate).format('HH:mm') });\r\n        } else {\r\n          setTimeDisabled(true);\r\n        }\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [edit, gamesData, id]);\r\n\r\n  useEffect(() => {\r\n    restFetch2(`${Constants.SERVER_PATH}api/days`, dispatch, removeCookie).then((resultDays) => {\r\n      setDay({\r\n        ...day,\r\n        options: resultDays.map((item) => {\r\n          const date = new Date(item);\r\n          const newDate = new Date(date.getTime() + (date.getTimezoneOffset() * 60000));\r\n          return ({ id: date.getTime(), name: newDate.toLocaleDateString('en-US', { weekday: 'long' }) });\r\n        }),\r\n      });\r\n    }).catch((error) => {\r\n      console.log(`Error: ${error.message}`);\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [dispatch, removeCookie]);\r\n\r\n  const simplifyNonRequiredField = (value) => (value.trim().length === 0 ? null : value);\r\n  const dateToSqlFormat = (value) => value.toISOString().slice(0, 16).replace('T', ' ');\r\n\r\n  const saveGameClicked = () => {\r\n    let validationObj = {\r\n      title: title.value,\r\n      playerCount: playerCount.value,\r\n      description: description.value,\r\n      notes: notes.value,\r\n      location: location.value,\r\n    };\r\n\r\n    const currentRules = { ...rules };\r\n    if (!timeDisabled) {\r\n      validationObj = {\r\n        ...validationObj,\r\n        day: selectedDayId,\r\n        startTime: startTime.value,\r\n        endTime: endTime.value,\r\n      };\r\n    } else {\r\n      delete currentRules.day;\r\n      delete currentRules.startTime;\r\n      delete currentRules.endTime;\r\n    }\r\n\r\n    console.log(validationObj);\r\n\r\n    const validation = validate(validationObj, currentRules, { fullMessages: false });\r\n    if (validation) {\r\n      console.log(validation);\r\n      let minOrder = 999,\r\n        minKey = '';\r\n      Object.entries(validation)\r\n        .forEach(([key, value]) => {\r\n          if (fields[key].order < minOrder) {\r\n            minOrder = fields[key].order;\r\n            minKey = key;\r\n          }\r\n          fields[key].setState((rest) => ({ ...rest, error: value[0] }));\r\n        });\r\n      fields[minKey].state.ref.current.scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: 'start',\r\n      });\r\n    } else {\r\n      console.log('Adding game');\r\n      const data = {\r\n        title: title.value,\r\n        playerCount: playerCount.value,\r\n        description: simplifyNonRequiredField(description.value),\r\n        notes: simplifyNonRequiredField(notes.value),\r\n        location: simplifyNonRequiredField(location.value),\r\n      };\r\n\r\n      if (!timeDisabled) {\r\n        const selectedDay = selectedDayId;\r\n        const t1 = startTime.value.split(':');\r\n        const t2 = endTime.value.split(':');\r\n        const start = (Number.parseInt(t1[0], 10) * 3600000) + (Number.parseInt(t1[1], 10) * 60000);\r\n        const end = (Number.parseInt(t2[0], 10) * 3600000) + (Number.parseInt(t2[1], 10) * 60000);\r\n\r\n        const ss = new Date(selectedDay + start);\r\n        const ee = new Date(end > start ? selectedDay + end : selectedDay + 86400000 + end);\r\n\r\n        data.startTime = dateToSqlFormat(ss);\r\n        data.endTime = dateToSqlFormat(ee);\r\n      } else {\r\n        data.startTime = null;\r\n        data.endTime = null;\r\n      }\r\n\r\n      const url = edit ? `${Constants.SERVER_PATH}api/games/${id}` : `${Constants.SERVER_PATH}api/games`;\r\n\r\n      setBtnDisabled(true);\r\n      fetch(url, {\r\n        method: edit ? 'POST' : 'PUT',\r\n        credentials: 'include',\r\n        body: JSON.stringify(data),\r\n      }).then((result) => result.json()).then((result) => {\r\n        if (result.succeed) {\r\n          console.log('SUCCES');\r\n          history.replace(edit ? `${Constants.APP_URL_PATH}games/${id}` : `${Constants.APP_URL_PATH}games`);\r\n        } else {\r\n          let minOrder = 999,\r\n            minKey = '';\r\n          Object.entries(result.inputErrors)\r\n            .forEach(([key, value]) => {\r\n              if (fields[key].order < minOrder) {\r\n                minOrder = fields[key].order;\r\n                minKey = key;\r\n              }\r\n              fields[key].setState((rest) => ({ ...rest, error: value }));\r\n            });\r\n          fields[minKey].state.ref.current.scrollIntoView({\r\n            behavior: 'smooth',\r\n            block: 'start',\r\n          });\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center\">\r\n      <div style={{ width: 500 }}>\r\n        <form>\r\n          <Card title=\"Game data\">\r\n            <FormGroup na={title.ref}>\r\n              <Input type=\"text\" id=\"inputTitle\" label=\"Title\" state={title} setState={setTitle} constraint={{ value: rules.title }} />\r\n            </FormGroup>\r\n            <FormGroup na={playerCount.ref}>\r\n              <RangeInput id=\"inputPlayerCount\" label=\"Player count\" state={playerCount} setState={setPlayerCount} constraint={{ value: rules.playerCount }} min={0} max={16}/>\r\n            </FormGroup>\r\n            <FormGroup na={description.ref}>\r\n              <Input rows=\"4\" id=\"inputDescription\" label=\"Description\" state={description} setState={setDescription} constraint={{ value: rules.area }} />\r\n            </FormGroup>\r\n            <FormGroup na={notes.ref}>\r\n              <Input rows=\"4\" id=\"inputNotes\" label=\"Notes\" state={notes} setState={setNotes} constraint={{ value: rules.area }} />\r\n            </FormGroup>\r\n            <FormGroup na={location.ref}>\r\n              <Input type=\"text\" id=\"inputLocation\" label=\"Location\" state={location} setState={setLocation} constraint={{ value: rules.location }} />\r\n            </FormGroup>\r\n          </Card>\r\n          <Card title=\"Game time\">\r\n            <FormRow>\r\n              <FormGroup mdSize=\"4\" na={day.ref}>\r\n                <SelectInput id=\"inputDay\" label=\"Day\" state={day} setState={setDay} selected={selectedDayId} setSelected={setSelectedDayId} constraint={{ value: rules.day }} disabled={timeDisabled}/>\r\n              </FormGroup>\r\n              <FormGroup mdSize=\"4\" na={startTime.ref}>\r\n                <Input type=\"time\" id=\"inputStartTime\" label=\"Start time\" state={startTime} setState={setStartTime} constraint={{ value: rules.time }} disabled={timeDisabled} />\r\n              </FormGroup>\r\n              <FormGroup mdSize=\"4\" na={endTime.ref}>\r\n                <Input type=\"time\" id=\"inputEndTime\" label=\"End time\" state={endTime} setState={setEndTime} constraint={{ value: rules.time }} disabled={timeDisabled} />\r\n              </FormGroup>\r\n            </FormRow>\r\n            <div className=\"form-check\">\r\n              <input onChange={(e) => {\r\n                setTimeDisabled(e.target.checked);\r\n              }} className=\"form-check-input\" type=\"checkbox\" id=\"inputTimeLater\" checked={timeDisabled}/>\r\n              <label className=\"form-check-label\" htmlFor=\"inputTimeLater\">Add later</label>\r\n            </div>\r\n          </Card>\r\n          <Card title=\"Submit\">\r\n            <button onClick={() => saveGameClicked()} type=\"button\" className=\"btn btn-primary\" disabled={btnDisabled}>\r\n              {btnDisabled && <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\" aria-hidden=\"true\" />}\r\n              {edit ? 'Edit game' : 'Save game'}\r\n            </button>\r\n          </Card>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Card = (prop) => (\r\n  <div className=\"card border-dark my-2 mx-3\">\r\n    <div className=\"card-body\">\r\n      <h4>{prop.title}</h4>\r\n      {prop.children}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst FormRow = (prop) => (\r\n  <div className=\"form-row\">\r\n    {prop.children}\r\n  </div>\r\n);\r\n\r\nconst FormGroup = (prop) => {\r\n  const { children, mdSize, na } = prop;\r\n  const classes = classNames({\r\n    'form-group': true,\r\n    [`col-md-${mdSize}`]: mdSize,\r\n  });\r\n  return (\r\n    <div ref={na} className={classes}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Input = (prop) => {\r\n  const {\r\n    type, id, label, state, setState, decorators, rows, constraint, disabled,\r\n  } = prop;\r\n\r\n  const handleInputChange = (event) => {\r\n    const { value } = event.target;\r\n    setState((rest) => ({ ...rest, value, error: '' }));\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    let { value } = state;\r\n    if (decorators) {\r\n      for (let i = 0; i < decorators.length; i += 1) {\r\n        value = decorators[i](value);\r\n      }\r\n      setState((rest) => ({ ...rest, value }));\r\n    }\r\n    const validation = validate({ value }, constraint, { fullMessages: false });\r\n    if (validation) {\r\n      setState((rest) => ({ ...rest, error: validation.value[0] }));\r\n    }\r\n  };\r\n\r\n  const classes = classNames({\r\n    'form-control': true,\r\n    'is-invalid': !disabled && state.error,\r\n  });\r\n\r\n  const getInput = () => (rows ? (\r\n      <textarea\r\n        onChange={handleInputChange}\r\n        onBlur={handleBlur} rows={rows}\r\n        className={classes}\r\n        id={id}\r\n        placeholder={label}\r\n        value={state.value}\r\n        disabled={disabled}/>\r\n  ) : (\r\n      <input\r\n        onChange={handleInputChange}\r\n        onBlur={handleBlur} type={type}\r\n        className={classes}\r\n        id={id}\r\n        placeholder={label}\r\n        value={state.value}\r\n        disabled={disabled}/>\r\n  ));\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <label htmlFor={id}>{label}</label>\r\n      {getInput()}\r\n      { !disabled && state.error && <div className=\"invalid-feedback\">{state.error}</div>}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nconst SelectInput = (prop) => {\r\n  const {\r\n    id, label, state, setState, selected, setSelected, constraint, disabled,\r\n  } = prop;\r\n\r\n  const handleInputChange = (event) => {\r\n    const { selectedIndex } = event.target;\r\n    const selectedId = event.target[selectedIndex].id;\r\n    setSelected(Number.parseInt(selectedId, 10));\r\n    setState((rest) => ({ ...rest, error: '' }));\r\n    // setState((rest) => ({ ...rest, selectedId, error: '' }));\r\n    // console.log(new Date(Number.parseInt(selectedId, 10)));\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    // const { selectedId } = state;\r\n    const validation = validate({ value: selected }, constraint, { fullMessages: false });\r\n    if (validation) {\r\n      setState((rest) => ({ ...rest, error: validation.value[0] }));\r\n    }\r\n  };\r\n\r\n  const classes = classNames({\r\n    'custom-select': true,\r\n    'is-invalid': !disabled && state.error,\r\n  });\r\n\r\n  const findValue = () => {\r\n    if (selected === 0) {\r\n      return '';\r\n    }\r\n    for (let i = 0; i < state.options.length; i += 1) {\r\n      if (state.options[i].id === selected) {\r\n        console.log(state.options[i].name);\r\n        return state.options[i].name;\r\n      }\r\n    }\r\n    return '';\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <label htmlFor={id}>{label}</label>\r\n      <select\r\n        onChange={handleInputChange}\r\n        onBlur={handleBlur}\r\n        id={id}\r\n        className={classes}\r\n        disabled={disabled}\r\n        value={findValue()}>\r\n        <option value=\"\"/>\r\n        {state.options.map((item) => <option key={item.id} id={item.id}>{item.name}</option>)}\r\n      </select>\r\n      { !disabled && state.error && <div className=\"invalid-feedback\">{state.error}</div>}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nconst RangeInput = (input) => {\r\n  const {\r\n    id, label, state, setState, constraint, min, max,\r\n  } = input;\r\n\r\n  const handleInputChange = (event) => {\r\n    const { value } = event.target;\r\n    setState((rest) => ({ ...rest, value, error: '' }));\r\n\r\n    const validation = validate({ value }, constraint, { fullMessages: false });\r\n    if (validation) {\r\n      setState((rest) => ({ ...rest, error: validation.value[0] }));\r\n    }\r\n  };\r\n\r\n  const classes = classNames({\r\n    'form-control-range': true,\r\n    'is-invalid': state.error,\r\n  });\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <label htmlFor={id}>{label}: <b>{state.value}</b></label>\r\n      <input onChange={handleInputChange} min={min} max={max} type=\"range\" className={classes} id={id} value={state.value} />\r\n      {state.error && <div className=\"invalid-feedback\">{state.error}</div>}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default GameForm;\r\n","import React, { useEffect } from 'react';\r\nimport {\r\n  BrowserRouter as Router, Route, Switch, useRouteMatch, Link,\r\n} from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useCookies } from 'react-cookie';\r\nimport { logOut, loadUserData, loadPermissions } from '../actions/userActions';\r\nimport * as Constants from '../constants';\r\nimport Staff from './staff/staff.jsx';\r\nimport Teams from './teams/teams.jsx';\r\nimport Team from './teams/team.jsx';\r\nimport Player from './players/player.jsx';\r\nimport Players from './players/players.jsx';\r\nimport Games from './games/games.jsx';\r\nimport Game from './games/game.jsx';\r\nimport GameForm from './games/game_form.jsx';\r\nimport { restFetch2 } from '../utils/communication';\r\n\r\nconst Main = () => {\r\n  const userData = useSelector((state) => state.user.userData);\r\n  const userPermissions = useSelector((state) => state.user.permissions);\r\n  const { path, url } = useRouteMatch();\r\n  const dispatch = useDispatch();\r\n\r\n  const cookies = useCookies();\r\n  const removeCookie = cookies[2];\r\n\r\n  useEffect(() => {\r\n    restFetch2(`${Constants.SERVER_PATH}api/userData`, dispatch, removeCookie).then((result) => {\r\n      dispatch(loadUserData(result));\r\n    }).then(() => restFetch2(`${Constants.SERVER_PATH}api/userPermissions`, dispatch, removeCookie))\r\n      .then((result) => {\r\n        dispatch(loadPermissions(result));\r\n      })\r\n      .catch((error) => {\r\n        console.log(`Error: ${error.message}`);\r\n      });\r\n  }, []);\r\n\r\n  const logoutClicked = () => {\r\n    restFetch2(`${Constants.SERVER_PATH}api/logout`, dispatch, removeCookie).then(() => {\r\n      removeCookie('loggedin', { path: '/' });\r\n      dispatch(logOut());\r\n    }).catch((error) => {\r\n      console.log(`Error: ${error.message}`);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Router>\r\n      <nav className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\r\n        <Link to={`${url}`} className=\"navbar-brand\">\r\n          <img src=\"logo.svg\" width=\"30\" height=\"30\" className=\"d-inline-block align-top mr-3\" alt=\"\" />\r\n          HDN\r\n        </Link>\r\n        <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarTogglerDemo02\"\r\n                aria-controls=\"navbarTogglerDemo02\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n          <span className=\"navbar-toggler-icon\" />\r\n        </button>\r\n        <div className=\"collapse navbar-collapse\" id=\"navbarTogglerDemo02\">\r\n          <ul className=\"navbar-nav mr-auto mt-2 mt-lg-0\">\r\n            <NavbarItem to={`${url}`} title=\"Home\" />\r\n            <NavbarItem to={`${Constants.APP_URL_PATH}games`} title=\"Games\" />\r\n            <NavbarItem to={`${Constants.APP_URL_PATH}staff`} title=\"Staff\" />\r\n            {userPermissions.includes(Constants.PERM_TEAMS_DATA_ACCESS) && (\r\n              <React.Fragment>\r\n                <NavbarItem to={`${Constants.APP_URL_PATH}teams`} title=\"Teams\" />\r\n                <NavbarItem to={`${Constants.APP_URL_PATH}players`} title=\"Players\" />\r\n              </React.Fragment>\r\n            )}\r\n          </ul>\r\n          <ul className=\"navbar-nav mt-2 mt-lg-0\">\r\n          <li className=\"nav-item dropdown\">\r\n            <Link to={`${Constants.APP_URL_PATH}account`} className=\"nav-link dropdown-toggle\" role=\"button\" data-toggle=\"dropdown\"\r\n                  aria-haspopup=\"true\" aria-expanded=\"false\">\r\n              {`${userData.lastName} ${userData.firstName}`}\r\n            </Link>\r\n            <div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdownMenuLink\">\r\n              <Link to={`${url}/account`} className=\"btn shadow-none dropdown-item\">Account</Link>\r\n              <button onClick={logoutClicked} className=\"btn shadow-none rounded-0 dropdown-item\">Log Out</button>\r\n            </div>\r\n          </li>\r\n          </ul>\r\n        </div>\r\n      </nav>\r\n        <Switch>\r\n          <Route exact path={`${path}`}>\r\n            <h1>Home</h1>\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}staff`}>\r\n            <Staff />\r\n          </Route>\r\n          <Route exact path={`${Constants.APP_URL_PATH}games`}>\r\n            <Games />\r\n          </Route>\r\n          <Route exact path={`${Constants.APP_URL_PATH}games/:id`}>\r\n            <Game />\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}games/:id/edit`}>\r\n            <GameForm edit={true}/>\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}addGame`}>\r\n            <GameForm />\r\n          </Route>\r\n          <Route exact path={`${Constants.APP_URL_PATH}teams`}>\r\n            <Teams />\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}teams/:id`}>\r\n            <Team />\r\n          </Route>\r\n          <Route exact path={`${Constants.APP_URL_PATH}players`}>\r\n            <Players />\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}players/:id`}>\r\n            <Player />\r\n          </Route>\r\n          <Route path={`${Constants.APP_URL_PATH}account`}>\r\n            <h1>Account</h1>\r\n          </Route>\r\n          <Route path=\"*\">\r\n            <h3>Main error.</h3>\r\n          </Route>\r\n        </Switch>\r\n      </Router>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nconst NavbarItem = (input) => (\r\n    <li className=\"nav-item\">\r\n      <Link to={input.to} className=\"nav-link\">{input.title}</Link>\r\n    </li>\r\n);\r\n\r\nexport default Main;\r\n","import React from 'react';\nimport './App.css';\nimport {\n  BrowserRouter as Router, Route, Switch, Redirect,\n} from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { useCookies } from 'react-cookie';\nimport Login from './components/login.jsx';\nimport Registration from './components/registration.jsx';\nimport * as Constants from './constants';\nimport Main from './components/main.jsx';\n\nfunction App() {\n  const loggedIn = useSelector((state) => state.user.loggedIn);\n\n  return (\n    <React.Fragment>\n      <Router>\n        <Switch>\n          <PublicRoute path={`${Constants.APP_URL_PATH}login`}>\n            <Login />\n          </PublicRoute>\n          <PublicRoute path={`${Constants.APP_URL_PATH}registration`}>\n            <Registration />\n          </PublicRoute>\n          <PrivateRoute path={`${Constants.APP_URL_PATH}`}>\n            <Main />\n          </PrivateRoute>\n          <Route exact path=\"/\">\n            <Redirect to={`${Constants.APP_URL_PATH}`} />\n          </Route>\n          <PublicRoute path=\"*\">\n            <Redirect to={`${Constants.APP_URL_PATH}`} />\n          </PublicRoute>\n        </Switch>\n      </Router>\n    </React.Fragment>\n  );\n\n  function PrivateRoute(input) {\n    const { children, ...rest } = input;\n    const [cookies] = useCookies(['loggedin']);\n    return <Route {...rest} render={() => ((cookies.loggedin === '1' || loggedIn) ? (children) : (<Redirect to={{ pathname: `${Constants.APP_URL_PATH}login` }} />))} />;\n  }\n\n  function PublicRoute(input) {\n    const { children, ...rest } = input;\n    return <Route {...rest} render={() => (loggedIn ? (<Redirect to={{ pathname: `${Constants.APP_URL_PATH}` }} />) : (children))} />;\n  }\n}\n\nexport default App;\n\n// TODO signupnal hibak, visszajelzesek\n","import produce from 'immer';\r\nimport {\r\n  actionLogIn, actionLoadUserData, actionLogOut, actionLoadPermissions,\r\n} from '../actions/actionTypes';\r\n\r\nconst defaultState = {\r\n  loggedIn: false,\r\n  userData: {\r\n    firstName: '',\r\n    lastName: '',\r\n  },\r\n  permissions: [],\r\n};\r\n\r\nconst userReducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionLogIn: case actionLoadUserData:\r\n      return produce(state, (draft) => {\r\n        draft.loggedIn = true;\r\n        draft.userData = action.payload;\r\n      });\r\n    case actionLogOut:\r\n      return defaultState;\r\n    case actionLoadPermissions:\r\n      return produce(state, (draft) => {\r\n        draft.permissions = action.payload;\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default userReducer;\r\n","import produce from 'immer';\r\nimport { actionLoadPosts, actionLoadPersons, actionLogOut } from '../actions/actionTypes';\r\n\r\nconst defaultState = {\r\n  posts: [],\r\n  persons: [],\r\n};\r\n\r\nconst staffReducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionLoadPosts:\r\n      return produce(state, (draft) => {\r\n        draft.posts = action.payload;\r\n      });\r\n    case actionLoadPersons:\r\n      return produce(state, (draft) => {\r\n        draft.persons = action.payload;\r\n      });\r\n    case actionLogOut:\r\n      return produce(state, (draft) => {\r\n        draft.persons = [];\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default staffReducer;\r\n","import produce from 'immer';\r\nimport {\r\n  actionLoadTeams, actionLoadContacts, actionLoadTeam, actionLoadPlayers, actionLogOut,\r\n} from '../actions/actionTypes';\r\n\r\nconst defaultState = {\r\n  teams: [],\r\n  contacts: {},\r\n  teamsData: {},\r\n  players: [],\r\n};\r\n\r\nconst teamsReducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionLoadTeams:\r\n      return produce(state, (draft) => {\r\n        draft.teams = action.payload;\r\n      });\r\n    case actionLoadContacts:\r\n      return produce(state, (draft) => {\r\n        draft.contacts = action.payload;\r\n      });\r\n    case actionLoadTeam:\r\n      return produce(state, (draft) => {\r\n        draft.teamsData[action.payload.team.id] = action.payload;\r\n      });\r\n    case actionLoadPlayers:\r\n      return produce(state, (draft) => {\r\n        draft.players = action.payload;\r\n      });\r\n    case actionLogOut:\r\n      return defaultState;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default  teamsReducer;\r\n","import produce from 'immer';\r\nimport {\r\n  actionLoadDays, actionLoadAllGames, actionLoadMyGames,\r\n  actionLogOut, actionSetCurrentGameTab, actionLoadGame,\r\n} from '../actions/actionTypes';\r\n\r\nconst defaultState = {\r\n  days: [],\r\n  allGames: [],\r\n  myGames: [],\r\n  currentTab: '',\r\n  gamesData: {},\r\n};\r\n\r\nconst eventReducer = (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case actionLoadDays:\r\n      return produce(state, (draft) => {\r\n        draft.days = action.payload;\r\n      });\r\n    case actionLoadAllGames:\r\n      return produce(state, (draft) => {\r\n        draft.allGames = action.payload;\r\n      });\r\n    case actionLoadMyGames:\r\n      return produce(state, (draft) => {\r\n        draft.myGames = action.payload;\r\n      });\r\n    case actionSetCurrentGameTab:\r\n      return produce(state, (draft) => {\r\n        draft.currentTab = action.payload;\r\n      });\r\n    case actionLoadGame:\r\n      return produce(state, (draft) => {\r\n        draft.gamesData[action.payload.id] = action.payload;\r\n      });\r\n    case actionLogOut:\r\n      return defaultState;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default eventReducer;\r\n","import { combineReducers } from 'redux';\r\nimport userReducer from './userReducer';\r\nimport staffReducer from './staffRedurer';\r\nimport teamsReducer from './teamsReducer';\r\nimport eventReducer from './eventReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  user: userReducer,\r\n  staff: staffReducer,\r\n  teams: teamsReducer,\r\n  event: eventReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore } from 'redux';\r\nimport { CookiesProvider } from 'react-cookie';\r\nimport App from './App';\r\nimport rootReducer from './reducers';\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  // eslint-disable-next-line no-underscore-dangle\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\r\n);\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <CookiesProvider>\r\n        <App />\r\n      </CookiesProvider>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}